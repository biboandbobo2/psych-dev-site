# Psych Dev Site ‚Äî Custom Instructions

> **–í–ê–ñ–ù–û:** –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ –Ω–µ –ø–æ–ø—Ä–æ—Å–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —è–∑—ã–∫.

## –û –ø—Ä–æ–µ–∫—Ç–µ

–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ—Å—É—Ä—Å –ø–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ (–∑–∞–º–µ—Ç–∫–∏, —Ç–µ—Å—Ç—ã, —Ç–∞–π–º–ª–∞–π–Ω –∂–∏–∑–Ω–∏).

**–°—Ç–µ–∫:** React 19 + TypeScript + Vite + Firebase + Zustand

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞

### 1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚ùå **–ó–ê–ü–†–ï–©–ï–ù–û** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `console.*` –Ω–∞–ø—Ä—è–º—É—é (–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è pre-commit —Ö—É–∫–æ–º)
‚úÖ **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π `import { debugLog, debugError, debugWarn } from '@/lib/debug'`

**–ò—Å–∫–ª—é—á–µ–Ω–∏—è:** —Å–º. `ALLOWED` —Å–ø–∏—Å–æ–∫ –≤ `scripts/check-console.cjs`

### 2. Code Splitting
‚ö†Ô∏è **–ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏** —Ç—è–∂—ë–ª—ã–µ –¥–∞–Ω–Ω—ã–µ (> 500 KB):

```typescript
// ‚ùå –û–ü–ê–°–ù–û ‚Äî –¥–æ–±–∞–≤–∏—Ç 4.7 MB –≤ —á–∞–Ω–∫
import { EVENT_ICON_DATA_URL_MAP } from '@/data/eventIconDataUrls';

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û ‚Äî dynamic import
const { EVENT_ICON_DATA_URL_MAP } = await import('@/data/eventIconDataUrls');
```

**–î–µ—Ç–∞–ª–∏:** `vite.config.js` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `manualChunks`. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—è–∂—ë–ª—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (> 200 KB) –¥–æ–±–∞–≤–ª—è–π –∏—Ö –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

### 3. Lazy Loading
–í—Å–µ —Ä–æ—É—Ç—ã –ª–µ–Ω–∏–≤–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `src/pages/lazy.ts`. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
1. –°–æ–∑–¥–∞–π `React.lazy` import –≤ `src/pages/lazy.ts`
2. –û–±–µ—Ä–Ω–∏ –≤ `<Suspense fallback={<PageLoader />}>`
3. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞: `npm run build`

### 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Barrel Exports** ‚Äî –≤—Å–µ –º–æ–¥—É–ª–∏ —á–µ—Ä–µ–∑ `index.ts` (`src/components/`, `src/hooks/`, `src/utils/` –∏ —Ç.–¥.)
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã < 400 —Å—Ç—Ä–æ–∫, —Ñ—É–Ω–∫—Ü–∏–∏ < 50 —Å—Ç—Ä–æ–∫
- **Custom Hooks** ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞ —Ç–æ–ª—å–∫–æ –≤ —Ö—É–∫–∞—Ö

## –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

```bash
# –ë—ã—Å—Ç—Ä–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
npm run validate       # –í—Å—ë –Ω–∏–∂–µ + build (~5-10 —Å–µ–∫)

# –ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:
npm run lint           # ESLint
npm run check-console  # –ü—Ä–æ–≤–µ—Ä–∫–∞ console.*
npm run check:init     # Module initialization
npm run build          # Production build
npm test               # Unit —Ç–µ—Å—Ç—ã

# –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (–ø–µ—Ä–µ–¥ –ø—É—à–µ–º)
npm run validate:full  # validate + tests (~15-30 —Å–µ–∫)
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- **Pre-commit hook:** `lint` + `check-console` + `check:init`
- **Pre-push hook:** `validate` (–ø–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)

–°–º. –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏: `docs/TESTING_WORKFLOW.md`


## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

üìò **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —á–∏—Ç–∞–π –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏:**
- `docs/ARCHITECTURE_GUIDELINES.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (SRP, DRY, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- `docs/TESTING_WORKFLOW.md` ‚Äî workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `docs/qa-smoke-log.md` ‚Äî –ª–æ–≥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Ñ–∏–∫—Å–∏—Ä—É–π –∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫!)

üìö **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `docs/TestingSystemGuide.md` ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `docs/lazy-loading-migration.md` ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ lazy loading
- `docs/TIMELINE_REFACTORING_PLAN.md` ‚Äî —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Timeline
- `docs/audit-backlog.md` ‚Äî —Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- `README.md` ‚Äî –æ–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞, –º–∞—Ä—à—Ä—É—Ç—ã, Firestore –∫–æ–ª–ª–µ–∫—Ü–∏–∏

## –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev               # Dev —Å–µ—Ä–≤–µ—Ä (port 5173)
npm run build             # Production build
npm run preview           # Preview build (port 4173)

# –í–∞–ª–∏–¥–∞—Ü–∏—è
npm run validate          # –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (~5-10 —Å–µ–∫)
npm run validate:full     # –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å —Ç–µ—Å—Ç–∞–º–∏ (~15-30 —Å–µ–∫)

# –¢–µ—Å—Ç—ã
npm test                  # Unit —Ç–µ—Å—Ç—ã (watch)
npm run test:e2e:prod     # E2E production smoke tests

# Firebase
npm run firebase:deploy:all  # –î–µ–ø–ª–æ–π (storage + rules + functions)
```

## –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

- `vite.config.js` ‚Äî **–∫—Ä–∏—Ç–∏—á–Ω–æ!** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `manualChunks` –¥–ª—è code splitting
- `src/pages/lazy.ts` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ lazy imports
- `src/lib/debug.ts` ‚Äî —É—Ç–∏–ª–∏—Ç—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `scripts/check-console.cjs` ‚Äî pre-commit –ø—Ä–æ–≤–µ—Ä–∫–∞ console.*
- `src/data/eventIconDataUrls.ts` ‚Äî ‚ö†Ô∏è 4.7 MB, **—Ç–æ–ª—å–∫–æ dynamic import!**

## –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
- –í –ø–µ—Ä–≤–æ–º –æ—Ç–≤–µ—Ç–µ –≤—ã–≤–µ–¥–∏ –º–∞—Ä–∫–µ—Ä: <!--claude:MEM v2025-11-14-->
- –ü–µ—Ä–µ–¥ –±–æ–ª—å—à–∏–º–∏ –ø—Ä–∞–≤–∫–∞–º–∏, –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã –∫–æ—Ä–æ—Ç–∫–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Ä–∞–µ—à—å—Å—è (–∏–∑ ARCHITECTURE_*)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-14
