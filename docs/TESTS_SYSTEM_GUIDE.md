# üìö –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

> **–í–µ—Ä—Å–∏—è:** 1.1
> **–î–∞—Ç–∞:** 2025-11-08
> **–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–æ (–§–∞–∑–∞ 1 –∏ –ó–∞–¥–∞—á–∞ 2.1 –∑–∞–≤–µ—Ä—à–µ–Ω—ã)

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- üìã **[–ì–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./README.md)** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞
- üìê **[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](./ARCHITECTURE_GUIDELINES.md)** - –ø—Ä–∞–≤–∏–ª–∞ –∏ best practices
- üîß **[–ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ—Å—Ç–æ–≤](./TESTS_REFACTORING_PLAN.md)** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è —ç—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã
- üóìÔ∏è **[–ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–∞–π–º–ª–∞–π–Ω–∞](./TIMELINE_REFACTORING_PLAN.md)** - –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- üõ†Ô∏è **[–ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Å—Ç–∏](./CORE_REFACTORING_PLAN.md)** - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞–¥–º–∏–Ω–∫–∏, –∑–∞–º–µ—Ç–æ–∫, –ø—Ä–æ—Ñ–∏–ª—è
- üìÖ **[–°–∏—Å—Ç–µ–º–∞ —Ç–∞–π–º–ª–∞–π–Ω–∞](./TimelineGuide.md)** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∑–∞–º–µ—Ç–∫–∏ –∏ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ñ–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-—Ñ–∞–π–ª–æ–≤–∞—è-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
3. [–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö](#—Ç–∏–ø—ã-–¥–∞–Ω–Ω—ã—Ö)
4. [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
5. [–°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#—Å—Ç—Ä–∞–Ω–∏—Ü—ã-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
6. [–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞](#–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
7. [–°–∏—Å—Ç–µ–º–∞ —Ü–µ–ø–æ—á–µ–∫ —Ç–µ—Å—Ç–æ–≤](#—Å–∏—Å—Ç–µ–º–∞-—Ü–µ–ø–æ—á–µ–∫-—Ç–µ—Å—Ç–æ–≤)
8. [–í–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∏ —Ç–µ–º—ã](#–≤–Ω–µ—à–Ω–∏–π-–≤–∏–¥-–∏-—Ç–µ–º—ã)
9. [–ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç](#–∏–º–ø–æ—Ä—Ç-–∏-—ç–∫—Å–ø–æ—Ä—Ç)
10. [–ú–µ–¥–∏–∞-—Ñ–∞–π–ª—ã](#–º–µ–¥–∏–∞-—Ñ–∞–π–ª—ã)
11. [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-–∏-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
12. [–ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞](#–ø–ª–∞–Ω-—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –ø–æ –∫—É—Ä—Å—É –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –î–≤–∞ —Ç–∏–ø–∞ —Ç–µ—Å—Ç–æ–≤: –ø–æ –≤—Å–µ–º—É –∫—É—Ä—Å—É –∏ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º
- ‚úÖ –¶–µ–ø–æ—á–∫–∏ —Ç–µ—Å—Ç–æ–≤ —Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
- ‚úÖ –ú–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ YouTube)
- ‚úÖ –ì–∏–±–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞
- ‚úÖ –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç —Ç–µ—Å—Ç–æ–≤ –≤ JSON
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. **–°—Ç—É–¥–µ–Ω—Ç** - –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ç–µ—Å—Ç—ã, –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
2. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** - —Å–æ–∑–¥–∞—ë—Ç –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç—ã
3. **–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** - —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ñ–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –û–±—â–∞—è —Å—Ö–µ–º–∞

```
src/
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îú‚îÄ‚îÄ tests.ts                 # 104 —Å—Ç—Ä–æ–∫–∏ - —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ testResults.ts           # 21 —Å—Ç—Ä–æ–∫–∞ - —Ç–∏–ø—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ tests.ts                 # 558 —Å—Ç—Ä–æ–∫ - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ testAccess.ts            # 86 —Å—Ç—Ä–æ–∫ - –ª–æ–≥–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îî‚îÄ‚îÄ testResults.ts           # 115 —Å—Ç—Ä–æ–∫ - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ testAppearance.ts        # 169 —Å—Ç—Ä–æ–∫ - —Ä–∞–±–æ—Ç–∞ —Å —Ç–µ–º–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ testImportExport.ts      # 396 —Å—Ç—Ä–æ–∫ - –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç JSON
‚îÇ   ‚îî‚îÄ‚îÄ testChainHelpers.ts      # ~200 —Å—Ç—Ä–æ–∫ - —É—Ç–∏–ª–∏—Ç—ã —Ü–µ–ø–æ—á–µ–∫ —Ç–µ—Å—Ç–æ–≤ ‚úÖ –ù–û–í–û–ï
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ TestEditorForm.tsx       # 1033 —Å—Ç—Ä–æ–∫–∏ üü° –£–õ–£–ß–®–ï–ù–û (–±—ã–ª–æ 1575)
‚îÇ   ‚îú‚îÄ‚îÄ TestEditorModal.tsx      # 1009 —Å—Ç—Ä–æ–∫ ‚ö†Ô∏è –ú–û–ù–û–õ–ò–¢
‚îÇ   ‚îú‚îÄ‚îÄ QuestionEditor.tsx       # 1126 —Å—Ç—Ä–æ–∫ ‚ö†Ô∏è –ú–û–ù–û–õ–ò–¢
‚îÇ   ‚îú‚îÄ‚îÄ QuestionPreview.tsx      # 312 —Å—Ç—Ä–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ TestHistory.tsx          # 196 —Å—Ç—Ä–æ–∫ ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Field.tsx                # 21 —Å—Ç—Ä–æ–∫–∞ ‚úÖ –ù–û–í–û–ï (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –ø–æ–ª–µ)
‚îÇ   ‚îú‚îÄ‚îÄ EmojiPicker.tsx          # 95 —Å—Ç—Ä–æ–∫ ‚úÖ –ù–û–í–û–ï (–≤—ã–±–æ—Ä —ç–º–æ–¥–∑–∏)
‚îÇ   ‚îî‚îÄ‚îÄ tests/
‚îÇ       ‚îú‚îÄ‚îÄ TestCard.tsx         # ~180 —Å—Ç—Ä–æ–∫ ‚úÖ –ù–û–í–û–ï (–∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–µ—Å—Ç–∞)
‚îÇ       ‚îî‚îÄ‚îÄ editor/
‚îÇ           ‚îú‚îÄ‚îÄ TestBasicMetadata.tsx       # 120 —Å—Ç—Ä–æ–∫ ‚úÖ –ù–û–í–û–ï
‚îÇ           ‚îú‚îÄ‚îÄ TestPrerequisiteConfig.tsx  # 231 —Å—Ç—Ä–æ–∫–∞ ‚úÖ –ù–û–í–û–ï
‚îÇ           ‚îú‚îÄ‚îÄ TestActionButtons.tsx       # 58 —Å—Ç—Ä–æ–∫ ‚úÖ –ù–û–í–û–ï
‚îÇ           ‚îú‚îÄ‚îÄ TestQuestionsManager.tsx    # ~150 —Å—Ç—Ä–æ–∫ ‚úÖ –ù–û–í–û–ï
‚îÇ           ‚îî‚îÄ‚îÄ TestAppearanceEditor.tsx    # ~270 —Å—Ç—Ä–æ–∫ ‚úÖ –ù–û–í–û–ï
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ Tests.tsx                # ~420 —Å—Ç—Ä–æ–∫ üü° –£–õ–£–ß–®–ï–ù–û (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç TestCard)
‚îÇ   ‚îú‚îÄ‚îÄ AgeTests.tsx             # ~280 —Å—Ç—Ä–æ–∫ üü° –£–õ–£–ß–®–ï–ù–û (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç TestCard)
‚îÇ   ‚îú‚îÄ‚îÄ DynamicTest.tsx          # 778 —Å—Ç—Ä–æ–∫ ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê
‚îÇ   ‚îú‚îÄ‚îÄ AuthorsTest.tsx          # ‚ùå –£–î–ê–õ–ï–ù–û (–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Å—ã–ª–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ AuthorsTestLevel2.tsx    # ‚ùå –£–î–ê–õ–ï–ù–û (–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Å—ã–ª–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ AuthorsTestLevel3.tsx    # ‚ùå –£–î–ê–õ–ï–ù–û (–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Å—ã–ª–∫–∏)
‚îî‚îÄ‚îÄ constants/
    ‚îî‚îÄ‚îÄ themePresets.ts          # –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–º—ã
```

### –û–±—â–∏–π –æ–±—ä—ë–º –∫–æ–¥–∞

**–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
- **–í—Å–µ–≥–æ:** ~8800 —Å—Ç—Ä–æ–∫
- **–ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥:** ~1225 —Å—Ç—Ä–æ–∫ (AuthorsTest*)
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:** ~150-200 —Å—Ç—Ä–æ–∫

**–ü–æ—Å–ª–µ –§–∞–∑—ã 1 –∏ –ó–∞–¥–∞—á–∏ 2.1 (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ):**
- **–í—Å–µ–≥–æ:** ~7300 —Å—Ç—Ä–æ–∫ (-17%)
- **–ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥:** 0 —Å—Ç—Ä–æ–∫ (—É–¥–∞–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ AuthorsTest*)
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:** ~0 —Å—Ç—Ä–æ–∫ (–≤—ã–Ω–µ—Å–µ–Ω–æ –≤ testChainHelpers.ts)
- **–°–æ–∑–¥–∞–Ω–æ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** 10 (7 editor + 2 shared + TestCard)
- **–£–ª—É—á—à–µ–Ω–æ:** TestEditorForm (-542 —Å—Ç—Ä–æ–∫–∏, -34.4%)

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- QuestionEditor: 1126 ‚Üí ~200 —Å—Ç—Ä–æ–∫ (—Ü–µ–ª—å)
- DynamicTest: 778 ‚Üí ~150 —Å—Ç—Ä–æ–∫ (—Ü–µ–ª—å)
- **–ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–ª—å:** ~5000-5500 —Å—Ç—Ä–æ–∫ (-38% –æ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ)

---

## –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (types/tests.ts)

#### TestRubric - –†—É–±—Ä–∏–∫–∞ —Ç–µ—Å—Ç–∞
```typescript
type TestRubric = 'full-course' | AgeRange;
```
- `'full-course'` - —Ç–µ—Å—Ç –ø–æ –≤—Å–µ–º—É –∫—É—Ä—Å—É
- `AgeRange` - —Ç–µ—Å—Ç –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–º—É –ø–µ—Ä–∏–æ–¥—É (intro, prenatal, infancy, toddler –∏ —Ç.–¥.)

#### TestStatus - –°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
```typescript
type TestStatus = 'draft' | 'published' | 'unpublished';
```

#### RevealPolicy - –ü–æ–ª–∏—Ç–∏–∫–∞ –ø–æ–∫–∞–∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
```typescript
type RevealPolicy =
  | { mode: 'never' }                         // –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
  | { mode: 'after_attempts'; attempts: number } // –ü–æ—Å–ª–µ N –ø–æ–ø—ã—Ç–æ–∫
  | { mode: 'after_test' }                    // –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
  | { mode: 'immediately' };                  // –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞
```

#### TestQuestion - –í–æ–ø—Ä–æ—Å —Ç–µ—Å—Ç–∞
```typescript
interface TestQuestion {
  id: string;                          // UUID –≤–æ–ø—Ä–æ—Å–∞
  questionText: string;                // –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
  answers: QuestionAnswer[];           // 2-8 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞
  correctAnswerId: string | null;      // ID –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
  shuffleAnswers: boolean;             // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞—Ç—å –ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã
  revealPolicy: RevealPolicy;          // –ü–æ–ª–∏—Ç–∏–∫–∞ –ø–æ–∫–∞–∑–∞ –æ—Ç–≤–µ—Ç–∞
  revealPolicySource?: 'inherit' | 'custom'; // –ù–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç —Ç–µ—Å—Ç–∞ –∏–ª–∏ —Å–≤–æ—è
  explanation?: string;                // –ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ –æ—Ç–≤–µ—Ç—É
  customRightMsg?: string;             // –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
  customWrongMsg?: string;             // –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
  resourcesRight?: TestResource[];     // –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
  resourcesWrong?: TestResource[];     // –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
  imageUrl?: string;                   // URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–∑ Firebase Storage
  audioUrl?: string;                   // URL –∞—É–¥–∏–æ –∏–∑ Firebase Storage
  videoUrl?: string;                   // URL –≤–∏–¥–µ–æ (YouTube, Vimeo)
}
```

#### Test - –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∞
```typescript
interface Test {
  id: string;                          // UUID —Ç–µ—Å—Ç–∞
  title: string;                       // –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞
  rubric: TestRubric;                  // –†—É–±—Ä–∏–∫–∞
  prerequisiteTestId?: string;         // ID —Ç–µ—Å—Ç–∞-–ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞
  questionCount: number;               // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ (1-20)
  questions: TestQuestion[];           // –ú–∞—Å—Å–∏–≤ –≤–æ–ø—Ä–æ—Å–æ–≤
  status: TestStatus;                  // –°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
  requiredPercentage?: number;         // –ü–æ—Ä–æ–≥ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 70%)
  defaultRevealPolicy?: RevealPolicy;  // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ–∫–∞–∑–∞
  appearance?: TestAppearance;         // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞
  createdAt: Date;                     // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
  updatedAt: Date;                     // –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  createdBy: string;                   // UID —Å–æ–∑–¥–∞—Ç–µ–ª—è (admin)
}
```

#### TestAppearance - –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ —Ç–µ—Å—Ç–∞
```typescript
interface TestAppearance {
  introIcon?: string;                  // –≠–º–æ–¥–∑–∏ –¥–ª—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
  introTitle?: string;                 // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–µ—Å—Ç–∞
  introDescription?: string;           // –û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏
  badgeIcon?: string;                  // –ò–∫–æ–Ω–∫–∞ –±–µ–π–¥–∂–∞ —É—Ä–æ–≤–Ω—è
  badgeLabel?: string;                 // –¢–µ–∫—Å—Ç –Ω–∞ –±–µ–π–¥–∂–µ
  badgeGradientFrom?: string;          // –¶–≤–µ—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –±–µ–π–¥–∂–∞ (–Ω–∞—á–∞–ª–æ)
  badgeGradientTo?: string;            // –¶–≤–µ—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –±–µ–π–¥–∂–∞ (–∫–æ–Ω–µ—Ü)
  backgroundGradientFrom?: string;     // –¶–≤–µ—Ç —Ñ–æ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞—á–∞–ª–æ)
  backgroundGradientTo?: string;       // –¶–≤–µ—Ç —Ñ–æ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–∫–æ–Ω–µ—Ü)
  accentGradientFrom?: string;         // –¶–≤–µ—Ç –∞–∫—Ü–µ–Ω—Ç–∞ (–∫–Ω–æ–ø–∫–∏)
  accentGradientTo?: string;           // –¶–≤–µ—Ç –∞–∫—Ü–µ–Ω—Ç–∞ (–∫–æ–Ω–µ—Ü)
  bulletPoints?: string[];             // –°–ø–∏—Å–æ–∫ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ç–µ—Å—Ç–∞
  theme?: ThemeSettings;               // –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–º
  resolvedTheme?: DerivedTheme;        // –í—ã—á–∏—Å–ª–µ–Ω–Ω–∞—è —Ç–µ–º–∞
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ (types/testResults.ts)

```typescript
interface TestResult {
  id: string;                          // UUID —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
  userId: string;                      // UID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  testId: string;                      // ID —Ç–µ—Å—Ç–∞
  score: number;                       // –ù–∞–±—Ä–∞–Ω–Ω—ã–µ –±–∞–ª–ª—ã
  totalQuestions: number;              // –í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤
  percentage: number;                  // –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
  completedAt: Date;                   // –í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
  timeSpent?: number;                  // –í—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è (–º—Å)
}
```

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üî¥ TestEditorForm.tsx (1575 —Å—Ç—Ä–æ–∫) - –¢–†–ï–ë–£–ï–¢ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/components/TestEditorForm.tsx`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–∞.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ä—É–±—Ä–∏–∫–∞)
2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞–º–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –ø–æ—Ä—è–¥–æ–∫)
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ (—Ç–µ–º—ã, —Ü–≤–µ—Ç–∞, –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, –∏–∫–æ–Ω–∫–∏)
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–∏—Ç–∏–∫ –ø–æ–∫–∞–∑–∞ –æ—Ç–≤–µ—Ç–æ–≤
5. –í—ã–±–æ—Ä prerequisite —Ç–µ—Å—Ç–∞ (–¥–ª—è —Ü–µ–ø–æ—á–µ–∫)
6. –ò–º–ø–æ—Ä—Ç —Ç–µ—Å—Ç–æ–≤ –∏–∑ JSON
7. –≠–∫—Å–ø–æ—Ä—Ç —Ç–µ—Å—Ç–æ–≤ –≤ JSON
8. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
9. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Firestore

**Props:**
```typescript
interface TestEditorFormProps {
  testId?: string;              // ID —Ç–µ—Å—Ç–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (undefined = —Å–æ–∑–¥–∞–Ω–∏–µ)
  onSave?: () => void;          // Callback –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  onCancel?: () => void;        // Callback –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ
}
```

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–∫—Ü–∏–∏:**

1. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Å—Ç—Ä–æ–∫–∏ 200-350)**
   - –ü–æ–ª—è: title, description, rubric
   - –í—ã–±–æ—Ä prerequisite —Ç–µ—Å—Ç–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ requiredPercentage
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ defaultRevealPolicy

2. **–í–Ω–µ—à–Ω–∏–π –≤–∏–¥ (—Å—Ç—Ä–æ–∫–∏ 350-800)**
   - –í—ã–±–æ—Ä —Ç–µ–º—ã –∏–∑ presets
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ mainColor
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ (background, accent, badge)
   - –í—ã–±–æ—Ä –∏–∫–æ–Ω–æ–∫ (introIcon, badgeIcon)
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ bulletPoints
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–º—ã

3. **–í–æ–ø—Ä–æ—Å—ã (—Å—Ç—Ä–æ–∫–∏ 800-1200)**
   - –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å drag & drop
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ QuestionEditor
   - –£–¥–∞–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–æ–ø—Ä–æ—Å–∞

4. **–ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç (—Å—Ç—Ä–æ–∫–∏ 1200-1400)**
   - –ò–º–ø–æ—Ä—Ç –∏–∑ JSON —Ñ–∞–π–ª–∞
   - –≠–∫—Å–ø–æ—Ä—Ç —Ç–µ—Å—Ç–∞ –≤ JSON
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞ –≤–æ–ø—Ä–æ—Å–æ–≤

5. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 1400-1575)**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Firestore
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –æ–¥–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚ö†Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–º–∞–º–∏

---

### üî¥ QuestionEditor.tsx (1126 —Å—Ç—Ä–æ–∫) - –¢–†–ï–ë–£–ï–¢ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/components/QuestionEditor.tsx`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–µ–¥–∞–∫—Ç–æ—Ä –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ —Ç–µ—Å—Ç–∞.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤–æ–ø—Ä–æ—Å–∞
2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤ (2-8 —à—Ç—É–∫)
3. –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
4. –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ YouTube)
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–∫–∞–∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ)
7. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è
8. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (—Å—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã)

**Props:**
```typescript
interface QuestionEditorProps {
  question: TestQuestion;
  index: number;
  onChange: (question: TestQuestion) => void;
  onDelete: () => void;
  testId?: string;
  defaultRevealPolicy?: RevealPolicy;
}
```

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–∫—Ü–∏–∏:**

1. **–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ (—Å—Ç—Ä–æ–∫–∏ 100-200)**
   - Textarea —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
   - –°—á—ë—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤

2. **–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 200-500)**
   - –°–ø–∏—Å–æ–∫ –æ—Ç–≤–µ—Ç–æ–≤ (2-8)
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
   - –£–¥–∞–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
   - –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —á–µ—Ä–µ–∑ radio button
   - Drag & drop –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞

3. **–ú–µ–¥–∏–∞-—Ñ–∞–π–ª—ã (—Å—Ç—Ä–æ–∫–∏ 500-700)**
   - Upload –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Üí Firebase Storage
   - Upload –∞—É–¥–∏–æ ‚Üí Firebase Storage
   - –í–≤–æ–¥ YouTube URL (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ embed)
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∫–∞–∑–∞ –æ—Ç–≤–µ—Ç–∞ (—Å—Ç—Ä–æ–∫–∏ 700-850)**
   - –í—ã–±–æ—Ä –º–µ–∂–¥—É 'inherit' –∏ 'custom'
   - –ï—Å–ª–∏ custom:
     - –í—ã–±–æ—Ä mode (never, immediately, after_attempts, after_test)
     - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ attempts (–µ—Å–ª–∏ mode = after_attempts)

5. **Feedback (—Å—Ç—Ä–æ–∫–∏ 850-1000)**
   - customRightMsg - —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
   - customWrongMsg - —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
   - explanation - –ø–æ—è—Å–Ω–µ–Ω–∏–µ

6. **–†–µ—Å—É—Ä—Å—ã (—Å—Ç—Ä–æ–∫–∏ 1000-1126)**
   - resourcesRight - —Å—Å—ã–ª–∫–∏ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
   - resourcesWrong - —Å—Å—ã–ª–∫–∏ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–≥–∏–∫–∏ –≤ –æ–¥–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
- ‚ö†Ô∏è –°–º–µ—à–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –∏ UI
- ‚ö†Ô∏è –ù–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤)

---

### QuestionPreview.tsx (312 —Å—Ç—Ä–æ–∫) - –ù–û–†–ú–ê–õ–¨–ù–û

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/components/QuestionPreview.tsx`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–æ–ø—Ä–æ—Å–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤–æ–ø—Ä–æ—Å —Ç–∞–∫, –∫–∞–∫ –µ–≥–æ —É–≤–∏–¥–∏—Ç —Å—Ç—É–¥–µ–Ω—Ç
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–¥–∏–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
- –ù–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–µ–Ω (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä)

**Props:**
```typescript
interface QuestionPreviewProps {
  question: TestQuestion;
  onClose: () => void;
}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
- –ú–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç
- –°–ø–∏—Å–æ–∫ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ (–Ω–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã)
- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è

---

### TestHistory.tsx (196 —Å—Ç—Ä–æ–∫) - ‚úÖ –•–û–†–û–®–û

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/components/TestHistory.tsx`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π —Ç–µ—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ Firestore
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º –∏ –¥–∞—Ç–æ–π
- –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª)

**Props:**
```typescript
interface TestHistoryProps {
  userId: string;
  testId: string;
}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìä –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üèÜ –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 95%       ‚îÇ
‚îÇ  üìà –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª: 82%           ‚îÇ
‚îÇ  üî¢ –í—Å–µ–≥–æ –ø–æ–ø—ã—Ç–æ–∫: 3            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚úÖ 95% (19/20) - 05.11.2025    ‚îÇ
‚îÇ  ‚≠ï 85% (17/20) - 04.11.2025    ‚îÇ
‚îÇ  ‚≠ï 70% (14/20) - 03.11.2025    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### TestEditorModal.tsx (1009 —Å—Ç—Ä–æ–∫) - –¢–†–ï–ë–£–ï–¢ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/components/TestEditorModal.tsx`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ-–æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ TestEditorForm.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç/–∑–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É
- –†–µ–Ω–¥–µ—Ä–∏—Ç TestEditorForm –≤–Ω—É—Ç—Ä–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callbacks (onSave, onCancel)
- –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –æ—Ç–∫—Ä—ã—Ç–∏—è

**Props:**
```typescript
interface TestEditorModalProps {
  isOpen: boolean;
  testId?: string;
  onClose: () => void;
  onSave?: () => void;
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –æ–±—ë—Ä—Ç–∫–∏
- ‚ö†Ô∏è –ú–Ω–æ–≥–æ –¥—É–±–ª–∏—Ä—É—é—â–µ–π—Å—è –ª–æ–≥–∏–∫–∏ —Å TestEditorForm
- ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å TestEditorForm –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

---

## –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### Tests.tsx (485 —Å—Ç—Ä–æ–∫) - –¢–µ—Å—Ç—ã –ø–æ –≤—Å–µ–º—É –∫—É—Ä—Å—É

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/pages/Tests.tsx`  
**URL:** `/tests`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤ –ø–æ –≤—Å–µ–º—É –∫—É—Ä—Å—É –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è.

**–ß—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
1. –ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏–∑ Firestore (—Å —Ä—É–±—Ä–∏–∫–æ–π `'full-course'`)
2. –ó–∞–≥–ª—É—à–∫–∏ –±—É–¥—É—â–∏—Ö —Ç–µ—Å—Ç–æ–≤ (5 –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –º–µ—Ç–∫–æ–π "–°–∫–æ—Ä–æ")

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```typescript
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –ø–æ —Ä—É–±—Ä–∏–∫–µ
const courseTests = useMemo(() => {
  return firestoreTests
    .filter((test) => test.rubric === 'full-course')
    .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());
}, [firestoreTests]);
```

**–°–∏—Å—Ç–µ–º–∞ —Ü–µ–ø–æ—á–µ–∫:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `buildTestChains()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Ç–µ—Å—Ç–æ–≤
- –ö–æ—Ä–Ω–µ–≤–æ–π —Ç–µ—Å—Ç = —Ç–µ—Å—Ç –±–µ–∑ prerequisite
- –£—Ä–æ–≤–Ω–∏ = —Ç–µ—Å—Ç—ã, —Å—Å—ã–ª–∞—é—â–∏–µ—Å—è –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π —á–µ—Ä–µ–∑ prerequisiteTestId

**–ü—Ä–∏–º–µ—Ä —Ü–µ–ø–æ—á–∫–∏:**
```
–¢–µ—Å—Ç "–ê–≤—Ç–æ—Ä—ã –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è"
  ‚îú‚îÄ –£—Ä–æ–≤–µ–Ω—å 2: "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å"
  ‚îî‚îÄ –£—Ä–æ–≤–µ–Ω—å 3: "–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å"
```

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ `title` (—á–∞—Å—Ç—å –¥–æ `:`)
- –¶–≤–µ—Ç–∞ –∏ –∏–∫–æ–Ω–∫–∏ –∏–∑ `appearance`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–≤–Ω–µ–π
- –î–ª—è —É—Ä–æ–≤–Ω–µ–π - –∫–Ω–æ–ø–∫–∏ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∏–ª–∏ "üîí" –µ—Å–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ

**–ó–∞–≥–ª—É—à–∫–∏ (COURSE_TESTS):**
```typescript
const COURSE_TESTS: LegacyTest[] = [
  { title: '–û–±—â–∏–µ –∑–Ω–∞–Ω–∏—è –ø–æ –∫—É—Ä—Å—É', icon: 'üìö', ... },
  { title: '–≠—Ç–∞–ø—ã —Ä–∞–∑–≤–∏—Ç–∏—è', icon: 'üå±', ... },
  { title: '–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ', icon: 'üéØ', ... },
  { title: '–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ', icon: 'üß†', ... },
  { title: '–°–æ—Ü–∏–∞–ª—å–Ω–æ-—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ', icon: '‚ù§Ô∏è', ... },
];
```
–û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –º–µ—Ç–∫–æ–π "–°–∫–æ—Ä–æ" –∏ opacity-60.

**–ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
1. –ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã (–Ω–æ–≤—ã–µ ‚Üí —Å—Ç–∞—Ä—ã–µ)
2. –ó–∞–≥–ª—É—à–∫–∏

---

### AgeTests.tsx (311 —Å—Ç—Ä–æ–∫) - –¢–µ—Å—Ç—ã –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/pages/AgeTests.tsx`  
**URL:** `/tests/age-periods`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–º –ø–µ—Ä–∏–æ–¥–∞–º.

**–ß—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
- –¢–µ—Å—Ç—ã —Å —Ä—É–±—Ä–∏–∫–∞–º–∏ –∏–∑ AgeRange (prenatal, infancy, toddler –∏ —Ç.–¥.)
- –ë–µ–∑ –∑–∞–≥–ª—É—à–µ–∫

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
```typescript
const ageTests = useMemo(() => {
  return firestoreTests
    .filter((test) => test.rubric !== 'full-course')
    .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());
}, [firestoreTests]);
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞ –∂–µ –ª–æ–≥–∏–∫–∞ —Ü–µ–ø–æ—á–µ–∫ (`buildTestChains`)
- –ö–∞—Ä—Ç–æ—á–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Tests.tsx
- –£—Ä–æ–≤–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è (–Ω–µ "–£—Ä–æ–≤–µ–Ω—å 2", –∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ title)

**–§—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```typescript
// –û—á–∏—Å—Ç–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –æ—Ç –ø—Ä–µ—Ñ–∏–∫—Å–∞ "–£—Ä–æ–≤–µ–Ω—å N"
function cleanLevelLabel(text: string) {
  return text.replace(/^–£—Ä–æ–≤–µ–Ω—å\s*\d+\s*[-‚Äì‚Äî:]?\s*/i, '').trim();
}

// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —É—Ä–æ–≤–Ω—è
function formatLevelLabel(test: FirestoreTest, index: number) {
  const parts = test.title.split(':');
  if (parts.length > 1) {
    return cleanLevelLabel(parts.slice(1).join(':').trim());
  }
  return cleanLevelLabel(test.title) || `–£—Ä–æ–≤–µ–Ω—å ${index}`;
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å Tests.tsx (~150-200 —Å—Ç—Ä–æ–∫)
- ‚ö†Ô∏è –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: cleanLevelLabel, formatLevelLabel, buildTestChains, getTestMetadata

---

### DynamicTest.tsx (778 —Å—Ç—Ä–æ–∫) - –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/pages/DynamicTest.tsx`  
**URL:** `/tests/dynamic/:testId`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ª—é–±–æ–≥–æ —Ç–µ—Å—Ç–∞.

**–≠—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã:**

#### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–∞ (—Å—Ç—Ä–æ–∫–∏ 91-149)
```typescript
useEffect(() => {
  const loadTest = async () => {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ testId –∏ user
    // 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ getTestById()
    // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (—Ç–æ–ª—å–∫–æ published)
    // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —á–µ—Ä–µ–∑ isTestUnlocked()
    // 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–∞ –≤ state
  };
  loadTest();
}, [testId, user]);
```

#### 2. –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω (—Å—Ç—Ä–æ–∫–∏ 330-405)
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ `!started`:
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞
- –ò–∫–æ–Ω–∫–∞ –∏ –±–µ–π–¥–∂ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑ appearance.introDescription
- Bullet points (–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∞)
- –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç"

#### 3. –≠–∫—Ä–∞–Ω –≤–æ–ø—Ä–æ—Å–∞ (—Å—Ç—Ä–æ–∫–∏ 490-665)
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ `started && !finished`:

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (—Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å / –≤—Å–µ–≥–æ)
- –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
- –ú–µ–¥–∏–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ YouTube)
- –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (–ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–µ –∏–ª–∏ –Ω–µ—Ç)
- –ò–Ω–¥–∏–∫–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–≤–µ—Ç–∏—Ç—å"

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞:**
```typescript
const handleSubmitAnswer = () => {
  if (!selectedAnswer || !currentQuestion) return;

  const isCorrect = selectedAnswer === currentQuestion.correctAnswerId;
  
  if (isCorrect) {
    setScore(score + 1);
    setAnswerState('correct');
  } else {
    setAnswerState('incorrect');
    setAttemptCount(attemptCount + 1);
  }

  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
  const shouldReveal = /* –ª–æ–≥–∏–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ RevealPolicy */;
  setShowExplanation(shouldReveal);
};
```

**–ü–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
–ó–∞–≤–∏—Å–∏—Ç –æ—Ç `revealPolicy`:
- `never` - –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- `immediately` - —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞
- `after_attempts` - –ø–æ—Å–ª–µ N –ø–æ–ø—ã—Ç–æ–∫
- `after_test` - —Ç–æ–ª—å–∫–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- –ö–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" ‚Üí —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å ‚Üí –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞

#### 4. –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 665-780)
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ `finished`:

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
- –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ—É–¥–∞—á–µ
- –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö / –≤—Å–µ–≥–æ
- –†–∞–∑–±–∏–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º:
  - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
  - ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
  - –ü–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ (–µ—Å–ª–∏ –ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç)
  - –ü–æ—è—Å–Ω–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - –†–µ—Å—É—Ä—Å—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–î–µ–π—Å—Ç–≤–∏—è:**
- "–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ" - —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
- "–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —Ç–µ—Å—Ç–æ–≤" - –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç rubric)

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```typescript
useEffect(() => {
  if (finished && !resultSaved && user && testId) {
    const saveResult = async () => {
      const timeSpent = startTime ? Date.now() - startTime.getTime() : undefined;
      await saveTestResult(user.uid, testId, score, totalQuestions, timeSpent);
      setResultSaved(true);
    };
    saveResult();
  }
}, [finished, resultSaved, user, testId, score, totalQuestions, startTime]);
```

**–ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥:**
–ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä—É–±—Ä–∏–∫–∏ —Ç–µ—Å—Ç–∞:
```typescript
const backUrl = useMemo(() => {
  if (!test) return '/tests';
  return test.rubric === 'full-course' ? '/tests' : '/tests/age-periods';
}, [test?.rubric]);
```

**–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```typescript
// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
function shuffleArray<T>(items: T[]): T[] {
  // Fisher-Yates shuffle
}

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–∫–∞–∑–∞ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞
function resolveRevealPolicy(question, defaultPolicy): RevealPolicy {
  // –õ–æ–≥–∏–∫–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è custom
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
function shouldRevealOnResults(policy: RevealPolicy): boolean {
  if (policy.mode === 'never') return false;
  if (policy.mode === 'after_test') return true;
  return true; // immediately –∏ after_attempts —Ç–æ–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π (12+ useState)
- ‚ö†Ô∏è –°–º–µ—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏, –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
- ‚ö†Ô∏è –ú–Ω–æ–≥–æ —É—Å–ª–æ–≤–Ω—ã—Ö return'–æ–≤ (8 —à—Ç—É–∫)
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—ç–∫—Ä–∞–Ω—ã

---

### AuthorsTest.tsx, AuthorsTestLevel2/3.tsx (1225 —Å—Ç—Ä–æ–∫) - –£–°–¢–ê–†–ï–õ–û

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/pages/AuthorsTest*.tsx`  
**URL:** `/tests/authors`, `/tests/authors/level2`, `/tests/authors/level3`

**‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢–°–Ø –£–î–ê–õ–ï–ù–ò–ï**

–≠—Ç–∏ —Ñ–∞–π–ª—ã:
- Hardcoded —Ç–µ—Å—Ç—ã –ø—Ä–æ –ø—Å–∏—Ö–æ–ª–æ–≥–æ–≤ —Ä–∞–∑–≤–∏—Ç–∏—è
- –°–æ–∑–¥–∞–Ω—ã –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è DynamicTest
- –í—Å—ë –µ—â—ë –≤ —Ä–æ—É—Ç–∏–Ω–≥–µ App.jsx
- –ó–∞–Ω–∏–º–∞—é—Ç ~1225 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

**–ü–ª–∞–Ω —É–¥–∞–ª–µ–Ω–∏—è:**
1. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤ –≤ Firestore
2. –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã
3. –£–¥–∞–ª–∏—Ç—å —Ä–æ—É—Ç—ã –∏–∑ App.jsx
4. –£–¥–∞–ª–∏—Ç—å imports

---

## –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### lib/tests.ts (558 —Å—Ç—Ä–æ–∫) - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏

**–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Firestore:**

#### getPublishedTests()
```typescript
async function getPublishedTests(): Promise<Test[]>
```
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (`status === 'published'`)
- –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç Firestore timestamps –≤ Date
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤–æ–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `normalizeQuestion()`

#### getTestById()
```typescript
async function getTestById(testId: string): Promise<Test | null>
```
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç –ø–æ ID
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç null –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ

#### createTest()
```typescript
async function createTest(testData: CreateTestData): Promise<string>
```
- –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ç–µ—Å—Ç –≤ Firestore
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç UUID
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç timestamps (createdAt, updatedAt)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç createdBy = —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –°–∞–Ω–∏—Ç–∏–∑–∏—Ä—É–µ—Ç –≤–æ–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `sanitizeQuestionForWrite()`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞

#### updateTest()
```typescript
async function updateTest(testId: string, updates: UpdateTestData): Promise<void>
```
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–µ—Å—Ç
- –û–±–Ω–æ–≤–ª—è–µ—Ç updatedAt
- –°–∞–Ω–∏—Ç–∏–∑–∏—Ä—É–µ—Ç –≤–æ–ø—Ä–æ—Å—ã
- –ú–µ—Ä–∂–∏—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

#### deleteTest()
```typescript
async function deleteTest(testId: string): Promise<void>
```
- –£–¥–∞–ª—è–µ—Ç —Ç–µ—Å—Ç –∏–∑ Firestore
- ‚ö†Ô∏è TODO: –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (prerequisite)

**–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

#### normalizeQuestion()
```typescript
function normalizeQuestion(data: any): TestQuestion
```
–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Firestore –≤ TestQuestion:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ –≤ –º–∞—Å—Å–∏–≤—ã
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—è –º–µ–¥–∏–∞ (imageUrl, audioUrl, videoUrl)

#### sanitizeQuestionForWrite()
```typescript
function sanitizeQuestionForWrite(question: TestQuestion): any
```
–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –≤–æ–ø—Ä–æ—Å –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ Firestore:
- –£–¥–∞–ª—è–µ—Ç undefined –∑–Ω–∞—á–µ–Ω–∏—è
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–∞—Å—Å–∏–≤—ã
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ–¥–∏–∞-–ø–æ–ª—è

---

### lib/testAccess.ts (86 —Å—Ç—Ä–æ–∫) - –õ–æ–≥–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞

**–§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:**

#### isTestUnlocked()
```typescript
async function isTestUnlocked(
  userId: string,
  prerequisiteTestId?: string,
  requiredPercentage: number = 70
): Promise<boolean>
```

**–õ–æ–≥–∏–∫–∞:**
```
1. –ï—Å–ª–∏ prerequisiteTestId –Ω–µ —É–∫–∞–∑–∞–Ω ‚Üí —Ç–µ—Å—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ prerequisite —Ç–µ—Å—Ç—É
3. –ï—Å–ª–∏ –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚Üí —Ç–µ—Å—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
4. –ù–∞–π—Ç–∏ –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
5. –ï—Å–ª–∏ –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç >= requiredPercentage ‚Üí —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
6. –ò–Ω–∞—á–µ ‚Üí –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
```

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// –¢–µ—Å—Ç "–ê–≤—Ç–æ—Ä—ã –£—Ä–æ–≤–µ–Ω—å 2" —Ç—Ä–µ–±—É–µ—Ç 80% –Ω–∞ "–ê–≤—Ç–æ—Ä–∞—Ö –£—Ä–æ–≤–µ–Ω—å 1"
const unlocked = await isTestUnlocked(
  user.uid,
  '–∞–≤—Ç–æ—Ä—ã-—É—Ä–æ–≤–µ–Ω—å-1-id',
  80
);
// unlocked = true, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–±—Ä–∞–ª >= 80% –Ω–∞ –ø–µ—Ä–≤–æ–º —É—Ä–æ–≤–Ω–µ
```

---

### lib/testResults.ts (115 —Å—Ç—Ä–æ–∫) - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### saveTestResult()
```typescript
async function saveTestResult(
  userId: string,
  testId: string,
  score: number,
  totalQuestions: number,
  timeSpent?: number
): Promise<string>
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –í—ã—á–∏—Å–ª—è–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç: `(score / totalQuestions) * 100`
2. –°–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç TestResult
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Firestore –∫–æ–ª–ª–µ–∫—Ü–∏—é `testResults`
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ Firestore:**
```
testResults/
  ‚îú‚îÄ {resultId1}/
  ‚îÇ   ‚îú‚îÄ userId: "abc123"
  ‚îÇ   ‚îú‚îÄ testId: "test-xyz"
  ‚îÇ   ‚îú‚îÄ score: 18
  ‚îÇ   ‚îú‚îÄ totalQuestions: 20
  ‚îÇ   ‚îú‚îÄ percentage: 90
  ‚îÇ   ‚îú‚îÄ completedAt: Timestamp
  ‚îÇ   ‚îî‚îÄ timeSpent: 125000
  ‚îî‚îÄ {resultId2}/
      ‚îî‚îÄ ...
```

#### getTestResults()
```typescript
async function getTestResults(userId: string, testId: string): Promise<TestResult[]>
```
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–µ—Å—Ç—É
- –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)

#### getBestResult()
```typescript
async function getBestResult(userId: string, testId: string): Promise<TestResult | null>
```
- –ù–∞—Ö–æ–¥–∏—Ç –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–ª–µ–¥—É—é—â–∏—Ö —É—Ä–æ–≤–Ω–µ–π

---

## –°–∏—Å—Ç–µ–º–∞ —Ü–µ–ø–æ—á–µ–∫ —Ç–µ—Å—Ç–æ–≤

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–¶–µ–ø–æ—á–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—é —Ç–µ—Å—Ç–æ–≤, –≥–¥–µ –∫–∞–∂–¥—ã–π —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ü–µ–ø–æ—á–∫–∏

```typescript
interface TestChain {
  root: FirestoreTest;      // –ö–æ—Ä–Ω–µ–≤–æ–π —Ç–µ—Å—Ç (–±–µ–∑ prerequisite)
  levels: FirestoreTest[];  // –¢–µ—Å—Ç—ã-—É—Ä–æ–≤–Ω–∏ (—Å prerequisiteTestId)
}
```

**–ü—Ä–∏–º–µ—Ä:**
```
–¶–µ–ø–æ—á–∫–∞: "–ê–≤—Ç–æ—Ä—ã –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è"
‚îú‚îÄ Root: "–ê–≤—Ç–æ—Ä—ã: –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å" (prerequisiteTestId = null)
‚îú‚îÄ Level 1: "–ê–≤—Ç–æ—Ä—ã: –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –∏ –º–æ—Ä–∞–ª—å" (prerequisiteTestId = root.id, requiredPercentage = 70)
‚îî‚îÄ Level 2: "–ê–≤—Ç–æ—Ä—ã: —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å" (prerequisiteTestId = level1.id, requiredPercentage = 80)
```

### –ê–ª–≥–æ—Ä–∏—Ç–º buildTestChains()

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** Tests.tsx –∏ AgeTests.tsx (–¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è!)

```typescript
function buildTestChains(tests: FirestoreTest[]): TestChain[] {
  // 1. –°–æ–∑–¥–∞—Ç—å Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ—Å—Ç–∞–º –ø–æ ID
  const map = new Map<string, FirestoreTest>();
  for (const test of tests) {
    map.set(test.id, test);
  }

  // 2. –ù–∞–π—Ç–∏ –∫–æ—Ä–Ω–µ–≤—ã–µ —Ç–µ—Å—Ç—ã (–±–µ–∑ prerequisite –∏–ª–∏ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º)
  const roots: FirestoreTest[] = [];
  for (const test of tests) {
    if (!test.prerequisiteTestId || !map.has(test.prerequisiteTestId)) {
      roots.push(test);
    }
  }

  // 3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ—Ä–Ω—è –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–ø–æ—á–∫—É
  const chains: TestChain[] = [];
  for (const root of roots) {
    const visited = new Set<string>();
    visited.add(root.id);

    let current: FirestoreTest | undefined = root;
    const levels: FirestoreTest[] = [];

    // 4. –ò–¥—Ç–∏ –ø–æ —Ü–µ–ø–æ—á–∫–µ –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã (3 —É—Ä–æ–≤–Ω—è)
    while (current && levels.length < MAX_CHAIN_LENGTH) {
      // –ù–∞–π—Ç–∏ —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ —Ç–µ–∫—É—â–∏–π
      const successors = tests.filter(
        (t) => t.prerequisiteTestId === current!.id && !visited.has(t.id)
      );
      
      if (successors.length === 0) break;

      const next = successors[0]; // –ë–µ—Ä—ë–º –ø–µ—Ä–≤—ã–π (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Å–∫–æ–ª—å–∫–æ)
      visited.add(next.id);
      levels.push(next);
      current = next;
    }

    chains.push({ root, levels });
  }

  return chains;
}
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏

**–í Tests.tsx / AgeTests.tsx:**

```jsx
{testChains.map((chain) => {
  const { root, levels } = chain;
  
  return (
    <div className="test-card">
      {/* –ö–æ—Ä–Ω–µ–≤–æ–π —Ç–µ—Å—Ç */}
      <Link to={`/tests/dynamic/${root.id}`}>
        <h3>{root.title}</h3>
        <p>{appearance.introDescription}</p>
        <span>üìã {root.questionCount} –≤–æ–ø—Ä–æ—Å–æ–≤</span>
        {levels.length > 0 && (
          <span>üî• {levels.length} —É—Ä–æ–≤–Ω—è</span>
        )}
      </Link>
      
      {/* –£—Ä–æ–≤–Ω–∏ */}
      {levels.length > 0 && (
        <div className="levels">
          {levels.map((level, idx) => (
            <LevelButton 
              key={level.id}
              test={level}
              index={idx}
              unlocked={testUnlockStatus[level.id]}
            />
          ))}
        </div>
      )}
    </div>
  );
})}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

**–í DynamicTest.tsx –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:**

```typescript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ —Ç–µ—Å—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if (loadedTest.prerequisiteTestId) {
  const unlocked = await isTestUnlocked(
    user.uid,
    loadedTest.prerequisiteTestId,
    loadedTest.requiredPercentage ?? 70
  );
  
  if (!unlocked) {
    setError('–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ—Å—Ç');
    return;
  }
}
```

**–í Tests.tsx / AgeTests.tsx:**

```typescript
// –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
useEffect(() => {
  if (user) {
    const unlockStatus: Record<string, boolean> = {};
    for (const test of tests) {
      unlockStatus[test.id] = await isTestUnlocked(
        user.uid,
        test.prerequisiteTestId,
        test.requiredPercentage ?? 70
      );
    }
    setTestUnlockStatus(unlockStatus);
  }
}, [user, tests]);
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ü–µ–ø–æ—á–∫–∏:** 3 —É—Ä–æ–≤–Ω—è (–∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ MAX_CHAIN_LENGTH)
- **–õ–∏–Ω–µ–π–Ω–æ—Å—Ç—å:** –¶–µ–ø–æ—á–∫–∞ –≤—Å–µ–≥–¥–∞ –ª–∏–Ω–µ–π–Ω–∞—è (–Ω–µ—Ç –≤–µ—Ç–≤–ª–µ–Ω–∏—è)
- **–û–¥–∏–Ω prerequisite:** –£ —Ç–µ—Å—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ—Å—Ç
- **–ù–µ—Ç —Ü–∏–∫–ª–æ–≤:** –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ visited Set

---

## –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∏ —Ç–µ–º—ã

### –°–∏—Å—Ç–µ–º–∞ —Ç–µ–º

**–§–∞–π–ª:** `utils/testAppearance.ts` (169 —Å—Ç—Ä–æ–∫)

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ —Ç–µ—Å—Ç–∞ —á–µ—Ä–µ–∑:
1. –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–º—ã (presets)
2. –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ–º—ã

```typescript
interface ThemeSettings {
  presetId: string;              // ID preset'–∞ –∏–∑ THEME_PRESETS
  mainColor: string;             // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç (hex)
  badgeLockedToPrimary: boolean; // –°–≤—è–∑–∞—Ç—å –ª–∏ badge —Å primary —Ü–≤–µ—Ç–æ–º
  overrides?: ThemeOverrides;    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤
}

interface DerivedTheme {
  background: Gradient;  // –ì—Ä–∞–¥–∏–µ–Ω—Ç —Ñ–æ–Ω–∞
  primary: Gradient;     // –û—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞–¥–∏–µ–Ω—Ç (–∏–∫–æ–Ω–∫–∏, –∫–Ω–æ–ø–∫–∏)
  badge: Gradient;       // –ì—Ä–∞–¥–∏–µ–Ω—Ç –±–µ–π–¥–∂–∞
}
```

### –§—É–Ω–∫—Ü–∏—è mergeAppearance()

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –¥–µ—Ñ–æ–ª—Ç–∞–º–∏ –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Ç–µ–º—É.

**–õ–æ–≥–∏–∫–∞:**

```typescript
export function mergeAppearance(appearance?: TestAppearance): TestAppearance {
  // 1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å preset
  const preset = findPresetById(appearance?.theme?.presetId ?? DEFAULT_PRESET);
  
  // 2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å mainColor
  // - –ò–∑ theme.mainColor
  // - –ò–õ–ò –∏–∑ accentGradient (mix –¥–≤—É—Ö —Ü–≤–µ—Ç–æ–≤)
  // - –ò–õ–ò –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ü–≤–µ—Ç preset'–∞
  
  // 3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å badgeLockedToPrimary
  // - –ò–∑ theme.badgeLockedToPrimary
  // - –ò–õ–ò –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–µ—Å–ª–∏ badge != primary —Ü–≤–µ—Ç–∞)
  
  // 4. –°–æ–∑–¥–∞—Ç—å overrides –∏–∑ —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª–µ–π
  // - backgroundGradient ‚Üí overrides.background
  // - accentGradient ‚Üí overrides.primary
  // - badgeGradient ‚Üí overrides.badge
  
  // 5. –í—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Ç–µ–º—É
  const derived = deriveTheme(preset, mainColor, badgeLockedToPrimary, overrides);
  
  // 6. –í–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—ã–π –æ–±—ä–µ–∫—Ç appearance —Å resolvedTheme
  return {
    ...DEFAULT_TEST_APPEARANCE,
    ...appearance,
    theme: { presetId, mainColor, badgeLockedToPrimary, overrides },
    resolvedTheme: derived
  };
}
```

### –§—É–Ω–∫—Ü–∏—è createGradient()

```typescript
export function createGradient(
  from?: string, 
  to?: string, 
  gradient?: Gradient
): string {
  // –ï—Å–ª–∏ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π gradient –æ–±—ä–µ–∫—Ç - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ
  if (gradient) {
    return gradientToCss(gradient);
  }
  
  // –ò–Ω–∞—á–µ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π linear-gradient
  const start = from || '#7c3aed';
  const end = to || start || '#7c3aed';
  return `linear-gradient(135deg, ${start}, ${end})`;
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

**–í TestEditorForm:**
```typescript
// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã
const handleThemeChange = () => {
  const newAppearance = {
    ...appearance,
    theme: {
      presetId: selectedPreset.id,
      mainColor: customColor,
      badgeLockedToPrimary: lockBadge,
      overrides: customGradients
    }
  };
  
  // mergeAppearance –≤—ã—á–∏—Å–ª–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —Ç–µ–º—É
  const merged = mergeAppearance(newAppearance);
  setAppearance(merged);
};
```

**–í DynamicTest / Tests / AgeTests:**
```typescript
const appearance = mergeAppearance(test.appearance);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã
const pageStyle = {
  backgroundImage: createGradient(
    appearance.backgroundGradientFrom,
    appearance.backgroundGradientTo,
    appearance.resolvedTheme?.background
  )
};

const buttonStyle = {
  backgroundImage: createGradient(
    appearance.accentGradientFrom,
    appearance.accentGradientTo,
    appearance.resolvedTheme?.primary
  )
};
```

### –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–º—ã

**–§–∞–π–ª:** `constants/themePresets.ts`

```typescript
export const THEME_PRESETS: ThemePreset[] = [
  {
    id: 'purple-blue',
    name: '–§–∏–æ–ª–µ—Ç–æ–≤–æ-—Å–∏–Ω–∏–π',
    defaultMainColor: '#7c3aed',
    // ... –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤
  },
  {
    id: 'ocean',
    name: '–û–∫–µ–∞–Ω',
    defaultMainColor: '#0ea5e9',
    // ...
  },
  // ... –¥—Ä—É–≥–∏–µ
];
```

---

## –ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç

### –§–∞–π–ª testImportExport.ts (396 —Å—Ç—Ä–æ–∫)

**–§—É–Ω–∫—Ü–∏–∏:**

#### exportTestToJson()
```typescript
export function exportTestToJson(test: Test): string
```
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç Test –≤ JSON
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ (2 –ø—Ä–æ–±–µ–ª–∞)
- –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ: –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –≤–æ–ø—Ä–æ—Å—ã, appearance

#### importTestFromJson()
```typescript
export function importTestFromJson(jsonString: string): Partial<Test>
```
- –ü–∞—Ä—Å–∏—Ç JSON
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ —Ñ–æ—Ä–º—É
- ‚ö†Ô∏è –ù–ï —Å–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç —Å—Ä–∞–∑—É (—Ç–æ–ª—å–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ)

#### generateQuestionsTemplate()
```typescript
export function generateQuestionsTemplate(count: number = 10): string
```
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —à–∞–±–ª–æ–Ω JSON —Å –ø—É—Å—Ç—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –≤ AI

**–ü—Ä–∏–º–µ—Ä —à–∞–±–ª–æ–Ω–∞:**
```json
[
  {
    "questionText": "–í–æ–ø—Ä–æ—Å 1?",
    "answers": [
      { "text": "–í–∞—Ä–∏–∞–Ω—Ç A" },
      { "text": "–í–∞—Ä–∏–∞–Ω—Ç B" },
      { "text": "–í–∞—Ä–∏–∞–Ω—Ç C" },
      { "text": "–í–∞—Ä–∏–∞–Ω—Ç D" }
    ],
    "correctAnswerIndex": 0,
    "shuffleAnswers": true
  },
  // ... –µ—â—ë 9 –≤–æ–ø—Ä–æ—Å–æ–≤
]
```

### Workflow –∏–º–ø–æ—Ä—Ç–∞

1. **–í TestEditorForm:**
   ```typescript
   const handleImport = async (file: File) => {
     const content = await readFileAsText(file);
     const imported = importTestFromJson(content);
     
     // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º—É
     setTitle(imported.title || '');
     setQuestions(imported.questions || []);
     setAppearance(imported.appearance || {});
     // ...
   };
   ```

2. **–ò–º–ø–æ—Ä—Ç —Ç–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤:**
   ```typescript
   const handleImportQuestions = async (file: File) => {
     const content = await readFileAsText(file);
     const parsed = JSON.parse(content);
     
     // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ TestQuestion[]
     const questions = parsed.map(normalizeQuestion);
     setQuestions(questions);
   };
   ```

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
   - –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
   - –î–∞–Ω–Ω—ã–µ –∏–¥—É—Ç –≤ createTest() –∏–ª–∏ updateTest()

### Workflow —ç–∫—Å–ø–æ—Ä—Ç–∞

1. **–≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–≥–æ —Ç–µ—Å—Ç–∞:**
   ```typescript
   const handleExport = () => {
     const json = exportTestToJson(currentTest);
     downloadJson(json, `test-${currentTest.id}.json`);
   };
   ```

2. **–≠–∫—Å–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–∞ –≤–æ–ø—Ä–æ—Å–æ–≤:**
   ```typescript
   const handleExportTemplate = () => {
     const template = generateQuestionsTemplate(20);
     downloadJson(template, 'questions-template.json');
   };
   ```

---

## –ú–µ–¥–∏–∞-—Ñ–∞–π–ª—ã

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã

1. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   - –§–æ—Ä–º–∞—Ç—ã: JPEG, PNG, GIF, WebP
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5 MB
   - –•—Ä–∞–Ω–µ–Ω–∏–µ: Firebase Storage
   - –ü—É—Ç—å: `tests/{testId}/questions/{questionId}/image.{ext}`

2. **–ê—É–¥–∏–æ:**
   - –§–æ—Ä–º–∞—Ç—ã: MP3, WAV, OGG
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10 MB
   - –•—Ä–∞–Ω–µ–Ω–∏–µ: Firebase Storage
   - –ü—É—Ç—å: `tests/{testId}/questions/{questionId}/audio.{ext}`

3. **–í–∏–¥–µ–æ:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞: YouTube, Vimeo (—á–µ—Ä–µ–∑ URL)
   - –•—Ä–∞–Ω–µ–Ω–∏–µ: —Ç–æ–ª—å–∫–æ URL –≤ Firestore
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ embed URL

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

**–í QuestionEditor:**

```typescript
const handleImageUpload = async (file: File) => {
  if (!testId) return;
  
  // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞
  if (file.size > 5 * 1024 * 1024) {
    alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å–∏–º—É–º 5MB)');
    return;
  }
  
  // 2. –°–æ–∑–¥–∞—Ç—å –ø—É—Ç—å –≤ Storage
  const ext = file.name.split('.').pop();
  const path = `tests/${testId}/questions/${question.id}/image.${ext}`;
  
  // 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
  const storageRef = ref(storage, path);
  await uploadBytes(storageRef, file);
  
  // 4. –ü–æ–ª—É—á–∏—Ç—å download URL
  const downloadURL = await getDownloadURL(storageRef);
  
  // 5. –û–±–Ω–æ–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å
  onChange({
    ...question,
    imageUrl: downloadURL
  });
};
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ–¥–∏–∞

**–í DynamicTest / QuestionPreview:**

```typescript
{/* –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */}
{question.imageUrl && (
  <img 
    src={question.imageUrl} 
    alt="–í–æ–ø—Ä–æ—Å"
    className="max-w-full rounded-lg"
  />
)}

{/* –ê—É–¥–∏–æ */}
{question.audioUrl && (
  <audio controls className="w-full">
    <source src={question.audioUrl} />
  </audio>
)}

{/* YouTube –≤–∏–¥–µ–æ */}
{question.videoUrl && (
  <iframe
    src={getYouTubeEmbedUrl(question.videoUrl)}
    className="w-full aspect-video rounded-lg"
    allowFullScreen
  />
)}
```

### –§—É–Ω–∫—Ü–∏—è getYouTubeEmbedUrl()

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `utils/mediaUpload.ts`

```typescript
export function getYouTubeEmbedUrl(url: string): string {
  // –ò–∑–≤–ª–µ—á—å video ID –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:
  // - https://www.youtube.com/watch?v=VIDEO_ID
  // - https://youtu.be/VIDEO_ID
  // - https://www.youtube.com/embed/VIDEO_ID
  
  const patterns = [
    /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&?/]+)/,
  ];
  
  for (const pattern of patterns) {
    const match = url.match(pattern);
    if (match) {
      return `https://www.youtube.com/embed/${match[1]}`;
    }
  }
  
  return url; // –í–µ—Ä–Ω—É—Ç—å –∫–∞–∫ –µ—Å—Ç—å, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞

```typescript
const handleDeleteImage = async () => {
  if (!question.imageUrl) return;
  
  try {
    // 1. –ò–∑–≤–ª–µ—á—å –ø—É—Ç—å –∏–∑ URL
    const pathMatch = question.imageUrl.match(/tests%2F.+?\?/);
    if (pathMatch) {
      const path = decodeURIComponent(pathMatch[0].replace('?', ''));
      const storageRef = ref(storage, path);
      
      // 2. –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª –∏–∑ Storage
      await deleteObject(storageRef);
    }
    
    // 3. –£–¥–∞–ª–∏—Ç—å URL –∏–∑ –≤–æ–ø—Ä–æ—Å–∞
    onChange({
      ...question,
      imageUrl: undefined
    });
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);
  }
};
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–µ–¥–∏–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏:**
1. ‚úÖ –ú–µ–¥–∏–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ Firestore (normalizeQuestion –∏ sanitizeQuestionForWrite –Ω–µ –≤–∫–ª—é—á–∞–ª–∏ –ø–æ–ª—è)
2. ‚úÖ –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–∑ Storage (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ storage.rules)

**–¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ù–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- –ù–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Å–∂–∞—Ç–∏–µ, resize)
- –ù–µ—Ç –ø—Ä–µ–≤—å—é –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
- –ù–µ—Ç batch —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### TestHistory –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/components/TestHistory.tsx` (196 —Å—Ç—Ä–æ–∫)

**–ß—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π —Ç–µ—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (üèÜ)
- –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª (üìà)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (üî¢)
- –°–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –¥–∞—Ç–∞–º–∏

**–ü—Ä–∏–º–µ—Ä:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìä –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üèÜ –õ—É—á—à–∏–π: 95% (19/20)         ‚îÇ
‚îÇ üìà –°—Ä–µ–¥–Ω–∏–π: 82%                ‚îÇ
‚îÇ üî¢ –ü–æ–ø—ã—Ç–æ–∫: 3                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚úÖ 95% (19/20) - 05.11.2025   ‚îÇ
‚îÇ ‚≠ï 85% (17/20) - 04.11.2025   ‚îÇ
‚îÇ ‚≠ï 70% (14/20) - 03.11.2025   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Profile

**–í App.jsx:**
```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –∫ –ø–µ—Ä–∏–æ–¥–∞–º –≤ "–†–∞–±–æ—á–∞—è —Ç–µ—Ç—Ä–∞–¥—å"
if (config.periodId) {
  // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ø–µ—Ä–∏–æ–¥–∞
  const tests = await getPublishedTests();
  const filtered = tests.filter(t => t.rubric === config.periodId);
  
  // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–∫–æ–Ω–∫–∏ —Ç–µ—Å—Ç–æ–≤ —Ä—è–¥–æ–º —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Ç–µ—Ç—Ä–∞–¥—å
  filtered.map(test => (
    <Link to={`/tests/dynamic/${test.id}`} title={test.title}>
      üìñ
    </Link>
  ))
}
```

---

