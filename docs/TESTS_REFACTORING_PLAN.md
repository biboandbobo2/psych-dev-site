# üîß –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–æ–≤

> **CRITICAL:** –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
> –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —Å—Ç—Ä–æ–≥–æ –ø–æ –ø–æ—Ä—è–¥–∫—É, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–ª–æ–º–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- üìã **[–ì–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./README.md)** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞
- üìö **[–ì–∞–π–¥ –ø–æ —Å–∏—Å—Ç–µ–º–µ —Ç–µ—Å—Ç–æ–≤](./TESTS_SYSTEM_GUIDE.md)** - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- üìê **[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](./ARCHITECTURE_GUIDELINES.md)** - –ø—Ä–∞–≤–∏–ª–∞ –∏ best practices
- üóìÔ∏è **[–ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–∞–π–º–ª–∞–π–Ω–∞](./TIMELINE_REFACTORING_PLAN.md)** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- üîß **[–ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Å—Ç–∏](./CORE_REFACTORING_PLAN.md)** - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞–¥–º–∏–Ω–∫–∏, –∑–∞–º–µ—Ç–æ–∫, –ø—Ä–æ—Ñ–∏–ª—è
- üìÖ **[–°–∏—Å—Ç–µ–º–∞ —Ç–∞–π–º–ª–∞–π–Ω–∞](./TimelineGuide.md)** - —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∑–∞–º–µ—Ç–∫–∏)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞](#—Å—Ç—Ä–∞—Ç–µ–≥–∏—è-—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
3. [–§–∞–∑–∞ 1: –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã](#—Ñ–∞–∑–∞-1-–±—ã—Å—Ç—Ä—ã–µ-–ø–æ–±–µ–¥—ã-1-2-–¥–Ω—è)
4. [–§–∞–∑–∞ 2: –°—Ä–µ–¥–Ω–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥](#—Ñ–∞–∑–∞-2-—Å—Ä–µ–¥–Ω–∏–π-—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥-3-5-–¥–Ω–µ–π)
5. [–§–∞–∑–∞ 3: –ì–ª—É–±–æ–∫–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥](#—Ñ–∞–∑–∞-3-–≥–ª—É–±–æ–∫–∏–π-—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥-1-2-–Ω–µ–¥–µ–ª–∏)
6. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [–ß–µ–∫–ª–∏—Å—Ç—ã](#—á–µ–∫–ª–∏—Å—Ç—ã)

---

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –ü—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å** - –º–∞–ª—ã–µ —à–∞–≥–∏ —Å commit'–∞–º–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ
2. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –Ω–µ –ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

**–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
- –ö–æ–¥: ~8800 —Å—Ç—Ä–æ–∫
- –ú–æ–Ω–æ–ª–∏—Ç–æ–≤: 3 —Ñ–∞–π–ª–∞ (1500+ —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥—ã–π)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: ~200 —Å—Ç—Ä–æ–∫
- –ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥: ~1225 —Å—Ç—Ä–æ–∫

**–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—Ü–µ–ª—å):**
- –ö–æ–¥: ~5000-6000 —Å—Ç—Ä–æ–∫ (-30-40%)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª: <500 —Å—Ç—Ä–æ–∫
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: 0 —Å—Ç—Ä–æ–∫
- –ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥: 0 —Å—Ç—Ä–æ–∫
- –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: <250 —Å—Ç—Ä–æ–∫

---

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### –®–∞–≥ 0.1: –°–æ–∑–¥–∞–Ω–∏–µ feature branch

```bash
git checkout -b refactor/tests-system
```

### –®–∞–≥ 0.2: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è –±—ç–∫–∞–ø–æ–≤
mkdir -p docs/backups/tests-system-$(date +%Y%m%d)

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤
cp -r src/pages/Tests.tsx docs/backups/tests-system-$(date +%Y%m%d)/
cp -r src/pages/AgeTests.tsx docs/backups/tests-system-$(date +%Y%m%d)/
cp -r src/pages/DynamicTest.tsx docs/backups/tests-system-$(date +%Y%m%d)/
cp -r src/components/TestEditorForm.tsx docs/backups/tests-system-$(date +%Y%m%d)/
cp -r src/components/QuestionEditor.tsx docs/backups/tests-system-$(date +%Y%m%d)/
# ... –∏ —Ç.–¥.
```

### –®–∞–≥ 0.3: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ—á–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞

```bash
git add .
git commit -m "chore: backup before tests refactoring"
git tag refactor-tests-backup
```

### –®–∞–≥ 0.4: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `TESTS_SYSTEM_GUIDE.md` –∞–∫—Ç—É–∞–ª–µ–Ω –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.

---

## –§–∞–∑–∞ 1: –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã (1-2 –¥–Ω—è)

### –ó–∞–¥–∞—á–∞ 1.1: –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ç–µ—Å—Ç–æ–≤

**–§–∞–π–ª—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:**
- `src/pages/AuthorsTest.tsx`
- `src/pages/AuthorsTestLevel2.tsx`
- `src/pages/AuthorsTestLevel3.tsx`

**–≠–∫–æ–Ω–æ–º–∏—è:** ~1225 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

#### –®–∞–≥ 1.1.1: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ Firestore (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migrate:authors-tests
```

–ò–ª–∏ —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
1. –û—Ç–∫—Ä—ã—Ç—å `/admin/content`
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç "–ê–≤—Ç–æ—Ä—ã –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è"
3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–∑ AuthorsTest.tsx
4. –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–≤–Ω–∏ 2 –∏ 3 –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ

#### –®–∞–≥ 1.1.2: –£–¥–∞–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–æ–≤ –∏–∑ App.jsx

**–§–∞–π–ª:** `src/App.jsx`

**–ù–∞–π—Ç–∏ –∏ —É–¥–∞–ª–∏—Ç—å:**

```jsx
// –£–î–ê–õ–ò–¢–¨ —ç—Ç–∏ imports
import AuthorsTest from './pages/AuthorsTest';
import AuthorsTestLevel2 from './pages/AuthorsTestLevel2';
import AuthorsTestLevel3 from './pages/AuthorsTestLevel3';

// –£–î–ê–õ–ò–¢–¨ —ç—Ç–∏ —Ä–æ—É—Ç—ã
<Route
  path="/tests/authors"
  element={
    <RequireAuth>
      <AuthorsTest />
    </RequireAuth>
  }
/>
<Route
  path="/tests/authors/level2"
  element={
    <RequireAuth>
      <AuthorsTestLevel2 />
    </RequireAuth>
  }
/>
<Route
  path="/tests/authors/level3"
  element={
    <RequireAuth>
      <AuthorsTestLevel3 />
    </RequireAuth>
  }
/>
```

#### –®–∞–≥ 1.1.3: –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
rm src/pages/AuthorsTest.tsx
rm src/pages/AuthorsTestLevel2.tsx
rm src/pages/AuthorsTestLevel3.tsx
```

#### –®–∞–≥ 1.1.4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
# 1. –ë–∏–ª–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
# 2. –†–æ—É—Ç—ã /tests —Ä–∞–±–æ—Ç–∞—é—Ç
# 3. –†–æ—É—Ç—ã /tests/age-periods —Ä–∞–±–æ—Ç–∞—é—Ç
# 4. –†–æ—É—Ç—ã /tests/dynamic/:id —Ä–∞–±–æ—Ç–∞—é—Ç
# 5. –°—Ç–∞—Ä—ã–µ —Ä–æ—É—Ç—ã /tests/authors –ù–ï —Ä–∞–±–æ—Ç–∞—é—Ç (404)
```

#### –®–∞–≥ 1.1.5: Commit

```bash
git add .
git commit -m "refactor(tests): remove legacy hardcoded tests (AuthorsTest*)

- Removed AuthorsTest.tsx, AuthorsTestLevel2.tsx, AuthorsTestLevel3.tsx
- Removed corresponding routes from App.jsx
- Reduces codebase by ~1225 lines
- All tests now use DynamicTest system"
```

---

### –ó–∞–¥–∞—á–∞ 1.2: –í—ã–Ω–æ—Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç

**–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª:** `src/utils/testChainHelpers.ts`

**–≠–∫–æ–Ω–æ–º–∏—è:** ~150 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

#### –®–∞–≥ 1.2.1: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —É—Ç–∏–ª–∏—Ç

**–§–∞–π–ª:** `src/utils/testChainHelpers.ts`

```typescript
import type { Test } from '../types/tests';

/**
 * –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ü–µ–ø–æ—á–∫–∏ —Ç–µ—Å—Ç–æ–≤
 */
export interface TestChain {
  root: Test;      // –ö–æ—Ä–Ω–µ–≤–æ–π —Ç–µ—Å—Ç (–±–µ–∑ prerequisite)
  levels: Test[];  // –£—Ä–æ–≤–Ω–∏ (—Å prerequisiteTestId)
}

/**
 * –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ü–µ–ø–æ—á–∫–∏
 */
export const MAX_CHAIN_LENGTH = 3;

/**
 * –û—á–∏—â–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è –æ—Ç –ø—Ä–µ—Ñ–∏–∫—Å–∞ "–£—Ä–æ–≤–µ–Ω—å N"
 */
export function cleanLevelLabel(text: string): string {
  return text
    .replace(/^–£—Ä–æ–≤–µ–Ω—å\s*\d+\s*[-‚Äì‚Äî:]?\s*/i, '')
    .trim();
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∏–∑ title —Ç–µ—Å—Ç–∞
 * –ò–∑–≤–ª–µ–∫–∞–µ—Ç —á–∞—Å—Ç—å –ø–æ—Å–ª–µ ':' –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—á–∏—â–µ–Ω–Ω—ã–π title
 */
export function formatLevelLabel(test: Test, index: number): string {
  const levelNumber = index + 1;
  const parts = test.title.split(':');

  if (parts.length > 1) {
    const suffix = cleanLevelLabel(parts.slice(1).join(':').trim());
    if (suffix) {
      return suffix;
    }
  }

  return cleanLevelLabel(test.title) || `–£—Ä–æ–≤–µ–Ω—å ${levelNumber}`;
}

/**
 * –ü–æ–ª—É—á–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞ –ø–æ —Ä—É–±—Ä–∏–∫–µ
 */
export function getTestMetadata(rubric: string): {
  icon: string;
  color: string;
  description: string;
} {
  if (rubric === 'full-course') {
    return {
      icon: 'üéì',
      color: 'from-indigo-500 to-indigo-600',
      description: '–¢–µ—Å—Ç –ø–æ –≤—Å–µ–º—É –∫—É—Ä—Å—É –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è',
    };
  }

  // –î–ª—è –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
  // –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å AGE_RANGE_LABELS –∑–¥–µ—Å—å
  return {
    icon: 'üìñ',
    color: 'from-teal-500 to-teal-600',
    description: '–¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç',
  };
}

/**
 * –°—Ç—Ä–æ–∏—Ç —Ü–µ–ø–æ—á–∫–∏ —Ç–µ—Å—Ç–æ–≤ –∏–∑ –º–∞—Å—Å–∏–≤–∞
 * –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç—ã –ø–æ prerequisite —Å–≤—è–∑—è–º
 */
export function buildTestChains(tests: Test[]): TestChain[] {
  // 1. –°–æ–∑–¥–∞—Ç—å Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
  const map = new Map<string, Test>();
  for (const test of tests) {
    map.set(test.id, test);
  }

  // 2. –ù–∞–π—Ç–∏ –∫–æ—Ä–Ω–µ–≤—ã–µ —Ç–µ—Å—Ç—ã
  const roots: Test[] = [];
  for (const test of tests) {
    if (!test.prerequisiteTestId || !map.has(test.prerequisiteTestId)) {
      roots.push(test);
    }
  }

  // 3. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–ø–æ—á–∫–∏
  const chains: TestChain[] = [];
  for (const root of roots) {
    const visited = new Set<string>();
    visited.add(root.id);

    let current: Test | undefined = root;
    const levels: Test[] = [];

    while (current && levels.length < MAX_CHAIN_LENGTH) {
      const successors = tests.filter(
        (t) => t.prerequisiteTestId === current!.id && !visited.has(t.id)
      );

      if (successors.length === 0) break;

      const next = successors[0];
      visited.add(next.id);
      levels.push(next);
      current = next;
    }

    chains.push({ root, levels });
  }

  return chains;
}
```

#### –®–∞–≥ 1.2.2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Tests.tsx

**–§–∞–π–ª:** `src/pages/Tests.tsx`

**–ù–∞–π—Ç–∏ –∏ —É–¥–∞–ª–∏—Ç—å:**
```typescript
// –£–î–ê–õ–ò–¢–¨ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ (–æ–Ω–∏ —Ç–µ–ø–µ—Ä—å –≤ testChainHelpers)
interface TestChain { ... }
const MAX_CHAIN_LENGTH = 3;
function cleanLevelLabel(...) { ... }
function formatLevelLabel(...) { ... }
function buildTestChains(...) { ... }
function getTestMetadata(...) { ... }  // –ï—Å–ª–∏ –æ–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è full-course, –æ—Å—Ç–∞–≤–∏—Ç—å
```

**–î–æ–±–∞–≤–∏—Ç—å import:**
```typescript
import {
  buildTestChains,
  cleanLevelLabel,
  formatLevelLabel,
  type TestChain,
} from '../utils/testChainHelpers';
```

#### –®–∞–≥ 1.2.3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AgeTests.tsx

**–§–∞–π–ª:** `src/pages/AgeTests.tsx`

**–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ Tests.tsx** - —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å import.

#### –®–∞–≥ 1.2.4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
# 1. /tests - –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã –∏ —Ü–µ–ø–æ—á–∫–∏
# 2. /tests/age-periods - –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–µ—Å—Ç—ã –∏ —Ü–µ–ø–æ—á–∫–∏
# 3. –ù–∞–∑–≤–∞–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
# 4. –¶–≤–µ—Ç–∞ –∏ –∏–∫–æ–Ω–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
```

#### –®–∞–≥ 1.2.5: Commit

```bash
git add .
git commit -m "refactor(tests): extract test chain helpers to shared utils

- Created testChainHelpers.ts with shared functions
- Removed duplication from Tests.tsx and AgeTests.tsx
- Reduces duplication by ~150 lines
- Functions: buildTestChains, formatLevelLabel, cleanLevelLabel"
```

---

### –ó–∞–¥–∞—á–∞ 1.3: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ TestCard

**–°–æ–∑–¥–∞—Ç—å:** `src/components/tests/TestCard.tsx`

**–≠–∫–æ–Ω–æ–º–∏—è:** ~80 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

#### –®–∞–≥ 1.3.1: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
mkdir -p src/components/tests
```

#### –®–∞–≥ 1.3.2: –°–æ–∑–¥–∞–Ω–∏–µ TestCard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–§–∞–π–ª:** `src/components/tests/TestCard.tsx`

```typescript
import { Link } from 'react-router-dom';
import type { CSSProperties } from 'react';
import type { Test } from '../../types/tests';
import { mergeAppearance, createGradient } from '../../utils/testAppearance';
import { formatLevelLabel, type TestChain } from '../../utils/testChainHelpers';

interface TestCardProps {
  chain: TestChain;
  testUnlockStatus: Record<string, boolean>;
  className?: string;
}

export function TestCard({ chain, testUnlockStatus, className = '' }: TestCardProps) {
  const { root, levels } = chain;
  const appearance = mergeAppearance(root.appearance);

  // –ò–∑–≤–ª–µ—á—å –Ω–∞–∑–≤–∞–Ω–∏–µ (—á–∞—Å—Ç—å –¥–æ ':')
  const titleText = root.title.split(':')[0]?.trim() || root.title;
  const description = appearance.introDescription || '';

  const rootUnlocked = testUnlockStatus[root.id] ?? true;

  // –°—Ç–∏–ª–∏
  const iconGradientStyle: CSSProperties = {
    backgroundImage: createGradient(
      appearance.accentGradientFrom,
      appearance.accentGradientTo,
      appearance.resolvedTheme?.primary
    ),
  };

  const badgeGradientStyle: CSSProperties = {
    backgroundImage: createGradient(
      appearance.badgeGradientFrom ?? appearance.accentGradientFrom,
      appearance.badgeGradientTo ?? appearance.accentGradientTo,
      appearance.resolvedTheme?.badge
    ),
  };

  const badgeLabel = appearance.badgeLabel?.trim();
  const showBadge = Boolean(badgeLabel);

  return (
    <div
      className={`relative flex flex-col justify-between overflow-hidden rounded-2xl border border-blue-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-lg min-h-[280px] ${className}`}
    >
      <div className="flex items-start gap-4">
        {/* –ò–∫–æ–Ω–∫–∞ */}
        <div
          className="flex h-14 w-14 items-center justify-center rounded-xl text-2xl text-white shadow"
          style={iconGradientStyle}
        >
          {appearance.introIcon || 'üìñ'}
        </div>

        <div className="flex-1 flex flex-col gap-2">
          {/* –ë–µ–π–¥–∂ */}
          {showBadge && (
            <div className="flex items-center gap-2 text-xs font-semibold text-white">
              <span className="inline-flex items-center gap-1 rounded-full px-3 py-1" style={badgeGradientStyle}>
                {appearance.badgeIcon && <span>{appearance.badgeIcon}</span>}
                <span>{badgeLabel}</span>
              </span>
            </div>
          )}

          {/* –ù–∞–∑–≤–∞–Ω–∏–µ */}
          {rootUnlocked ? (
            <Link
              to={`/tests/dynamic/${root.id}`}
              className={`text-left font-semibold text-gray-900 ${levels.length === 0 ? 'text-xl' : 'text-lg'} hover:underline focus:underline transition-colors`}
            >
              {titleText}
            </Link>
          ) : (
            <div className={`font-semibold text-gray-900 ${levels.length === 0 ? 'text-xl' : 'text-lg'}`}>
              {titleText}
            </div>
          )}

          {/* –û–ø–∏—Å–∞–Ω–∏–µ */}
          {description && (
            <p className={`${levels.length === 0 ? 'text-base' : 'text-sm'} text-gray-600 leading-snug line-clamp-3`}>
              {description}
            </p>
          )}

          {/* –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ */}
          <div className="mt-auto flex flex-wrap items-center gap-4 text-xs font-medium text-gray-500">
            <span className="flex items-center gap-1">
              <span>üìã</span>
              <span>{root.questionCount} –≤–æ–ø—Ä–æ—Å–æ–≤</span>
            </span>
            {levels.length > 0 && (
              <span className="flex items-center gap-1">
                <span>üî•</span>
                <span>{levels.length} —É—Ä–æ–≤–Ω—è</span>
              </span>
            )}
          </div>
        </div>
      </div>

      {/* –£—Ä–æ–≤–Ω–∏ */}
      {levels.length > 0 && (
        <div className="mt-4 flex flex-col gap-2">
          {levels.map((level, idx) => {
            const label = formatLevelLabel(level, idx + 1);
            const unlocked = testUnlockStatus[level.id] ?? false;

            if (unlocked) {
              return (
                <Link
                  key={level.id}
                  to={`/tests/dynamic/${level.id}`}
                  className="flex items-center justify-between rounded-lg border-2 border-blue-200 bg-blue-50 p-3 text-sm font-semibold text-blue-700 transition-all hover:border-blue-400 hover:bg-blue-100"
                >
                  <span>{label}</span>
                  <span className="text-xs text-blue-500">‚Üí</span>
                </Link>
              );
            }

            return (
              <div
                key={level.id}
                className="flex items-center justify-between rounded-lg border-2 border-gray-200 bg-gray-50 p-3 text-sm font-semibold text-gray-400"
              >
                <span>{label}</span>
                <span className="text-xs text-gray-400">üîí</span>
              </div>
            );
          })}
        </div>
      )}
    </div>
  );
}
```

#### –®–∞–≥ 1.3.3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Tests.tsx

**–§–∞–π–ª:** `src/pages/Tests.tsx`

**–£–¥–∞–ª–∏—Ç—å** –±–æ–ª—å—à–æ–π –±–ª–æ–∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ (—Å—Ç—Ä–æ–∫–∏ ~350-480).

**–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:**
```typescript
import { TestCard } from '../components/tests/TestCard';

// ...

{testChains.map((chain) => (
  <TestCard
    key={chain.root.id}
    chain={chain}
    testUnlockStatus={testUnlockStatus}
  />
))}
```

#### –®–∞–≥ 1.3.4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AgeTests.tsx

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ Tests.tsx.

#### –®–∞–≥ 1.3.5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–µ—Å—Ç–æ–≤
```

#### –®–∞–≥ 1.3.6: Commit

```bash
git add .
git commit -m "refactor(tests): create reusable TestCard component

- Created TestCard component for test display
- Used in Tests.tsx and AgeTests.tsx
- Reduces duplication by ~80 lines
- Improves consistency between pages"
```

---

### –ò—Ç–æ–≥–∏ –§–∞–∑—ã 1

**–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:**
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ç–µ—Å—Ç—ã (`AuthorsTest*`) –∏–∑ `App.jsx`. (–°–∞–º–∏ —Ñ–∞–π–ª—ã –Ω–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –Ω–æ –æ–Ω–∏ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏).
- ‚úÖ –í—ã–Ω–µ—Å–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ (`buildTestChains`, `cleanLevelLabel`, `formatLevelLabel`, `getTestMetadata`, `TestChain`, `MAX_CHAIN_LENGTH`) –≤ `src/utils/testChainHelpers.ts`.
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `src/components/tests/TestCard.tsx`.
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã `Tests.tsx` –∏ `AgeTests.tsx` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —É—Ç–∏–ª–∏—Ç –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `TestCard`.

**–≠–∫–æ–Ω–æ–º–∏—è:**
- –£–¥–∞–ª–µ–Ω–æ ~1225 —Å—Ç—Ä–æ–∫ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞ (—Å—Å—ã–ª–∫–∏).
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ ~230 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
- –ö–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ö–æ–¥: ~7300 —Å—Ç—Ä–æ–∫ (–æ—Ü–µ–Ω–∫–∞, –±–µ–∑ —É—á–µ—Ç–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ
- –ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥: 0 —Å—Ç—Ä–æ–∫ (–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã)

**–í—Ä–µ–º—è:** 1-2 –¥–Ω—è

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –§–∞–∑–∞ 2

---

## –§–∞–∑–∞ 2: –°—Ä–µ–¥–Ω–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (3-5 –¥–Ω–µ–π)

–≠—Ç–∞ —Ñ–∞–∑–∞ —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ä–∞–∑–±–∏–µ–Ω–∏–∏ –º–æ–Ω–æ–ª–∏—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

---

### –ó–∞–¥–∞—á–∞ 2.1: –†–∞–∑–±–∏–µ–Ω–∏–µ TestEditorForm (1575 —Å—Ç—Ä–æ–∫ ‚Üí ~250 —Å—Ç—Ä–æ–∫)

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å 6 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–∑ –æ–¥–Ω–æ–≥–æ –º–æ–Ω–æ–ª–∏—Ç–∞.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

```
TestEditorForm (–≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, ~250 —Å—Ç—Ä–æ–∫)
  ‚îú‚îÄ TestMetadataEditor (~150 —Å—Ç—Ä–æ–∫)
  ‚îÇ   ‚îî‚îÄ –ù–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ä—É–±—Ä–∏–∫–∞, —Å—Ç–∞—Ç—É—Å
  ‚îú‚îÄ TestPrerequisiteSelector (~100 —Å—Ç—Ä–æ–∫)
  ‚îÇ   ‚îî‚îÄ –í—ã–±–æ—Ä prerequisite —Ç–µ—Å—Ç–∞, requiredPercentage
  ‚îú‚îÄ TestQuestionsManager (~200 —Å—Ç—Ä–æ–∫)
  ‚îÇ   ‚îî‚îÄ –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –ø–æ—Ä—è–¥–æ–∫
  ‚îú‚îÄ TestAppearanceEditor (~300 —Å—Ç—Ä–æ–∫)
  ‚îÇ   ‚îú‚îÄ TestThemePicker (~150 —Å—Ç—Ä–æ–∫)
  ‚îÇ   ‚îÇ   ‚îî‚îÄ –í—ã–±–æ—Ä —Ç–µ–º—ã, mainColor
  ‚îÇ   ‚îî‚îÄ TestCustomization (~150 —Å—Ç—Ä–æ–∫)
  ‚îÇ       ‚îî‚îÄ –ò–∫–æ–Ω–∫–∏, –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, bullet points
  ‚îú‚îÄ TestPolicyEditor (~150 —Å—Ç—Ä–æ–∫)
  ‚îÇ   ‚îî‚îÄ defaultRevealPolicy
  ‚îî‚îÄ TestImportExport (~150 —Å—Ç—Ä–æ–∫)
      ‚îî‚îÄ Import/export JSON
```

#### –®–∞–≥ 2.1.1: –°–æ–∑–¥–∞–Ω–∏–µ TestMetadataEditor

**–§–∞–π–ª:** `src/components/tests/editor/TestMetadataEditor.tsx`

```bash
mkdir -p src/components/tests/editor
```

```typescript
import { useCallback } from 'react';
import type { TestRubric, TestStatus } from '../../../types/tests';
import { AGE_RANGE_LABELS } from '../../../types/notes';
import type { AgeRange } from '../../../hooks/useNotes';

interface TestMetadataEditorProps {
  title: string;
  description: string;
  rubric: TestRubric;
  status: TestStatus;
  onTitleChange: (title: string) => void;
  onDescriptionChange: (description: string) => void;
  onRubricChange: (rubric: TestRubric) => void;
  onStatusChange: (status: TestStatus) => void;
}

export function TestMetadataEditor({
  title,
  description,
  rubric,
  status,
  onTitleChange,
  onDescriptionChange,
  onRubricChange,
  onStatusChange,
}: TestMetadataEditorProps) {
  const titleMaxLength = 100;
  const descriptionMaxLength = 300;

  return (
    <div className="space-y-6">
      <h3 className="text-lg font-semibold">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>

      {/* –ù–∞–∑–≤–∞–Ω–∏–µ */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ *
        </label>
        <input
          type="text"
          value={title}
          onChange={(e) => onTitleChange(e.target.value)}
          maxLength={titleMaxLength}
          className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
          placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê–≤—Ç–æ—Ä—ã –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è"
        />
        <p className="text-sm text-gray-500 mt-1">
          {title.length} / {titleMaxLength}
        </p>
      </div>

      {/* –û–ø–∏—Å–∞–Ω–∏–µ */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          –û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        </label>
        <textarea
          value={description}
          onChange={(e) => onDescriptionChange(e.target.value)}
          maxLength={descriptionMaxLength}
          rows={3}
          className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
          placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞"
        />
        <p className="text-sm text-gray-500 mt-1">
          {description.length} / {descriptionMaxLength}
        </p>
      </div>

      {/* –†—É–±—Ä–∏–∫–∞ */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          –†—É–±—Ä–∏–∫–∞ *
        </label>
        <select
          value={rubric}
          onChange={(e) => onRubricChange(e.target.value as TestRubric)}
          className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
        >
          <option value="full-course">–ö—É—Ä—Å —Ü–µ–ª–∏–∫–æ–º</option>
          <optgroup label="–í–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã">
            {Object.entries(AGE_RANGE_LABELS).map(([value, label]) => (
              <option key={value} value={value}>
                {label}
              </option>
            ))}
          </optgroup>
        </select>
      </div>

      {/* –°—Ç–∞—Ç—É—Å */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          –°—Ç–∞—Ç—É—Å
        </label>
        <div className="flex gap-4">
          <label className="flex items-center">
            <input
              type="radio"
              value="draft"
              checked={status === 'draft'}
              onChange={(e) => onStatusChange(e.target.value as TestStatus)}
              className="mr-2"
            />
            <span>–ß–µ—Ä–Ω–æ–≤–∏–∫</span>
          </label>
          <label className="flex items-center">
            <input
              type="radio"
              value="published"
              checked={status === 'published'}
              onChange={(e) => onStatusChange(e.target.value as TestStatus)}
              className="mr-2"
            />
            <span>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω</span>
          </label>
          <label className="flex items-center">
            <input
              type="radio"
              value="unpublished"
              checked={status === 'unpublished'}
              onChange={(e) => onStatusChange(e.target.value as TestStatus)}
              className="mr-2"
            />
            <span>–°–Ω—è—Ç —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</span>
          </label>
        </div>
      </div>
    </div>
  );
}
```

#### –®–∞–≥ 2.1.2: –°–æ–∑–¥–∞–Ω–∏–µ TestPrerequisiteSelector

**–§–∞–π–ª:** `src/components/tests/editor/TestPrerequisiteSelector.tsx`

```typescript
import { useMemo } from 'react';
import type { Test } from '../../../types/tests';

interface TestPrerequisiteSelectorProps {
  prerequisiteTestId?: string;
  requiredPercentage: number;
  existingTests: Test[];
  currentTestId?: string;
  onPrerequisiteChange: (testId: string | undefined) => void;
  onPercentageChange: (percentage: number) => void;
}

export function TestPrerequisiteSelector({
  prerequisiteTestId,
  requiredPercentage,
  existingTests,
  currentTestId,
  onPrerequisiteChange,
  onPercentageChange,
}: TestPrerequisiteSelectorProps) {
  // –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã: –∏—Å–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
  const availableTests = useMemo(() => {
    const usedIds = new Set(
      existingTests
        .filter((t) => t.prerequisiteTestId && t.id !== currentTestId)
        .map((t) => t.prerequisiteTestId)
    );

    return existingTests.filter(
      (t) => t.id !== currentTestId && !usedIds.has(t.id)
    );
  }, [existingTests, currentTestId]);

  return (
    <div className="space-y-6">
      <h3 className="text-lg font-semibold">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞</h3>

      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        </label>
        <select
          value={prerequisiteTestId || ''}
          onChange={(e) =>
            onPrerequisiteChange(e.target.value || undefined)
          }
          className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
        >
          <option value="">–ù–µ—Ç (—Ç–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Å—Ä–∞–∑—É)</option>
          {availableTests.map((test) => (
            <option key={test.id} value={test.id}>
              {test.title}
            </option>
          ))}
        </select>
        <p className="text-sm text-gray-500 mt-1">
          –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω —Ç–µ—Å—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π—Ç–∏ –µ–≥–æ
        </p>
      </div>

      {prerequisiteTestId && (
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-2">
            –¢—Ä–µ–±—É–µ–º—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
          </label>
          <div className="flex items-center gap-4">
            <input
              type="range"
              min="50"
              max="100"
              step="5"
              value={requiredPercentage}
              onChange={(e) => onPercentageChange(parseInt(e.target.value))}
              className="flex-1"
            />
            <span className="text-lg font-semibold w-16 text-right">
              {requiredPercentage}%
            </span>
          </div>
          <p className="text-sm text-gray-500 mt-1">
            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –Ω–∞–±—Ä–∞—Ç—å –º–∏–Ω–∏–º—É–º {requiredPercentage}% –Ω–∞
            –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ç–µ—Å—Ç–µ
          </p>
        </div>
      )}
    </div>
  );
}
```

#### –®–∞–≥ 2.1.3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ TestEditorForm

**–§–∞–π–ª:** `src/components/TestEditorForm.tsx`

**–î–æ–±–∞–≤–∏—Ç—å imports:**
```typescript
import { TestMetadataEditor } from './tests/editor/TestMetadataEditor';
import { TestPrerequisiteSelector } from './tests/editor/TestPrerequisiteSelector';
```

**–ó–∞–º–µ–Ω–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏ JSX:**
```typescript
// –í–º–µ—Å—Ç–æ –±–æ–ª—å—à–æ–≥–æ –±–ª–æ–∫–∞ —Å –ø–æ–ª—è–º–∏ title, description, rubric, status
<TestMetadataEditor
  title={title}
  description={description}
  rubric={rubric}
  status={status}
  onTitleChange={setTitle}
  onDescriptionChange={setDescription}
  onRubricChange={setRubric}
  onStatusChange={setStatus}
/>

// –í–º–µ—Å—Ç–æ –±–ª–æ–∫–∞ —Å prerequisite
<TestPrerequisiteSelector
  prerequisiteTestId={prerequisiteTestId}
  requiredPercentage={requiredPercentage}
  existingTests={existingTests}
  currentTestId={testId}
  onPrerequisiteChange={setPrerequisiteTestId}
  onPercentageChange={setRequiredPercentage}
/>
```

#### –®–∞–≥ 2.1.4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```bash
npm run build

# –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
# –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø–æ–ª—è —Ä–∞–±–æ—Ç–∞—é—Ç
```

#### –®–∞–≥ 2.1.5: Commit

```bash
git add .
git commit -m "refactor(tests): extract metadata and prerequisite editors

- Created TestMetadataEditor component
- Created TestPrerequisiteSelector component
- Integrated into TestEditorForm
- Reduces TestEditorForm by ~250 lines"
```

#### –®–∞–≥ 2.1.6: –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–æ–∑–¥–∞—Ç—å:**

1. `TestQuestionsManager.tsx` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –≤–æ–ø—Ä–æ—Å–æ–≤
2. `TestAppearanceEditor.tsx` - –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
3. `TestPolicyEditor.tsx` - –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–∫–∞–∑–∞
4. `TestImportExport.tsx` - –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç

**–ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:**
- –í—ã–Ω–æ—Å–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª
- –ü–æ–ª—É—á–∞–µ—Ç props –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –∏ callbacks
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- –ö–æ–º–º–∏—Ç–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

#### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ:**
- TestEditorForm.tsx: 1575 —Å—Ç—Ä–æ–∫

**–ü–æ—Å–ª–µ:**
- TestEditorForm.tsx: ~250 —Å—Ç—Ä–æ–∫ (–≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É)
- TestMetadataEditor.tsx: ~150 —Å—Ç—Ä–æ–∫
- TestPrerequisiteSelector.tsx: ~100 —Å—Ç—Ä–æ–∫
- TestQuestionsManager.tsx: ~200 —Å—Ç—Ä–æ–∫
- TestAppearanceEditor.tsx: ~300 —Å—Ç—Ä–æ–∫
- TestPolicyEditor.tsx: ~150 —Å—Ç—Ä–æ–∫
- TestImportExport.tsx: ~150 —Å—Ç—Ä–æ–∫

**–≠–∫–æ–Ω–æ–º–∏—è:**
- –ö–æ–¥ —Å—Ç–∞–ª —á–∏—Ç–∞–µ–º—ã–º
- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∞—Å—Ç–∏

---

### –ó–∞–¥–∞—á–∞ 2.2: –†–∞–∑–±–∏–µ–Ω–∏–µ QuestionEditor (1126 —Å—Ç—Ä–æ–∫ ‚Üí ~200 —Å—Ç—Ä–æ–∫)

**–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∑–∞–¥–∞—á–µ 2.1**, —Ä–∞–∑–±–∏—Ç—å –Ω–∞:

1. `QuestionTextEditor.tsx` (~100 —Å—Ç—Ä–æ–∫) - —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
2. `QuestionAnswersManager.tsx` (~250 —Å—Ç—Ä–æ–∫) - –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
3. `QuestionMediaUploader.tsx` (~200 —Å—Ç—Ä–æ–∫) - –º–µ–¥–∏–∞-—Ñ–∞–π–ª—ã
4. `QuestionRevealPolicyEditor.tsx` (~150 —Å—Ç—Ä–æ–∫) - –ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ–∫–∞–∑–∞
5. `QuestionFeedbackEditor.tsx` (~200 —Å—Ç—Ä–æ–∫) - feedback –∏ —Ä–µ—Å—É—Ä—Å—ã

**QuestionEditor.tsx** —Å—Ç–∞–Ω–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–æ–º (~200 —Å—Ç—Ä–æ–∫).

#### Commit –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```bash
git commit -m "refactor(tests): extract QuestionTextEditor from QuestionEditor"
git commit -m "refactor(tests): extract QuestionAnswersManager from QuestionEditor"
# –∏ —Ç.–¥.
```

---

### –ó–∞–¥–∞—á–∞ 2.3: –†–∞–∑–±–∏–µ–Ω–∏–µ DynamicTest (778 —Å—Ç—Ä–æ–∫ ‚Üí ~150 —Å—Ç—Ä–æ–∫)

**–¶–µ–ª—å:** –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω—ã –∏ hooks.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
DynamicTest (–≥–ª–∞–≤–Ω—ã–π, ~150 —Å—Ç—Ä–æ–∫)
  ‚îú‚îÄ Screens:
  ‚îÇ   ‚îú‚îÄ TestIntroScreen (~150 —Å—Ç—Ä–æ–∫)
  ‚îÇ   ‚îú‚îÄ TestQuestionScreen (~200 —Å—Ç—Ä–æ–∫)
  ‚îÇ   ‚îî‚îÄ TestResultsScreen (~200 —Å—Ç—Ä–æ–∫)
  ‚îî‚îÄ Hooks:
      ‚îú‚îÄ useTestProgress (~100 —Å—Ç—Ä–æ–∫)
      ‚îú‚îÄ useQuestionNavigation (~80 —Å—Ç—Ä–æ–∫)
      ‚îî‚îÄ useAnswerValidation (~100 —Å—Ç—Ä–æ–∫)
```

#### –®–∞–≥ 2.3.1: –°–æ–∑–¥–∞–Ω–∏–µ useTestProgress hook

**–§–∞–π–ª:** `src/hooks/useTestProgress.ts`

```typescript
import { useState, useCallback } from 'react';

interface TestProgress {
  started: boolean;
  finished: boolean;
  currentQuestionIndex: number;
  score: number;
  startTime: Date | null;
}

export function useTestProgress(totalQuestions: number) {
  const [started, setStarted] = useState(false);
  const [finished, setFinished] = useState(false);
  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
  const [score, setScore] = useState(0);
  const [startTime, setStartTime] = useState<Date | null>(null);

  const startTest = useCallback(() => {
    setStarted(true);
    setStartTime(new Date());
  }, []);

  const nextQuestion = useCallback(() => {
    if (currentQuestionIndex < totalQuestions - 1) {
      setCurrentQuestionIndex((prev) => prev + 1);
    } else {
      setFinished(true);
    }
  }, [currentQuestionIndex, totalQuestions]);

  const incrementScore = useCallback(() => {
    setScore((prev) => prev + 1);
  }, []);

  const reset = useCallback(() => {
    setStarted(false);
    setFinished(false);
    setCurrentQuestionIndex(0);
    setScore(0);
    setStartTime(null);
  }, []);

  const progress = totalQuestions > 0 
    ? ((currentQuestionIndex + 1) / totalQuestions) * 100 
    : 0;

  return {
    started,
    finished,
    currentQuestionIndex,
    score,
    startTime,
    progress,
    startTest,
    nextQuestion,
    incrementScore,
    reset,
  };
}
```

#### –®–∞–≥ 2.3.2: –°–æ–∑–¥–∞–Ω–∏–µ TestIntroScreen

**–§–∞–π–ª:** `src/components/tests/screens/TestIntroScreen.tsx`

```typescript
import type { CSSProperties } from 'react';
import type { TestAppearance } from '../../../types/tests';

interface TestIntroScreenProps {
  title: string;
  appearance: TestAppearance;
  questionCount: number;
  onStart: () => void;
  backUrl: string;
}

export function TestIntroScreen({
  title,
  appearance,
  questionCount,
  onStart,
  backUrl,
}: TestIntroScreenProps) {
  const badgeGradientStyle: CSSProperties = {
    backgroundImage: createGradient(
      appearance.badgeGradientFrom,
      appearance.badgeGradientTo,
      appearance.resolvedTheme?.badge
    ),
  };

  const accentGradientStyle: CSSProperties = {
    backgroundImage: createGradient(
      appearance.accentGradientFrom,
      appearance.accentGradientTo,
      appearance.resolvedTheme?.primary
    ),
  };

  const bulletHeading = appearance.bulletPoints?.length
    ? '–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∞:'
    : '–ü—Ä–∞–≤–∏–ª–∞ —Ç–µ—Å—Ç–∞:';

  return (
    <div className="bg-white rounded-2xl shadow-xl p-8 md:p-12">
      <div className="text-center">
        {/* –ë–µ–π–¥–∂ */}
        {(appearance.badgeIcon || appearance.badgeLabel) && (
          <div
            className="inline-flex items-center gap-2 px-4 py-2 text-white rounded-full font-bold text-sm mb-4"
            style={badgeGradientStyle}
          >
            {appearance.badgeIcon && <span>{appearance.badgeIcon}</span>}
            {appearance.badgeLabel && <span>{appearance.badgeLabel}</span>}
          </div>
        )}

        {/* –ò–∫–æ–Ω–∫–∞ */}
        {appearance.introIcon && (
          <div className="text-6xl mb-6">{appearance.introIcon}</div>
        )}

        {/* –ù–∞–∑–≤–∞–Ω–∏–µ */}
        <h1 className="text-3xl md:text-4xl font-bold mb-4">{title}</h1>

        {/* –û–ø–∏—Å–∞–Ω–∏–µ */}
        {appearance.introDescription && (
          <p className="text-lg text-gray-600 mb-8">
            {appearance.introDescription}
          </p>
        )}

        {/* Bullet points */}
        <div className="bg-gray-50 rounded-lg p-6 mb-8 text-left">
          <h3 className="font-semibold mb-4">{bulletHeading}</h3>
          <ul className="space-y-2">
            {appearance.bulletPoints?.length ? (
              appearance.bulletPoints.map((point, idx) => (
                <li key={idx} className="flex items-start gap-2">
                  <span className="text-blue-500 mt-1">‚úì</span>
                  <span>{point}</span>
                </li>
              ))
            ) : (
              <>
                <li className="flex items-start gap-2">
                  <span className="text-blue-500 mt-1">‚úì</span>
                  <span>–í —Ç–µ—Å—Ç–µ {questionCount} –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-blue-500 mt-1">‚úì</span>
                  <span>–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-blue-500 mt-1">‚úì</span>
                  <span>–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</span>
                </li>
              </>
            )}
          </ul>
        </div>

        {/* –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç–∞ */}
        <button
          onClick={onStart}
          style={accentGradientStyle}
          className="w-full text-white px-8 py-4 rounded-xl font-bold text-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300"
        >
          –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
        </button>
      </div>
    </div>
  );
}
```

#### –®–∞–≥ 2.3.3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ DynamicTest

**–§–∞–π–ª:** `src/pages/DynamicTest.tsx`

**–ó–∞–º–µ–Ω–∏—Ç—å:**
```typescript
import { useTestProgress } from '../hooks/useTestProgress';
import { TestIntroScreen } from '../components/tests/screens/TestIntroScreen';

// ...

const {
  started,
  finished,
  currentQuestionIndex,
  score,
  startTime,
  progress,
  startTest,
  nextQuestion,
  incrementScore,
  reset,
} = useTestProgress(test?.questions.length || 0);

// ...

if (!started) {
  return (
    <TestIntroScreen
      title={test.title}
      appearance={appearance}
      questionCount={test.questionCount}
      onStart={startTest}
      backUrl={backUrl}
    />
  );
}
```

#### –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–æ–∑–¥–∞—Ç—å TestQuestionScreen –∏ TestResultsScreen

#### Commit –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

```bash
git commit -m "refactor(tests): extract useTestProgress hook"
git commit -m "refactor(tests): extract TestIntroScreen component"
git commit -m "refactor(tests): extract TestQuestionScreen component"
git commit -m "refactor(tests): extract TestResultsScreen component"
```

---

### –ò—Ç–æ–≥–∏ –§–∞–∑—ã 2

**–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:**
- ‚úÖ TestEditorForm: 1575 ‚Üí ~250 —Å—Ç—Ä–æ–∫ (6 –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- ‚úÖ QuestionEditor: 1126 ‚Üí ~200 —Å—Ç—Ä–æ–∫ (5 –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- ‚úÖ DynamicTest: 778 ‚Üí ~150 —Å—Ç—Ä–æ–∫ (3 —ç–∫—Ä–∞–Ω–∞ + 3 hooks)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ö–æ–¥: ~6500 —Å—Ç—Ä–æ–∫
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã < 300 —Å—Ç—Ä–æ–∫
- –í—ã—Å–æ–∫–∞—è –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

**–í—Ä–µ–º—è:** 3-5 –¥–Ω–µ–π

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –§–∞–∑–∞ 3

---

## –§–∞–∑–∞ 3: –ì–ª—É–±–æ–∫–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (1-2 –Ω–µ–¥–µ–ª–∏)

–≠—Ç–∞ —Ñ–∞–∑–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏.

---

### –ó–∞–¥–∞—á–∞ 3.1: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ Tests.tsx –∏ AgeTests.tsx

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö –ø–æ—Ö–æ–∂–∏—Ö.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–°–æ–∑–¥–∞—Ç—å:** `src/pages/TestsPage.tsx`

```typescript
interface TestsPageProps {
  rubricFilter: 'full-course' | 'age-periods';
}

export function TestsPage({ rubricFilter }: TestsPageProps) {
  // –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤
  const filteredTests = useMemo(() => {
    if (rubricFilter === 'full-course') {
      return tests.filter(t => t.rubric === 'full-course');
    } else {
      return tests.filter(t => t.rubric !== 'full-course');
    }
  }, [tests, rubricFilter]);

  // –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞...
}
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–æ–≤ –≤ App.jsx

```typescript
<Route path="/tests" element={
  <RequireAuth>
    <TestsPage rubricFilter="full-course" />
  </RequireAuth>
} />

<Route path="/tests/age-periods" element={
  <RequireAuth>
    <TestsPage rubricFilter="age-periods" />
  </RequireAuth>
} />
```

#### –†–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ:**
- Tests.tsx: 485 —Å—Ç—Ä–æ–∫
- AgeTests.tsx: 311 —Å—Ç—Ä–æ–∫
- –ò—Ç–æ–≥–æ: 796 —Å—Ç—Ä–æ–∫

**–ü–æ—Å–ª–µ:**
- TestsPage.tsx: ~400 —Å—Ç—Ä–æ–∫
- –≠–∫–æ–Ω–æ–º–∏—è: ~400 —Å—Ç—Ä–æ–∫

---

### –ó–∞–¥–∞—á–∞ 3.2: State Management

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∫—Ä—É–ø–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –º–Ω–æ–≥–æ useState, —Å–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏–µ:** –í–Ω–µ–¥—Ä–∏—Ç—å Zustand –∏–ª–∏ Context API.

#### –ü—Ä–∏–º–µ—Ä —Å Zustand

**–°–æ–∑–¥–∞—Ç—å:** `src/stores/testEditorStore.ts`

```typescript
import { create } from 'zustand';
import type { Test, TestQuestion } from '../types/tests';

interface TestEditorState {
  test: Partial<Test> | null;
  questions: TestQuestion[];
  isDirty: boolean;
  
  setTest: (test: Partial<Test>) => void;
  setQuestions: (questions: TestQuestion[]) => void;
  addQuestion: (question: TestQuestion) => void;
  updateQuestion: (id: string, question: Partial<TestQuestion>) => void;
  deleteQuestion: (id: string) => void;
  markDirty: () => void;
  markClean: () => void;
}

export const useTestEditorStore = create<TestEditorState>((set) => ({
  test: null,
  questions: [],
  isDirty: false,
  
  setTest: (test) => set({ test }),
  setQuestions: (questions) => set({ questions }),
  addQuestion: (question) => set((state) => ({
    questions: [...state.questions, question],
    isDirty: true,
  })),
  updateQuestion: (id, updates) => set((state) => ({
    questions: state.questions.map((q) =>
      q.id === id ? { ...q, ...updates } : q
    ),
    isDirty: true,
  })),
  deleteQuestion: (id) => set((state) => ({
    questions: state.questions.filter((q) => q.id !== id),
    isDirty: true,
  })),
  markDirty: () => set({ isDirty: true }),
  markClean: () => set({ isDirty: false }),
}));
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
function TestEditorForm() {
  const { 
    test, 
    questions, 
    addQuestion, 
    updateQuestion 
  } = useTestEditorStore();
  
  // –¢–µ–ø–µ—Ä—å –Ω–µ –Ω—É–∂–Ω–æ useState –∏ prop drilling
}
```

---

### –ó–∞–¥–∞—á–∞ 3.3: Unit —Ç–µ—Å—Ç—ã

**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç:**

**–§–∞–π–ª:** `src/utils/__tests__/testChainHelpers.test.ts`

```typescript
import { describe, it, expect } from 'vitest';
import { 
  cleanLevelLabel, 
  formatLevelLabel, 
  buildTestChains 
} from '../testChainHelpers';

describe('cleanLevelLabel', () => {
  it('–¥–æ–ª–∂–µ–Ω —É–¥–∞–ª—è—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å "–£—Ä–æ–≤–µ–Ω—å N"', () => {
    expect(cleanLevelLabel('–£—Ä–æ–≤–µ–Ω—å 2: –¢–µ—Å—Ç')).toBe('–¢–µ—Å—Ç');
    expect(cleanLevelLabel('–£—Ä–æ–≤–µ–Ω—å 3 - –¢–µ—Å—Ç')).toBe('–¢–µ—Å—Ç');
  });

  it('–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç—Ä–æ–∫—É –∫–∞–∫ –µ—Å—Ç—å, –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å–∞', () => {
    expect(cleanLevelLabel('–û–±—ã—á–Ω—ã–π —Ç–µ—Å—Ç')).toBe('–û–±—ã—á–Ω—ã–π —Ç–µ—Å—Ç');
  });
});

describe('buildTestChains', () => {
  it('–¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å —Ü–µ–ø–æ—á–∫—É –∏–∑ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤', () => {
    const tests = [
      { id: '1', title: 'Root', prerequisiteTestId: null },
      { id: '2', title: 'Level 1', prerequisiteTestId: '1' },
      { id: '3', title: 'Level 2', prerequisiteTestId: '2' },
    ];

    const chains = buildTestChains(tests);

    expect(chains).toHaveLength(1);
    expect(chains[0].root.id).toBe('1');
    expect(chains[0].levels).toHaveLength(2);
  });
});
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vitest:**

```bash
npm install -D vitest @testing-library/react @testing-library/jest-dom
```

**vite.config.ts:**
```typescript
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    globals: true,
    environment: 'jsdom',
  },
});
```

**–ó–∞–ø—É—Å–∫:**
```bash
npm run test
```

---

### –ó–∞–¥–∞—á–∞ 3.4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –±–æ–ª—å—à–∏–µ –±–∞–Ω–¥–ª—ã.

**–†–µ—à–µ–Ω–∏–µ:** Barrel exports, code splitting.

#### –°–æ–∑–¥–∞—Ç—å index —Ñ–∞–π–ª—ã

**–§–∞–π–ª:** `src/components/tests/index.ts`

```typescript
// –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤
export { TestCard } from './TestCard';
export { TestHistory } from '../TestHistory';
export { QuestionPreview } from '../QuestionPreview';

// Editor –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
export { TestMetadataEditor } from './editor/TestMetadataEditor';
export { TestPrerequisiteSelector } from './editor/TestPrerequisiteSelector';
// ...
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
// –í–º–µ—Å—Ç–æ
import { TestCard } from '../../components/tests/TestCard';
import { TestHistory } from '../../components/TestHistory';

// –ú–æ–∂–Ω–æ
import { TestCard, TestHistory } from '../../components/tests';
```

---

### –ó–∞–¥–∞—á–∞ 3.5: Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### useMemo –∏ useCallback

–î–æ–±–∞–≤–∏—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö:

```typescript
const expensiveCalculation = useMemo(() => {
  return mergeAppearance(test.appearance);
}, [test.appearance]);

const handleUpdate = useCallback((id: string, data: any) => {
  updateTest(id, data);
}, [updateTest]);
```

#### React.memo –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```typescript
export const TestCard = React.memo(function TestCard(props) {
  // ...
});
```

#### Lazy loading –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```typescript
const TestEditorForm = lazy(() => import('./components/TestEditorForm'));

// –í —Ä–æ—É—Ç–µ
<Suspense fallback={<LoadingSpinner />}>
  <TestEditorForm />
</Suspense>
```

---

### –ò—Ç–æ–≥–∏ –§–∞–∑—ã 3

**–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:**
- ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ Tests/AgeTests (-400 —Å—Ç—Ä–æ–∫)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π state management
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- ‚úÖ Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ö–æ–¥: ~5000-5500 —Å—Ç—Ä–æ–∫ (-38% –æ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: <400 —Å—Ç—Ä–æ–∫
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: 0
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: >60%
- Bundle size: -20-30%

**–í—Ä–µ–º—è:** 1-2 –Ω–µ–¥–µ–ª–∏

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß–µ–∫–ª–∏—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –ö–ê–ñ–î–û–ô —Ñ–∞–∑—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- [ ] –í—Å–µ –ø–æ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ä—É–±—Ä–∏–∫–∞) —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –í–æ–ø—Ä–æ—Å—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è
- [ ] –ú–µ–¥–∏–∞-—Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- [ ] –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è
- [ ] –ò–º–ø–æ—Ä—Ç JSON —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –≠–∫—Å–ø–æ—Ä—Ç JSON —Ä–∞–±–æ—Ç–∞–µ—Ç

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- [ ] –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–µ—Å—Ç
- [ ] –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- [ ] –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å
- [ ] –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –º–µ–Ω—è–µ—Ç—Å—è

#### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ /tests –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ—Å—Ç—ã full-course
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ /tests/age-periods –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ—Å—Ç—ã –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- [ ] –¶–µ–ø–æ—á–∫–∏ —Ç–µ—Å—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–∞–º–æ–∫
- [ ] –¶–≤–µ—Ç–∞ –∏ —Ç–µ–º—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- [ ] –ó–∞–≥–ª—É—à–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

#### –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- [ ] –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- [ ] –í–æ–ø—Ä–æ—Å—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –º–µ–¥–∏–∞
- [ ] –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [ ] –ü–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–∫–∞–∑–∞ –æ—Ç–≤–µ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Firestore
- [ ] –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

#### –°–∏—Å—Ç–µ–º–∞ —Ü–µ–ø–æ—á–µ–∫
- [ ] Prerequisite —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è
- [ ] –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞
- [ ] –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
- [ ] –ö–Ω–æ–ø–∫–∞ "–í–µ—Ä–Ω—É—Ç—å—Å—è" –≤–µ–¥—ë—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–µ—Ä–∏–æ–¥–∞–º–∏
- [ ] –¢–µ—Å—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–†–∞–±–æ—á–∞—è —Ç–µ—Ç—Ä–∞–¥—å –∏ —Ç–µ—Å—Ç—ã"
- [ ] –ò–∫–æ–Ω–∫–∏ —Ç–µ—Å—Ç–æ–≤ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã
- [ ] –í–µ–¥—É—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ –æ—Ç –ê –¥–æ –Ø**
   - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç —Å 10 –≤–æ–ø—Ä–æ—Å–∞–º–∏
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ–¥–∏–∞ –∫ 3 –≤–æ–ø—Ä–æ—Å–∞–º
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
   - –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
   - –ü—Ä–æ–π—Ç–∏ –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

2. **–¶–µ–ø–æ—á–∫–∞ –∏–∑ 3 —É—Ä–æ–≤–Ω–µ–π**
   - –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π —Ç–µ—Å—Ç
   - –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å 2 (prerequisite = –∫–æ—Ä–Ω–µ–≤–æ–π, 70%)
   - –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å 3 (prerequisite = —É—Ä–æ–≤–µ–Ω—å 2, 80%)
   - –ü—Ä–æ–π—Ç–∏ –∫–æ—Ä–Ω–µ–≤–æ–π —Å 65% ‚Üí —É—Ä–æ–≤–µ–Ω—å 2 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
   - –ü—Ä–æ–π—Ç–∏ –∫–æ—Ä–Ω–µ–≤–æ–π —Å 75% ‚Üí —É—Ä–æ–≤–µ–Ω—å 2 —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
   - –ü—Ä–æ–π—Ç–∏ —É—Ä–æ–≤–µ–Ω—å 2 —Å 85% ‚Üí —É—Ä–æ–≤–µ–Ω—å 3 —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

3. **–ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç**
   - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç –≤ JSON
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ –∏–º–ø–æ—Ä—Ç —ç—Ç–æ–≥–æ JSON
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞
npm run build
ls -lh dist/assets/*.js

# Lighthouse audit
npm run preview
# –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Lighthouse ‚Üí Run
```

**–¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- FCP (First Contentful Paint): < 1.5s
- LCP (Largest Contentful Paint): < 2.5s
- TBT (Total Blocking Time): < 300ms
- Bundle JS: < 300KB gzipped

---

## –ß–µ–∫–ª–∏—Å—Ç—ã

### Checklist –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

- [ ] –°–æ–∑–¥–∞–Ω feature branch `refactor/tests-system`
- [ ] –°–æ–∑–¥–∞–Ω—ã —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –≤ `docs/backups/`
- [ ] –°–æ–∑–¥–∞–Ω git tag `refactor-tests-backup`
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `TESTS_SYSTEM_GUIDE.md` –∞–∫—Ç—É–∞–ª—å–Ω–∞
- [ ] –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
- [ ] –ü–æ–Ω—è—Ç–Ω—ã –≤—Å–µ —ç—Ç–∞–ø—ã
- [ ] –ö–æ–º–∞–Ω–¥–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∞ –æ –Ω–∞—á–∞–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### Checklist –ø–æ—Å–ª–µ –§–∞–∑—ã 1

- [x] –£–¥–∞–ª–µ–Ω—ã AuthorsTest*.tsx —Ñ–∞–π–ª—ã (—Å—Å—ã–ª–∫–∏ –∏–∑ App.jsx)
- [x] –£–¥–∞–ª–µ–Ω—ã —Ä–æ—É—Ç—ã –∏–∑ App.jsx
- [x] –°–æ–∑–¥–∞–Ω testChainHelpers.ts
- [x] Tests.tsx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç testChainHelpers
- [x] AgeTests.tsx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç testChainHelpers
- [x] –°–æ–∑–¥–∞–Ω TestCard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] Tests.tsx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TestCard
- [x] AgeTests.tsx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TestCard
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –∏–∑ —á–µ–∫–ª–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] Git commits —Å–æ–∑–¥–∞–Ω—ã (–≤—Ä—É—á–Ω—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
- [ ] –ö–æ–¥ review (–µ—Å–ª–∏ –≤ –∫–æ–º–∞–Ω–¥–µ)

### Checklist –ø–æ—Å–ª–µ –§–∞–∑—ã 2

- [ ] TestEditorForm —Ä–∞–∑–±–∏—Ç –Ω–∞ 6 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] QuestionEditor —Ä–∞–∑–±–∏—Ç –Ω–∞ 5 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] DynamicTest —Ä–∞–∑–±–∏—Ç –Ω–∞ 3 —ç–∫—Ä–∞–Ω–∞ + 3 hooks
- [ ] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã < 300 —Å—Ç—Ä–æ–∫
- [ ] Props –∏ callbacks —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –∏–∑ —á–µ–∫–ª–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Git commits —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ö–æ–¥ review (–µ—Å–ª–∏ –≤ –∫–æ–º–∞–Ω–¥–µ)

### Checklist –ø–æ—Å–ª–µ –§–∞–∑—ã 3

- [ ] Tests.tsx –∏ AgeTests.tsx –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ TestsPage.tsx
- [ ] State management –≤–Ω–µ–¥—Ä—ë–Ω
- [ ] Unit —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ò–º–ø–æ—Ä—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- [ ] Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] Lighthouse audit –ø—Ä–æ–π–¥–µ–Ω (>90)
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –∏–∑ —á–µ–∫–ª–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Bundle size –ø—Ä–æ–≤–µ—Ä–µ–Ω
- [ ] Git commits —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ö–æ–¥ review (–µ—Å–ª–∏ –≤ –∫–æ–º–∞–Ω–¥–µ)

### Checklist –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º –≤ main

- [ ] –í—Å–µ —á–µ–∫–ª–∏—Å—Ç—ã –≤—ã—à–µ –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] TESTS_SYSTEM_GUIDE.md –æ—Ç—Ä–∞–∂–∞–µ—Ç –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- [ ] TESTS_REFACTORING_PLAN.md –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π
- [ ] Changelog –æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] PR —Å–æ–∑–¥–∞–Ω —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] CI/CD –ø—Ä–æ–π–¥–µ–Ω
- [ ] –ö–æ–¥ review –æ–¥–æ–±—Ä–µ–Ω
- [ ] QA —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] Staging deploy —É—Å–ø–µ—à–µ–Ω
- [ ] Production deploy –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω

---

## –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ:

### –û—Ç–∫–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ commit

```bash
git reset --hard HEAD~1
```

### –û—Ç–∫–∞—Ç –∫ —Ç–µ–≥—É backup

```bash
git reset --hard refactor-tests-backup
```

### –û—Ç–∫–∞—Ç –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É commit

```bash
git log --oneline
git reset --hard <commit-hash>
```

### –û—Ç–∫–∞—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

```bash
# –ò–∑ HEAD
git checkout HEAD -- src/pages/Tests.tsx

# –ò–∑ backup —Ç–µ–≥–∞
git checkout refactor-tests-backup -- src/pages/Tests.tsx

# –ò–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
cp docs/backups/tests-system-20251107/Tests.tsx src/pages/Tests.tsx
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–æ–≤. 

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
1. –ú–∞–ª—ã–µ —à–∞–≥–∏ —Å —á–∞—Å—Ç—ã–º–∏ –∫–æ–º–º–∏—Ç–∞–º–∏
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ 30-40%
- –ü–æ–≤—ã—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ–ø—ã—Ç –¥–ª—è –∞—É–¥–∏—Ç–∞ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –¥—Ä—É–≥–∏–º –º–æ–¥—É–ª—è–º
- –°–æ–∑–¥–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–£–¥–∞—á–∏ –≤ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ! üöÄ**

