# –ë—ç–∫–ª–æ–≥ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∞—É–¥–∏—Ç–∞ (—è–Ω–≤–∞—Ä—å 2025)

> üîî **–õ–µ–≥–µ–Ω–¥–∞:** P ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (H/M/L), E ‚Äî –æ—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ—ë–º–∫–æ—Å—Ç–∏ (S/M/L).  
> ‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ `docs/REFRACTORING_ARCHIVE.md` (—Ä–∞–∑–¥–µ–ª *Audit backlog (—è–Ω–≤–∞—Ä—å 2025)*).  
> –ù–∏–∂–µ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É.

## üìä Priority board
| ID | Priority | –§–æ–∫—É—Å | –ö–ª—é—á–µ–≤—ã–µ deliverables |
|----|----------|-------|-----------------------|
| HP-1 | H (M) | Nightly –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (Firebase) | GH Actions job + –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø—Ä–æ–≥–æ–Ω–æ–≤ |
| HP-2 | H (L) | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ Playwright –ø–æ–∫—Ä—ã—Ç–∏–µ | Seed-–¥–∞–Ω–Ω—ã–µ, full auth flow, stress-—Ç–µ—Å—Ç—ã, –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å |
| MP-1 | M (M) | –ò–∑–æ–ª—è—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ Timeline (lazy-hooks) | –ü–ª–∞–Ω 4.4 `docs/legacy/lazy-loading-migration.md`, –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –±–∏–ª–¥-–æ—Ç—á—ë—Ç |
| MP-2 | M (S) | –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ Lighthouse/perf-–∑–∞–º–µ—Ä—ã | –ù–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ `docs/perf-metrics.md` + README summary |
| MP-3 | M (M) | Static analysis + bundle monitoring | `npx madge`/import-order checks + CI guardrails –Ω–∞ —Ä–∞–∑–º–µ—Ä—ã —á–∞–Ω–∫–æ–≤ |
| MP-4 | M (S) | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ tooling –≤–æ–∫—Ä—É–≥ —Ç–µ—Å—Ç–æ–≤ | –°–∫—Ä–∏–ø—Ç `ts:prune`, README policy, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ lazy-doc–æ–≤ –∏ perf –º–µ—Ç—Ä–∏–∫ |
| LP-1 | L (M) | Observability / telemetry | –ë–∞–∑–æ–≤—ã–π logger (Sentry/PostHog), –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ |
| LP-5 | L (S-M) | Firebase/GCP Warnings | –ú–∏–≥—Ä–∞—Ü–∏—è functions.config, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤, cleanup policy, –∏–Ω–¥–µ–∫—Å—ã |
| RS-1 | M (M) | –ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Wikidata | –ö–Ω–æ–ø–∫–∞ + API –ø–∞—Ä–∞–º–µ—Ç—Ä `deep=true`, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ Wikidata |
| RS-2 | M (S) | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è —Ç–µ—Ä–º–∏–Ω–æ–≤ | 500+ —Ç–µ—Ä–º–∏–Ω–æ–≤ RU‚ÜíEN, —Å–ª–æ–≤–∞—Ä–∏ –¥–ª—è DE/FR/ES, JSON —Ñ–∞–π–ª—ã |
| RS-3 | M (L) | –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–π –ø–æ–∏—Å–∫ (–Ω–µ —Ñ–∏–ª—å—Ç—Ä) | –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞, –ø–µ—Ä–µ–≤–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏ |
| CQ-1 | ‚úÖ | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–Ω–æ–ª–∏—Ç–æ–≤ (>400 —Å—Ç—Ä–æ–∫) | common.ts, ThemePicker.tsx, tests.ts —Ä–∞–∑–±–∏—Ç—ã (2026-01-08) |
| CQ-2 | ‚úÖ | –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ | BaseModal, useClickOutside, shuffleArray —Å–æ–∑–¥–∞–Ω—ã (2026-01-08) |
| CQ-3 | ‚úÖ | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Timeline —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤ | React.memo, useMemo –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ TimelineCanvas (2026-01-08) |
| CQ-4 | M (L) | –ü–æ–∫—Ä—ã—Ç–∏–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞–º–∏ stores/hooks | useAuthStore, useTestStore, testAccess ‚Äî —Å–º. —Å–µ–∫—Ü–∏—é TQ |
| CQ-5 | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ console.* –Ω–∞—Ä—É—à–µ–Ω–∏–π | –í—Å–µ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ debugLog/debugError (2026-01-08) |
| TQ-1 | M (M) | –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç | theme.ts, sortNotes.ts, mediaUpload.ts –∏ –¥—Ä. |
| BR-1 | ‚úÖ | Sentence-based Chunking | –ß–∞–Ω–∫–∏ –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º, overlap –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º |
| BR-2 | L (L) | Semantic Chunking | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–ª–∞–≤/—Ä–∞–∑–¥–µ–ª–æ–≤, –∏–µ—Ä–∞—Ä—Ö–∏—è –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö |
| BR-3 | L (S) | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ RAG-–æ—Ç–≤–µ—Ç–æ–≤ | Firestore cache, TTL 7 –¥–Ω–µ–π |
| BR-4 | M (M) | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–Ω–∏–≥ —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ | –ë–ª–æ–∫ "–ß—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –∫–Ω–∏–≥–∏" –≤ Notes |
| BR-5 | M (M) | –û–±—ä—è—Å–Ω–µ–Ω–∏—è –∏–∑ –∫–Ω–∏–≥ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤ | –ö–Ω–æ–ø–∫–∞ "–£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ" –ø—Ä–∏ –æ—à–∏–±–∫–µ |
| BR-6 | M (M) | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É | RAG –¥–ª—è –∫—É—Ä—Å–æ–≤ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Book RAG) |

---

## üî¥ High Priority

### HP‚Äë1. Nightly –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (P: H, E: M)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Actions workflow, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç Firebase —ç–º—É–ª—è—Ç–æ—Ä—ã (`npm run firebase:emulators:start`) –∏ –≥–æ–Ω—è–µ—Ç `npm run test:integration`.  
- [ ] –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (–ª–æ–≥ —É—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤, –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ ‚Äî –∂—É—Ä–Ω–∞–ª/–≤–∏–¥–µ–æ).  
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (README + `docs/TestingSystemGuide.md`) —Ä–∞–∑–¥–µ–ª–æ–º ¬´–ö–∞–∫ —á–∏—Ç–∞—Ç—å nightly-–ø—Ä–æ–≥–æ–Ω—ã¬ª.

### HP‚Äë2. –ü–æ–ª–Ω–æ–µ Playwright –ø–æ–∫—Ä—ã—Ç–∏–µ (P: H, E: L)
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å seed-–¥–∞–Ω–Ω—ã–µ (Firestore/Storage) –¥–ª—è e2e —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å —Ä–µ–∞–ª—å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.  
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏: login + –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–∏–æ–¥–æ–≤, –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ —Å prerequisite, CRUD –∑–∞–º–µ—Ç–æ–∫ + —ç–∫—Å–ø–æ—Ä—Ç, —Ä–∞–±–æ—Ç–∞ —Ç–∞–π–º–ª–∞–π–Ω–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–µ), –∞–¥–º–∏–Ω-—Ñ–ª–æ—É (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞).  
- [ ] –û—Ç–¥–µ–ª—å–Ω–æ –ø—Ä–æ–≥–Ω–∞—Ç—å smoke –Ω–∞ Slow 3G ‚Äî —É–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ fallback-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.  
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Slack/email) –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏—è—Ö –∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å `docs/TestingSystemGuide.md` —Ä–∞–∑–¥–µ–ª–æ–º –ø—Ä–æ e2e (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ–º–∞–Ω–¥—ã, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ traces).

#### HP‚Äë2.A Text selection issue - ‚úÖ –†–ï–®–ï–ù–û (2025‚Äë11‚Äë15, Claude Sonnet 4.5)
- **–ü—Ä–æ–±–ª–µ–º–∞:** —Ç–µ–∫—Å—Ç –Ω–∞ —Å–∞–π—Ç–µ –Ω–µ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –º—ã—à–∫–æ–π (Chrome/Safari), –≤–º–µ—Å—Ç–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç "–¥—Ä–∞–≥"
- **–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –í `src/index.css` –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ CSS –ø—Ä–∞–≤–∏–ª–∞ `user-select: text` –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (h1, p, div, span –∏ —Ç.–¥.)
- **–†–µ—à–µ–Ω–∏–µ:**
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–µ CSS –ø—Ä–∞–≤–∏–ª–∞ –≤ `src/index.css` (—Å—Ç—Ä–æ–∫–∏ 55-100)
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ `::selection` –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è (—Å–∏–Ω–∏–π —Ñ–æ–Ω, 30% –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å)
  - –û—á–∏—â–µ–Ω—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –æ—Ç –Ω–µ—É–¥–∞—á–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏ Codex (`useDisableDrag.ts`, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ README)
  - –°–æ—Ö—Ä–∞–Ω—ë–Ω Playwright —Ç–µ—Å—Ç `tests/text-selection.spec.ts` –æ—Ç Codex
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–†–ï–®–ï–ù–û** - —Ç–µ–∫—Å—Ç –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. `docs/legacy/TEXT_SELECTION_ISSUE.md` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

---

## ‚öñÔ∏è Medium Priority

### MP‚Äë1. –ò–∑–æ–ª—è—Ü–∏—è —Ö—É–∫-–ª–æ–≥–∏–∫–∏ Timeline (P: M, E: M)
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ–≤—å—é —Ç–µ–∫—É—â–µ–≥–æ `timeline` chunk –∏ –≤—ã–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ —Ö—É–∫–∏/—É—Ç–∏–ª–∏—Ç—ã (`useTimelineState`, drag/drop, history, export) –µ—â—ë –∂–∏–≤—É—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ (–ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ `6065075` –≤–∏–∑—É–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —É–∂–µ —Ä–∞–∑–±–∏—Ç–∞, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤—Å—ë –µ—â—ë —Ç—è–∂–µ–ª–∞—è).  
- [ ] –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ª–µ–Ω–∏–≤—ã–π –º–æ–¥—É–ª—å (`timeline-hooks` –ª–∏–±–æ `TimelineInteractions`) –ø–æ –ø–ª–∞–Ω—É ¬ß4.4 –∏–∑ `docs/legacy/lazy-loading-migration.md`.  
- [ ] –í–æ–∫—Ä—É–≥ –Ω–æ–≤—ã—Ö lazy-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–æ–±–∞–≤–∏—Ç—å `Suspense` + `PageLoader`, –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ –ø—Ä–æ–ø—Å—ã/–∫–æ–Ω—Ç–µ–∫—Å—Ç –±–µ–∑ –≥–æ–Ω–æ–∫.  
- [ ] –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –ø—Ä–æ–≥–æ–Ω—è—Ç—å `npm run test` –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã —á–∞–Ω–∫–æ–≤ (`npm run build`).

### MP‚Äë2. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ Lighthouse/Perf –∏–∑–º–µ—Ä–µ–Ω–∏—è (P: M, E: S)
- [ ] –ü–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å Lighthouse –¥–ª—è `/`, `/tests`, `/timeline`, `/admin` –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ª–µ–Ω–∏–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏.  
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `docs/perf-metrics.md` –∏ –∫—Ä–∞—Ç–∫–æ –æ—Ç—Ä–∞–∑–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ README (Baseline vs Current).  
- [ ] –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –æ—Ç—á—ë—Ç–æ–≤ (–ø—É—Ç–∏ –∫ JSON) –≤ `docs/legacy/lazy-loading-migration.md` –∏–ª–∏ `logs/`.

### MP‚Äë3. Static analysis + bundle monitoring (P: M, E: M)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`npx madge --circular src`) –≤ `npm run validate` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç.  
- [ ] –í–≤–µ—Å—Ç–∏ –ª–∏–Ω—Ç –ø—Ä–∞–≤–∏–ª –¥–ª—è –ø–æ—Ä—è–¥–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ –∑–∞–ø—Ä–µ—Ç–∞ ¬´–æ–ø–∞—Å–Ω—ã—Ö¬ª top-level –≤—ã–∑–æ–≤–æ–≤ (`export const foo = imported.bar()`), –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –≤ `docs/ARCHITECTURE_GUIDELINES.md`.  
- [ ] –í CI –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞–∑–º–µ—Ä—ã —á–∞–Ω–∫–æ–≤ (`npm run build` + fail, –µ—Å–ª–∏ timeline chunk > 1‚ÄØMB –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π > 500‚ÄØKB).

### MP‚Äë4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ tooling (P: M, E: S)
- [ ] –î–æ–±–∞–≤–∏—Ç—å npm-—Å–∫—Ä–∏–ø—Ç `ts:prune` + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ README, –∫–∞–∫ —á–∏—Ç–∞—Ç—å –æ—Ç—á—ë—Ç (`npx ts-prune`).
- [ ] –Ø–≤–Ω–æ –∑–∞–∫—Ä–µ–ø–∏—Ç—å –≤ README —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å `ARCHITECTURE_GUIDELINES.md` –∏ `TestingSystemGuide.md` –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∑–∞–¥–∞—á.
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –ª–µ–Ω–∏–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: –æ–ø–∏—Å–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö lazy-—Å—Ç—Ä–∞–Ω–∏—Ü –∏ –∏—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ `docs/legacy/lazy-loading-migration.md` / README, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å `docs/perf-metrics.md` –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç.

### MP‚Äë5. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è clinical/general –∫—É—Ä—Å–æ–≤ - –†–ï–®–ï–ù–û (2025-11-19)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–≥–ª—É—à–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å –¥–∞–∂–µ –∫–æ–≥–¥–∞ `placeholder_enabled = false` –µ—Å–ª–∏ sections –±—ã–ª–∏ –ø—É—Å—Ç—ã–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ `PeriodPage.tsx:84`:
  - –ë—ã–ª–æ: `placeholderEnabled || (!hasSections && placeholderMessage.length > 0)`
  - –°—Ç–∞–ª–æ: `placeholderEnabled === true || (placeholderEnabled !== false && !hasSections && placeholderMessage.length > 0)`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï—Å–ª–∏ `placeholder_enabled` —è–≤–Ω–æ `false`, –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ sections –ø—É—Å—Ç—ã–µ
- **–ö–æ–º–º–∏—Ç:** `f3ba86b`

### MP‚Äë6. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ü—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è –Ω–∞ —Ñ–æ—Ä–º–∞—Ç sections - –†–ï–®–ï–ù–û (2025-11-19)
- **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
  - ‚úÖ –°–æ–∑–¥–∞–Ω backup: `backups/periods-backup-2025-11-19T12-44-40.json`
  - ‚úÖ –ù–∞–ø–∏—Å–∞–Ω —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏: `scripts/migrate-periods-to-sections.cjs`
  - ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ 14 –ø–µ—Ä–∏–æ–¥–æ–≤ + intro –Ω–∞ sections —Ñ–æ—Ä–º–∞—Ç
  - ‚úÖ –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `convertLegacyToSections` –∏–∑ `PeriodPage.tsx`
  - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `usePeriods.ts` –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ sections –∏–∑ Firestore
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–µ–∫—Ü–∏–π (`SECTION_ORDER`) –≤ `PeriodSections.tsx`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ 3 –∫—É—Ä—Å–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π sections —Ñ–æ—Ä–º–∞—Ç
- **–ö–æ–º–º–∏—Ç—ã:** `6ca0e14`, `bba4e1d`

---

## üí§ Low Priority

### LP‚Äë1. Observability / Telemetry (P: L, E: M)
- [ ] –í—ã–±—Ä–∞—Ç—å –∏ –≤–Ω–µ–¥—Ä–∏—Ç—å –±–∞–∑–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (Sentry, Firebase Analytics, PostHog).
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è: –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –ø—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏, –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø–∏—Å–∏ Firestore.
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Ä–∞–∑–¥–µ–ª ¬´Observability¬ª: –∫–∞–∫ —á–∏—Ç–∞—Ç—å –∞–ª–µ—Ä—Ç—ã, –≥–¥–µ –∏—Å–∫–∞—Ç—å –ª–æ–≥–∏, –∫—Ç–æ on-call.

### LP‚Äë2. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ HomePage –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (P: L, E: S)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –§–∞–π–ª `src/pages/HomePage.tsx` —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 364 —Å—Ç—Ä–æ–∫–∏ ‚Äî –±–ª–∏–∑–∫–æ –∫ –ø–æ—Ä–æ–≥—É üü° (400 —Å—Ç—Ä–æ–∫)
- **–¢—Ä–∏–≥–≥–µ—Ä:** –ï—Å–ª–∏ —Ñ–∞–π–ª –≤—ã—Ä–∞—Å—Ç–µ—Ç > 400 —Å—Ç—Ä–æ–∫, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** üü° –ü—Ä–∏–µ–º–ª–µ–º–æ (364 —Å—Ç—Ä–æ–∫–∏), –Ω–æ —Å–ª–µ–¥—É–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–æ—Å—Ç
- **–ó–∞–¥–∞—á–∏:**
  - [ ] –í—ã–Ω–µ—Å—Ç–∏ render-—Ñ—É–Ω–∫—Ü–∏–∏ —Å–µ–∫—Ü–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
    - `src/components/home/CTASection.tsx`
    - `src/components/home/HeroSection.tsx`
    - `src/components/home/EssenceSection.tsx`
    - `src/components/home/StructureSection.tsx`
    - `src/components/home/PeriodsSection.tsx`
    - `src/components/home/OrganizationSection.tsx`
    - `src/components/home/InstructorsSection.tsx`
    - `src/components/home/FormatSection.tsx`
  - [ ] –°–æ–∑–¥–∞—Ç—å barrel export `src/components/home/index.ts`
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å `HomePage.tsx` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ < 200 —Å—Ç—Ä–æ–∫ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- **–§–∞–π–ª—ã:** `src/pages/HomePage.tsx` (364 —Å—Ç—Ä–æ–∫–∏)

### LP‚Äë3. –£–ª—É—á—à–µ–Ω–∏–µ Rate Limiting –¥–ª—è AI Assistant (P: L, E: S)
- **–ü—Ä–æ–±–ª–µ–º–∞:** In-memory rate limiting –≤ `api/assistant.ts` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ Vercel Serverless (–∫–∞–∂–¥—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –∏–º–µ–µ—Ç —Å–≤–æ—é –ø–∞–º—è—Ç—å)
- **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** üü° –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª–µ–≥–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏, –Ω–æ –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Upstash Redis –∏–ª–∏ Vercel KV –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ rate limiting
- **–ó–∞–¥–∞—á–∏:**
  - [ ] –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä (Upstash Redis / Vercel KV)
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å distributed rate limiting
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ env vars
- **–§–∞–π–ª—ã:** `api/assistant.ts` (—Å—Ç—Ä–æ–∫–∏ 39-58)

### LP‚Äë4. –û—á–∏—Å—Ç–∫–∞ fallback env vars –≤ AI Assistant (P: L, E: S) - ‚úÖ –ú–û–ñ–ù–û –ü–†–û–ü–£–°–¢–ò–¢–¨
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í `api/assistant.ts:178` –µ—Å—Ç—å fallback –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ env var –∏–º—ë–Ω (MY_GEMINI_KEY, GOOGLE_API_KEY, VITE_GEMINI_KEY)
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ, –∫–æ–≥–¥–∞ Vercel Dashboard –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª env vars
- **–†–µ—à–µ–Ω–∏–µ:** –°–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç GEMINI_API_KEY, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å
- **–°—Ç–∞—Ç—É—Å:** üü¢ –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ ‚Äî fallbacks –Ω–µ –º–µ—à–∞—é—Ç, –Ω–æ –¥–æ–±–∞–≤–ª—è—é—Ç —à—É–º –≤ –∫–æ–¥

### LP‚Äë5. Firebase/GCP Warnings (P: L, E: S-M)
- **Warnings –æ—Ç Firebase deploy (2025-12-25):**

#### 1. functions.config() API Deprecated (Deadline: March 2026)
- **–ü—Ä–æ–±–ª–µ–º–∞:** Cloud Runtime Configuration API –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á—ë–Ω –≤ –º–∞—Ä—Ç–µ 2026
- **–í–ª–∏—è–Ω–∏–µ:** –ü–æ—Å–ª–µ March 2026 –¥–µ–ø–ª–æ–π —Ñ—É–Ω–∫—Ü–∏–π —Å `functions.config()` –±—É–¥–µ—Ç –ø–∞–¥–∞—Ç—å
- **–†–µ—à–µ–Ω–∏–µ:**
  - [ ] –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `functions.config()` –Ω–∞ `.env` —Ñ–∞–π–ª—ã –∏ Secret Manager
  - [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://firebase.google.com/docs/functions/config-env#migrate-to-dotenv
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `functions/src/` –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `functions.config()`
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –¥–µ–ø–ª–æ—é
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π (–µ—Å—Ç—å 1+ –≥–æ–¥), –Ω–æ –Ω–µ –∑–∞–±—ã—Ç—å
- **–û—Ü–µ–Ω–∫–∞:** 1-2 —á–∞—Å–∞ (–µ—Å–ª–∏ env vars —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)

#### 2. firebase-functions Package Outdated
- **–ü—Ä–æ–±–ª–µ–º–∞:** `package.json` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à—É—é –≤–µ—Ä—Å–∏—é `firebase-functions`
- **–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** (–Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ `functions/package.json`)
- **–ü–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è:** `firebase-functions@latest`
- **–†–µ—à–µ–Ω–∏–µ:**
  - [ ] `cd functions && npm install --save firebase-functions@latest`
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å breaking changes: https://firebase.google.com/support/release-notes/functions
  - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–æ—Å–æ–±–µ–Ω–Ω–æ Gen2 ingestBook)
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–π–ø–∏–Ω–≥–∏ –∏ –∏–º–ø–æ—Ä—Ç—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:** ‚ö†Ô∏è –ú–æ–≥—É—Ç –±—ã—Ç—å breaking changes
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π
- **–û—Ü–µ–Ω–∫–∞:** 2-4 —á–∞—Å–∞ (—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º)

#### 3. Container Images Cleanup Policy (europe-west1)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç cleanup policy –¥–ª—è Docker –æ–±—Ä–∞–∑–æ–≤ Cloud Functions –≤ region `europe-west1`
- **–í–ª–∏—è–Ω–∏–µ:** –ù–µ–±–æ–ª—å—à–æ–π –º–µ—Å—è—á–Ω—ã–π —Å—á—ë—Ç (~$1-5/–º–µ—Å—è—Ü) –∏–∑-–∑–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–∑–æ–≤
- **–†–µ—à–µ–Ω–∏–µ (–æ–ø—Ü–∏—è 1):** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
  ```bash
  firebase deploy --only functions --force
  ```
- **–†–µ—à–µ–Ω–∏–µ (–æ–ø—Ü–∏—è 2):** –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
  ```bash
  firebase functions:artifacts:setpolicy
  ```
- **–†–µ—à–µ–Ω–∏–µ (–æ–ø—Ü–∏—è 3):** –ß–µ—Ä–µ–∑ GCP Console
  - Artifact Registry ‚Üí Repositories ‚Üí gcf-artifacts (europe-west1) ‚Üí Cleanup Policies
  - –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É: Keep last 10 images, delete older than 30 days
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–∏–∑–∫–∏–π (—Ç–æ–ª—å–∫–æ –¥–µ–Ω—å–≥–∏, –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- **–û—Ü–µ–Ω–∫–∞:** 15 –º–∏–Ω—É—Ç
- **–°—Ç–∞—Ç—É—Å:** üü° –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –¥–µ–ø–ª–æ–µ —Å `--force`

#### 4. Firestore Composite Indexes Missing
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç composite –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è adjacent chunks queries –≤ `book_chunks`
- **–û—à–∏–±–∫–∞:** `9 FAILED_PRECONDITION: The query requires an index`
- **–ù—É–∂–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**
  1. `book_chunks`: `bookId` (ASC) + `pageEnd` (DESC) + `__name__` (ASC)
  2. `book_chunks`: `bookId` (ASC) + `pageStart` (ASC) + `__name__` (ASC)
- **–†–µ—à–µ–Ω–∏–µ:**
  - [x] –û–±–Ω–æ–≤–ª—ë–Ω `firestore.indexes.json` —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
  - [ ] –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã —á–µ—Ä–µ–∑ Firebase Console (—Å—Å—ã–ª–∫–∞ –≤ –æ—à–∏–±–∫–µ)
  - [ ] –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: `firebase deploy --only firestore:indexes --force`
- **–°—Å—ã–ª–∫–∞ –∏–∑ –æ—à–∏–±–∫–∏:** https://console.firebase.google.com/v1/r/project/psych-dev-site-prod/firestore/indexes?create_composite=Cldwcm9qZWN0cy9wc3ljaC1kZXYtc2l0ZS1wcm9kL2RhdGFiYXNlcy8oZGVmYXVsdCkvY29sbGVjdGlvbkdyb3Vwcy9ib29rX2NodW5rcy9pbmRleGVzL18QARoKCgZib29rSWQQARoLCgdwYWdlRW5kEAIaDAoIX19uYW1lX18QAg
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π (–±–ª–æ–∫–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é "—Ä–∞—Å–∫—Ä—ã—Ç—å —Ü–∏—Ç–∞—Ç—É")
- **–û—Ü–µ–Ω–∫–∞:** 5 –º–∏–Ω—É—Ç (–∫–ª–∏–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è 2-10 –º–∏–Ω—É—Ç)
- **–°—Ç–∞—Ç—É—Å:** ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è)

---

## üî¨ Research Search (–ù–∞—É—á–Ω—ã–π –ø–æ–∏—Å–∫)

### RS‚Äë1. –ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Wikidata (P: M, E: M)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫" —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Wikidata –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
  1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä. "–¥–µ–ø—Ä–µ—Å—Å–∏—è")
  2. Wikidata –Ω–∞—Ö–æ–¥–∏—Ç –∫–æ–Ω—Ü–µ–ø—Ç (Q42844) –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø–µ—Ä–µ–≤–æ–¥—ã/—Å–∏–Ω–æ–Ω–∏–º—ã –Ω–∞ –≤—Å–µ —è–∑—ã–∫–∏
  3. –ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ –≤—Å–µ–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **–ó–∞–¥–∞—á–∏:**
  - [ ] –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ Wikidata –≤ `api/papers.ts` (wdSearch, wdGetEntities, buildQueryVariants)
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `deep=true` –≤ API –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è Wikidata-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å UI –∫–Ω–æ–ø–∫–∏ "–ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫" –¥–ª—è –≤—ã–∑–æ–≤–∞ API —Å `deep=true`
  - [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–ø—Ä–æ—Å–∞ (–∏–∑ meta.queryVariantsUsed)
- **–§–∞–π–ª—ã:** `api/papers.ts`, `src/pages/ResearchPage.tsx`
- **–°—Ç–∞—Ç—É—Å:** üü° –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞–∫ –∑–∞–≥–ª—É—à–∫–∞

### RS‚Äë2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è RU‚ÜíEN —Ç–µ—Ä–º–∏–Ω–æ–≤ (P: M, E: S)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–¥–≥—Ä—É–∑–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** ~50 —Ç–µ—Ä–º–∏–Ω–æ–≤ –≤ `RU_TO_EN_TERMS` (api/papers.ts:127-167)
- **–ó–∞–¥–∞—á–∏:**
  - [ ] –ù–∞–π—Ç–∏/—Å–æ–∑–¥–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ RU‚ÜíEN (500+ —Ç–µ—Ä–º–∏–Ω–æ–≤)
  - [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞—Ä–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤ (DE‚ÜíEN, FR‚ÜíEN, ES‚ÜíEN)
  - [ ] –í—ã–Ω–µ—Å—Ç–∏ —Å–ª–æ–≤–∞—Ä–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ JSON —Ñ–∞–π–ª—ã (`src/features/researchSearch/dictionaries/`)
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞–¥–µ–∂–µ–π (—Å—Ç–µ–º–º–∏–Ω–≥ –∏–ª–∏ –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è)
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–ª–æ–≤–∞—Ä–µ–π:**
  - –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å –ú–µ—â–µ—Ä—è–∫–æ–≤–∞-–ó–∏–Ω—á–µ–Ω–∫–æ
  - APA Dictionary of Psychology
  - Wikidata labels/aliases –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤
- **–§–∞–π–ª—ã:** `api/papers.ts`

---

## üìö Book RAG (–ü–æ–∏—Å–∫ –ø–æ –∫–Ω–∏–≥–∞–º)

### BR‚Äë1. ‚úÖ Sentence-based Chunking (P: M, E: S) - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (2025-12-25)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–º–µ–Ω–∞ character-based chunking –Ω–∞ sentence-based –¥–ª—è –ª—É—á—à–∏—Ö —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –≥—Ä–∞–Ω–∏—Ü
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
  - –¢–µ–∫—Å—Ç —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (regex —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π RU/EN –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏)
  - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ —á–∞–Ω–∫–∏ (5-15 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, 1500-2500 —Å–∏–º–≤–æ–ª–æ–≤)
  - Overlap –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (2 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Üí —Å–ª–µ–¥—É—é—â–∏–π —á–∞–Ω–∫)
  - Fallback –Ω–∞ character-based –ø—Ä–∏ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö
- **–ö–æ–Ω—Ñ–∏–≥:** `functions/src/lib/chunker.ts` ‚Äî `DEFAULT_CHUNK_CONFIG`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–∞–Ω–∫–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, overlap —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω—ã–π

### BR‚Äë2. Semantic Chunking (P: L, E: L)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ —Å —É—á—ë—Ç–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **–û—Ç–ª–∏—á–∏–µ –æ—Ç sentence-based:**
  - Sentence-based: —Ä–∞–∑–±–∏–≤–∞–µ—Ç –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º, –Ω–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≥–ª–∞–≤—ã/—Ä–∞–∑–¥–µ–ª—ã
  - Semantic: –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏, –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã, —Å–ø–∏—Å–∫–∏, —Ü–∏—Ç–∞—Ç—ã ‚Äî –∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç –ø–æ —Å–º—ã—Å–ª—É
- **–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
  1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã PDF** (2-3 –¥–Ω—è):
     - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pdf-lib` –∏–ª–∏ `pdfjs-dist` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π —Ç–µ–∫—Å—Ç–∞ (—Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞, –∂–∏—Ä–Ω–æ—Å—Ç—å)
     - –û–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø–æ —Ä–∞–∑–º–µ—Ä—É —à—Ä–∏—Ñ—Ç–∞ > —Å—Ä–µ–¥–Ω–µ–≥–æ + –∂–∏—Ä–Ω–æ—Å—Ç—å
     - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: LLM-based –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–¥–æ—Ä–æ–∂–µ, –Ω–æ —Ç–æ—á–Ω–µ–µ)
  2. **–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π chunking** (1-2 –¥–Ω—è):
     - –†–∞–∑–±–∏–≤–∞—Ç—å –ø–æ –≥–ª–∞–≤–∞–º, –∑–∞—Ç–µ–º –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º, –∑–∞—Ç–µ–º –ø–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º
     - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é: `{ chapter: "–ì–ª–∞–≤–∞ 3", section: "3.2 –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è", subsection: null }`
     - –ù–µ —Ä–∞–∑—Ä—ã–≤–∞—Ç—å —Å–ø–∏—Å–∫–∏, —Ç–∞–±–ª–∏—Ü—ã, —Ü–∏—Ç–∞—Ç—ã –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ
  3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã Firestore** (1 –¥–µ–Ω—å):
     - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ `book_chunks`: `chapterTitle`, `sectionTitle`, `hierarchy`
     - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –≥–ª–∞–≤–∞–º
  4. **UI —É–ª—É—á—à–µ–Ω–∏—è** (1 –¥–µ–Ω—å):
     - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≥–ª–∞–≤—É/—Ä–∞–∑–¥–µ–ª –≤ —Ü–∏—Ç–∞—Ç–∞—Ö
     - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –≥–ª–∞–≤–∞–º
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
  - `pdfjs-dist` ‚Äî –¥–ª—è —Å—Ç–∏–ª–µ–π —Ç–µ–∫—Å—Ç–∞ (–Ω–æ —Ç—è–∂—ë–ª–∞—è)
  - `pdf-parse` + —Ä–µ–≥—É–ª—è—Ä–∫–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (–ø—Ä–æ—â–µ, –º–µ–Ω–µ–µ —Ç–æ—á–Ω–æ)
  - Gemini API –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (—Ç–æ—á–Ω–æ, –Ω–æ $)
- **–û—Ü–µ–Ω–∫–∞:** 5-7 –¥–Ω–µ–π, ~70% —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å sentence-based
- **–§–∞–π–ª—ã:** `functions/src/lib/chunker.ts`, `functions/src/lib/pdfParser.ts`, `api/books.ts`
- **–°—Ç–∞—Ç—É—Å:** üîµ –í –±—ç–∫–ª–æ–≥–µ, –∂–¥—ë—Ç –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏

### BR‚Äë3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ RAG-–æ—Ç–≤–µ—Ç–æ–≤ (P: L, E: S)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
  - –ö–æ–ª–ª–µ–∫—Ü–∏—è `book_answer_cache` –≤ Firestore
  - –ö–ª—é—á: SHA256(query + sorted(bookIds))
  - TTL: 7 –¥–Ω–µ–π, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∫–Ω–∏–≥–∏
- **–í—ã–∏–≥—Ä—ã—à:** 50–º—Å –≤–º–µ—Å—Ç–æ 3-5—Å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–§–∞–π–ª—ã:** `api/books.ts`

### BR‚Äë4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–Ω–∏–≥ —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ (P: M, E: M)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∑–∞–º–µ—Ç–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∏–∑ –∫–Ω–∏–≥
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
  - –í Notes –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫ "–ß—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –∫–Ω–∏–≥–∏"
  - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–µ–º—ã ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∫–Ω–∏–≥–∞–º
  - –ö–Ω–æ–ø–∫–∞ "–í—Å—Ç–∞–≤–∏—Ç—å —Ü–∏—Ç–∞—Ç—É" –≤ –∑–∞–º–µ—Ç–∫—É
- **–§–∞–π–ª—ã:** `src/pages/Notes.tsx`, `src/features/bookSearch/`

### BR‚Äë5. –û–±—ä—è—Å–Ω–µ–Ω–∏—è –∏–∑ –∫–Ω–∏–≥ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤ (P: M, E: M)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏–∑ –∫–Ω–∏–≥
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
  - –ö–Ω–æ–ø–∫–∞ "–£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ" –ø—Ä–∏ –æ—à–∏–±–∫–µ
  - RAG-–∑–∞–ø—Ä–æ—Å –ø–æ —Ç–µ–º–µ –≤–æ–ø—Ä–æ—Å–∞
  - –ü–æ–∫–∞–∑ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ —Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º
- **–§–∞–π–ª—ã:** `src/pages/TestsPage.tsx`, `src/pages/DynamicTest.tsx`

### BR‚Äë6. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É —Å–∞–π—Ç–∞ (P: M, E: M)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –†–∞—Å—à–∏—Ä–∏—Ç—å Book RAG –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –≤—Å–µ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É –∫—É—Ä—Å–æ–≤
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–æ—Å—Ç–æ–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –ø–æ–∏—Å–∫ (`src/features/contentSearch/`)
- **–£–ª—É—á—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å embeddings –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–ø–æ–Ω–∏–º–∞–µ—Ç —Å–º—ã—Å–ª –∑–∞–ø—Ä–æ—Å–∞)
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
  1. –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–µ—Ä–∏–æ–¥–∞/—Ç–µ–º—ã ‚Üí —Å–æ–∑–¥–∞—ë–º embeddings —á–µ—Ä–µ–∑ Gemini
  2. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `content_chunks` –∫–æ–ª–ª–µ–∫—Ü–∏—é (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `book_chunks`)
  3. –ü—Ä–∏ –ø–æ–∏—Å–∫–µ: —Å–æ–∑–¥–∞—ë–º embedding –∑–∞–ø—Ä–æ—Å–∞ ‚Üí vector search ‚Üí —Ä–∞–Ω–∂–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
  4. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: AI-–æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
  - [ ] Cloud Function `ingestContent` (–∞–Ω–∞–ª–æ–≥ `ingestBook`) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è embeddings
  - [ ] –ö–æ–ª–ª–µ–∫—Ü–∏—è `content_chunks` –≤ Firestore
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å `ContentSearchDrawer` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
  - [ ] Fallback –Ω–∞ –ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –µ—Å–ª–∏ embeddings –Ω–µ –≥–æ—Ç–æ–≤—ã
- **–í—ã–∏–≥—Ä—ã—à:**
  - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫: "–∫–∞–∫ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è —Ä–µ—á—å" –Ω–∞–π–¥—ë—Ç "—Ä–µ—á–µ–≤–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ", "–æ–≤–ª–∞–¥–µ–Ω–∏–µ —è–∑—ã–∫–æ–º"
  - AI-–æ—Ç–≤–µ—Ç—ã —Å —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∫—É—Ä—Å–æ–≤
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Book RAG –¥–ª—è –µ–¥–∏–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$5-10/–º–µ—Å (Gemini embeddings + generation)
- **–§–∞–π–ª—ã:** `functions/src/`, `src/features/contentSearch/`, `api/content.ts` (–Ω–æ–≤—ã–π)
- **–°—Ç–∞—Ç—É—Å:** üîµ –í –±—ç–∫–ª–æ–≥–µ (–∂–¥—ë—Ç –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏)
- **–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:** 2026-01-09

---

### RS‚Äë3. –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–π –ø–æ–∏—Å–∫ (–Ω–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è) (P: M, E: L)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–µ–π—á–∞—Å –∫–Ω–æ–ø–∫–∏ —è–∑—ã–∫–æ–≤ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —è–∑—ã–∫—É —Å—Ç–∞—Ç—å–∏. –ù—É–∂–µ–Ω —Ä–µ–∂–∏–º –ø–æ–∏—Å–∫–∞ –ü–û —è–∑—ã–∫–∞–º
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø—Ä–æ—Å "–∞–≥—Ä–µ—Å—Å–∏—è" —Å —Ñ–∏–ª—å—Ç—Ä–æ–º "—Ç–æ–ª—å–∫–æ English" –¥–∞—ë—Ç 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –ø–æ—Ç–æ–º—É —á—Ç–æ:
  1. –ó–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ "aggression"
  2. –ù–æ OpenAlex —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ `language:en` ‚Äî —Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
  3. –°—Ç–∞—Ç—å–∏ –ø—Ä–æ –∞–≥—Ä–µ—Å—Å–∏—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `language:ru`
- **–†–µ—à–µ–Ω–∏–µ:**
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞: "–§–∏–ª—å—Ç—Ä" vs "–ü–æ–∏—Å–∫ –Ω–∞ —è–∑—ã–∫–∞—Ö"
  - [ ] –í —Ä–µ–∂–∏–º–µ "–ü–æ–∏—Å–∫": –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏ –∏ –∏—Å–∫–∞—Ç—å –±–µ–∑ —è–∑—ã–∫–æ–≤–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
  - [ ] –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–∑ –∫–∞–∫–æ–≥–æ —è–∑—ã–∫–æ–≤–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø—Ä–∏—à—ë–ª –∫–∞–∂–¥—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–§–∞–π–ª—ã:** `api/papers.ts`, `src/pages/ResearchPage.tsx`, `src/features/researchSearch/hooks/useResearchSearch.ts`

---

## üîç Code Quality Audit (—è–Ω–≤–∞—Ä—å 2026)

> **–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 2026-01-08
> **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** ~31,500 —Å—Ç—Ä–æ–∫ –≤ src/, ~2,100 —Å—Ç—Ä–æ–∫ –≤ functions/, 7 —Ç–µ—Å—Ç-—Ñ–∞–π–ª–æ–≤ (~7% –ø–æ–∫—Ä—ã—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π)

### CQ‚Äë1. ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–Ω–æ–ª–∏—Ç–æ–≤ >400 —Å—Ç—Ä–æ–∫ ‚Äî –í–´–ü–û–õ–ù–ï–ù–û (2026-01-08)

**–†–∞–∑–±–∏—Ç—ã–µ —Ñ–∞–π–ª—ã:**

| –§–∞–π–ª | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –í—ã–¥–µ–ª–µ–Ω–æ |
|------|------|-------|----------|
| `common.ts` | 605 | 96 | `svgRenderer.ts` (340), `pdfBuilder.ts` (132) |
| `ThemePicker.tsx` | 580 | 403 | `GradientEditor.tsx` (112), `themePickerUtils.ts` (90) |
| `tests.ts` | 560 | 262 | `testsNormalization.ts` (343) |

**–û—Å—Ç–∞–ª–∏—Å—å (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):**
- `Timeline.tsx` (502) ‚Äî –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ TimelineContext
- `AdminContent.tsx` (479) ‚Äî –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Å–µ–∫—Ü–∏–∏

---

### CQ‚Äë2. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (P: H, E: M)

> **~1,150+ —Å—Ç—Ä–æ–∫** –º–æ–∂–Ω–æ –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å

#### A. Wrapper-—Ö—É–∫–∏ (22 —Å—Ç—Ä–æ–∫–∏)
**–ü—Ä–æ–±–ª–µ–º–∞:** `useClinicalTopics`/`useGeneralTopics` –¥—É–±–ª–∏—Ä—É—é—Ç –≤—ã–∑–æ–≤ `useCourseTopics`
```typescript
// ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
export function useClinicalTopics() {
  return useCourseTopics<ClinicalTopic>('clinical-topics', 'Clinical topics');
}
```
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useCourseTopics` –Ω–∞–ø—Ä—è–º—É—é –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–±—Ä–∏–∫—É —Ö—É–∫–æ–≤

#### B. CRUD –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ —Ö—É–∫–∞—Ö (200+ —Å—Ç—Ä–æ–∫)
**–§–∞–π–ª—ã:** `useCreateLesson.ts`, `useReorderLessons.ts`, `useTopics.ts`
**–ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è:** try/catch/finally —Å loading state, error handling, debugLog
**–†–µ—à–µ–Ω–∏–µ:**
- [ ] –°–æ–∑–¥–∞—Ç—å `src/hooks/useFirestoreCRUD.ts` ‚Äî generic —Ö—É–∫-—Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `src/lib/withErrorHandling.ts` ‚Äî –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è async –æ–ø–µ—Ä–∞—Ü–∏–π

#### C. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–∞–ª–µ–π (400+ —Å—Ç—Ä–æ–∫)
**–§–∞–π–ª—ã:** `NoteModal`, `CreateLessonModal`, `LoginModal`, `AddAdminModal`
**–ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è:** JSX layout (header, footer, overlay), —Å–æ—Å—Ç–æ—è–Ω–∏—è loading/error
**–†–µ—à–µ–Ω–∏–µ:**
- [ ] –°–æ–∑–¥–∞—Ç—å `src/components/ui/BaseModal.tsx` —Å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º layout
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–∞–ª–∏ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ BaseModal

#### D. Cloud Functions –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (300+ —Å—Ç—Ä–æ–∫)
**–§–∞–π–ª—ã:** `functions/src/index.js`, `courseAccess.ts`, `verify.ts`
**–ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è:** auth –ø—Ä–æ–≤–µ—Ä–∫–∞, super-admin –ø—Ä–æ–≤–µ—Ä–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, error wrapping
**–†–µ—à–µ–Ω–∏–µ:**
- [ ] –°–æ–∑–¥–∞—Ç—å `functions/src/lib/validators.ts` ‚Äî validateAuth, validateSuperAdmin, validateString
- [ ] –°–æ–∑–¥–∞—Ç—å `functions/src/lib/errors.ts` ‚Äî withErrorHandling wrapper

#### E. useClickOutside –ø–∞—Ç—Ç–µ—Ä–Ω
**–§–∞–π–ª—ã:** `ExportNotesButton.tsx` –∏ –¥—Ä—É–≥–∏–µ dropdown-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
**–†–µ—à–µ–Ω–∏–µ:**
- [ ] –°–æ–∑–¥–∞—Ç—å `src/hooks/useClickOutside.ts`

---

### CQ‚Äë3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Timeline —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤ (P: H, E: S)

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **JSON.parse/stringify –≤ undo/redo** (`useTimelineHistory.ts`)
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç UI –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–∞—Ö –¥–∞–Ω–Ω—ã—Ö
   - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Immer –∏–ª–∏ Web Worker –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

2. **N+1 –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–µ—Å—Ç–æ–≤** (`TestsPage.tsx`)
   - O(n) –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Firebase –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
   - [ ] –î–æ–±–∞–≤–∏—Ç—å batch –∑–∞–ø—Ä–æ—Å—ã –∏–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ store

3. **40+ props –±–µ–∑ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏** (`Timeline.tsx`)
   - –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ state ‚Üí —Ä–µ-—Ä–µ–Ω–¥–µ—Ä –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - [ ] –û–±–µ—Ä–Ω—É—Ç—å `TimelineCanvas`, `TimelineLeftPanel`, `TimelineRightPanel` –≤ `React.memo()`
   - [ ] –°–æ–∑–¥–∞—Ç—å `TimelineContext` –¥–ª—è —á–∞—Å—Ç–æ –º–µ–Ω—è—é—â–∏—Ö—Å—è –∑–Ω–∞—á–µ–Ω–∏–π

4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ render –±–µ–∑ useMemo** (`TimelineCanvas.tsx`)
   ```typescript
   // ‚ùå –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –Ω–∞ –∫–∞–∂–¥—ã–π render
   {edges.filter(...).map(...)}
   ```
   - [ ] –û–±–µ—Ä–Ω—É—Ç—å –≤ `useMemo` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

5. **Race conditions** (`useTimelineState.ts`)
   - –î–≤–∞ `setTimeout(_, 100)` –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å race conditions
   - [ ] –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ –æ–¥–∏–Ω useEffect

#### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- [ ] –ú–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å `adaptiveRadius`, `ageLabels` –≤ TimelineCanvas
- [ ] –í—ã–Ω–µ—Å—Ç–∏ `shuffleArray()` –≤ `src/utils/array.ts` (–¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ DynamicTest –∏ TestQuestionScreen)
- [ ] –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –≤ `TestCard.tsx` ‚Äî –æ–±–µ—Ä–Ω—É—Ç—å –≤ useMemo
- [ ] `buildTestChains` ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å O(n¬≤) –ø–æ–∏—Å–∫ –Ω–∞ –∏–Ω–¥–µ–∫—Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

### CQ‚Äë4. –ü–æ–∫—Ä—ã—Ç–∏–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞–º–∏ (P: M, E: L)

> **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** 7 —Ç–µ—Å—Ç-—Ñ–∞–π–ª–æ–≤, ~7% –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π

**–ü–æ–∫—Ä—ã—Ç–æ —Ç–µ—Å—Ç–∞–º–∏:**
- `SaveNoteAsEventButton`, `UserMenu.research`, `useResearchSearch`
- `ProfileStats`, `testAppearance`, `testChainHelpers`
- `functions/ensureAdmin`

**–ö—Ä–∏—Ç–∏—á–Ω–æ –Ω—É–∂–Ω—ã —Ç–µ—Å—Ç—ã:**

| –ú–æ–¥—É–ª—å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|--------|-----------|-------------|
| `useAuthStore.ts` | üî¥ HIGH | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π auth flow, —Ä–æ–ª–∏, –∫—É—Ä—Å-–¥–æ—Å—Ç—É–ø |
| `useTestStore.ts` | üî¥ HIGH | –õ–æ–≥–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, reveal-policy, –ø–æ–¥—Å—á—ë—Ç –±–∞–ª–ª–æ–≤ |
| `firestoreHelpers.ts` | üî¥ HIGH | Legacy ID mapping, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–∏–æ–¥–æ–≤ |
| `testAccess.ts` | üî¥ HIGH | –õ–æ–≥–∏–∫–∞ prerequisite, unlock conditions |
| `testResults.ts` | üü° MED | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |
| `useNotes.ts` | üü° MED | Real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è |
| `useTimeline.ts` | üü° MED | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–º–ª–∞–π–Ω–∞ |
| `courseAccess.ts` (functions) | üî¥ HIGH | Granular access control |
| `verify.ts` (functions) | üü° MED | Reconcile –æ–ø–µ—Ä–∞—Ü–∏–∏ |

**–ó–∞–¥–∞—á–∏:**
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `useAuthStore` (auth flow, —Ä–æ–ª–∏, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `useTestStore` (—Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤, reveal policy, –ø–æ–¥—Å—á—ë—Ç)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `firestoreHelpers` (canonicalizePeriodId, getPeriodDocWithAliases)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `testAccess` (isTestUnlocked, percentage checks)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è Cloud Functions (courseAccess CRUD, –≤–∞–ª–∏–¥–∞—Ü–∏—è)

---

### CQ‚Äë5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ console.* –Ω–∞—Ä—É—à–µ–Ω–∏–π (P: M, E: S)

> –°–æ–≥–ª–∞—Å–Ω–æ CLAUDE.md: ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `console.*` –Ω–∞–ø—Ä—è–º—É—é

**–§–∞–π–ª—ã —Å –Ω–∞—Ä—É—à–µ–Ω–∏—è–º–∏:**
- [ ] `src/hooks/useTopics.ts` (—Å—Ç—Ä–æ–∫–∏ 55-56, 76-77, 97) ‚Äî `console.error`, `console.log`
- [ ] `src/components/SaveNoteAsEventButton.tsx` (—Å—Ç—Ä–æ–∫–∏ 50, 64, 68) ‚Äî `console.error`
- [ ] `src/hooks/useTestProgress.ts` ‚Äî `console.error`

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `debugLog`, `debugError`, `debugWarn` –∏–∑ `@/lib/debug`

---

### üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 2026-01-08)

| –ê—Å–ø–µ–∫—Ç | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|--------|--------|-------------|
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | 8/10 | 3 –∏–∑ 5 –º–æ–Ω–æ–ª–∏—Ç–æ–≤ —Ä–∞–∑–±–∏—Ç—ã, –æ—Å—Ç–∞–ª–∏—Å—å Timeline (502) –∏ AdminContent (479) |
| Code splitting | 8/10 | Lazy loading –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| DRY | 7/10 | –°–æ–∑–¥–∞–Ω—ã BaseModal, useClickOutside, shuffleArray |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 7/10 | TimelineCanvas –æ–±—ë—Ä–Ω—É—Ç –≤ React.memo + useMemo |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 5/10 | 310 —Ç–µ—Å—Ç–æ–≤ –≤ 25 —Ñ–∞–π–ª–∞—Ö (–±—ã–ª–æ 144 –≤ 20) |
| –°–æ–±–ª—é–¥–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ | 9/10 | console.* –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã |

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ Barrel exports –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ Lazy loading —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Custom hooks –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ª–æ–≥–∏–∫–∏
- ‚úÖ Pre-commit —Ö—É–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (BaseModal)

---

## üß™ Test Queue (TQ) ‚Äî –ù–µ–Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

> **–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** 310 —Ç–µ—Å—Ç–æ–≤ –≤ 25 —Ñ–∞–π–ª–∞—Ö
> **–ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã:** testsNormalization (58), color (37), firestoreHelpers (32), removeUndefined (22), transliterate (17), themePickerUtils (24)

### TQ-1. –£—Ç–∏–ª–∏—Ç—ã (P: M, E: S)

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å |
|------|-------|-----------------|
| `theme.ts` | 148 | deriveTheme, gradientToCss, getButtonTextColor |
| `sortNotes.ts` | 62 | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º, –¥–∞—Ç–∞–º |
| `mediaUpload.ts` | 160 | validateImageFile, extractYouTubeVideoId |
| `notesExport.ts` | 77 | generateNotesMarkdown, generateNotesText |
| `topicParser.ts` | 34 | parseTopicsText, previewTopics |
| `contentHelpers.ts` | 27 | shouldShowPlaceholder, hasContent |

### TQ-2. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (P: H, E: M)

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å |
|------|-------|-----------------|
| `testResults.ts` | 115 | groupResultsByTest, —Ä–∞—Å—á—ë—Ç —Å—Ä–µ–¥–Ω–∏—Ö |
| `testAccess.ts` | 86 | isTestUnlocked, getTestLockInfo |

### TQ-3. –•—É–∫–∏ (P: M, E: L)

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|------|-------|-----------|
| `useAnswerValidation.ts` | 105 | –°—Ä–µ–¥–Ω—è—è (state machine) |
| `useNotes.ts` | 221 | –í—ã—Å–æ–∫–∞—è (Firebase mock) |

### TQ-4. Cloud Functions (P: M, E: M)

| –§–∞–π–ª | –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å |
|------|-----------------|
| `courseAccess.ts` | CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| `verify.ts` | Reconcile –ª–æ–≥–∏–∫–∞ |
