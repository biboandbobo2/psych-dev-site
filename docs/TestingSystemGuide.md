# –ì–∞–π–¥ –ø–æ —Å–∏—Å—Ç–µ–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–¢–∏–ø—ã –∏ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö](#—Ç–∏–ø—ã-–∏-–º–æ–¥–µ–ª–∏-–¥–∞–Ω–Ω—ã—Ö)
4. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
5. [API –∏ —Ñ—É–Ω–∫—Ü–∏–∏](#api-–∏-—Ñ—É–Ω–∫—Ü–∏–∏)
6. [Workflow —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–∞](#workflow-—Å–æ–∑–¥–∞–Ω–∏—è-—Ç–µ—Å—Ç–∞)
7. [Workflow –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞](#workflow-–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è-—Ç–µ—Å—Ç–∞)
8. [–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#–∏–∑–≤–µ—Å—Ç–Ω—ã–µ-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
9. [–ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#—á–µ–∫–ª–∏—Å—Ç-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
10. [–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–∏—Å—Ç–æ—Ä–∏—è-–∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- **–ê–¥–º–∏–Ω–∞–º**: —Å–æ–∑–¥–∞–≤–∞—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–°—Ç—É–¥–µ–Ω—Ç–∞–º**: –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–°–∏—Å—Ç–µ–º–µ**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç—É–ø–æ–º –∫ —É—Ä–æ–≤–Ω—è–º

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ —Å 1-20 –≤–æ–ø—Ä–æ—Å–∞–º–∏
‚úÖ –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Ä—É–±—Ä–∏–∫–∞–º (–≤–µ—Å—å –∫—É—Ä—Å –∏–ª–∏ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã)
‚úÖ –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –∫–∞–∫ "—Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å"
‚úÖ –¢—Ä–∏ —Å—Ç–∞—Ç—É—Å–∞: draft, published, unpublished
‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É—Å–ø–µ—Ö–∞/–Ω–µ—É–¥–∞—á–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–æ—Ä–æ–≥ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–ª–µ–¥—É—é—â–∏—Ö —É—Ä–æ–≤–Ω–µ–π
‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∏–∫–æ–Ω–∫–∏ –∏ —Ü–≤–µ—Ç–æ–≤–∞—è —Ç–µ–º–∞ —Ç–µ—Å—Ç–∞
‚úÖ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Firestore
‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         ADMIN FLOW                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  AdminContent.tsx                                           ‚îÇ
‚îÇ       ‚Üì [–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç]                                      ‚îÇ
‚îÇ  TestEditorModal.tsx ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí [–°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤]                 ‚îÇ
‚îÇ       ‚Üì [–í—ã–±—Ä–∞—Ç—å —Ç–µ—Å—Ç]                                      ‚îÇ
‚îÇ  TestEditorForm.tsx ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí [–†–µ–¥–∞–∫—Ç–æ—Ä —Ç–µ—Å—Ç–∞]                 ‚îÇ
‚îÇ       ‚Üì [QuestionEditor –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞]               ‚îÇ
‚îÇ       ‚Üì [–°–æ—Ö—Ä–∞–Ω–∏—Ç—å/–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å]                           ‚îÇ
‚îÇ  tests.ts (API) ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí Firestore /tests                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        STUDENT FLOW                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Profile.tsx ‚Üí [–¢–µ—Å—Ç—ã]                                      ‚îÇ
‚îÇ       ‚Üì                                                      ‚îÇ
‚îÇ  Tests.tsx ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí [–ü–æ–∫–∞–∑–∞—Ç—å published —Ç–µ—Å—Ç—ã]                ‚îÇ
‚îÇ       ‚Üì [–ö–ª–∏–∫ –Ω–∞ —Ç–µ—Å—Ç]                                      ‚îÇ
‚îÇ  DynamicTest.tsx ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí [–ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞]                 ‚îÇ
‚îÇ       ‚Üì [–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ]                                        ‚îÇ
‚îÇ  testResults.ts ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí Firestore /testResults               ‚îÇ
‚îÇ       ‚Üì                                                      ‚îÇ
‚îÇ  TestHistory.tsx ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí [–ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é]                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Firestore

```
/tests/{testId}
  - id: string
  - title: string
  - rubric: 'full-course' | AgeRange
  - prerequisiteTestId?: string
  - questionCount: number
  - questions: TestQuestion[]
  - status: 'draft' | 'published' | 'unpublished'
  - createdAt: Timestamp
  - updatedAt: Timestamp
  - createdBy: string (userId)

/testResults/{resultId}
  - userId: string
  - testId: string
  - testTitle: string
  - score: number
  - totalQuestions: number
  - percentage: number
  - completedAt: Timestamp
  - timeSpent: number (—Å–µ–∫—É–Ω–¥—ã)
```

---

## –¢–∏–ø—ã –∏ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã (`src/types/tests.ts`)

```typescript
// –†—É–±—Ä–∏–∫–∞ —Ç–µ—Å—Ç–∞
export type TestRubric = 'full-course' | AgeRange;

// –°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
export type TestStatus = 'draft' | 'published' | 'unpublished';

// –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª
export interface TestResource {
  title: string;
  url: string;
}

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
export interface TestAppearance {
  introIcon?: string;
  introDescription?: string;
  badgeIcon?: string;
  badgeLabel?: string;
  badgeGradientFrom?: string;
  badgeGradientTo?: string;
  backgroundGradientFrom?: string;
  backgroundGradientTo?: string;
  accentGradientFrom?: string;
  accentGradientTo?: string;
  bulletPoints?: string[];
  theme?: ThemeSettings;
  resolvedTheme?: DerivedTheme;
}

`theme` —Ö—Ä–∞–Ω–∏—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ—Å–µ—Ç (`presetId`), –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ overrides –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ –∏–∑ Theme Picker. `resolvedTheme` ‚Äî —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã (—Ñ–æ–Ω, primary, –±–µ–π–¥–∂), –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–∑—É –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤ UI –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏.

### –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è (`src/types/themes.ts`)

```typescript
export type Gradient = {
  type: 'linear' | 'radial';
  angle?: number;
  stops: { color: string; position: number }[];
};

export type ThemePreset = {
  id: string;
  name: string;
  mood: 'pastel' | 'calm' | 'bright' | 'neutral';
  background: Gradient;
  primary: Gradient;
  badge?: Gradient;
};

export interface ThemeSettings {
  presetId: string;
  mainColor: string;
  badgeLockedToPrimary?: boolean;
  overrides?: {
    background?: Gradient;
    primary?: Gradient;
    badge?: Gradient;
  };
}

export interface DerivedTheme {
  background: Gradient;
  primary: Gradient;
  badge: Gradient;
}
```

`ThemeSettings` —Ö—Ä–∞–Ω–∏—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ—Å–µ—Ç –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏, `DerivedTheme` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `deriveTheme`, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–π –≤ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞—Ö –∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.

// –í–æ–ø—Ä–æ—Å –≤ —Ç–µ—Å—Ç–µ
export interface TestQuestion {
  id: string; // UUID –≤–æ–ø—Ä–æ—Å–∞
  questionText: string;
  options: [string, string, string, string]; // –†–æ–≤–Ω–æ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞
  correctOptionIndex: number; // 0-3
  successMessage?: string;
  failureMessage?: string;
  successResources?: TestResource[]; // –ü–æ—è–≤—è—Ç—Å—è –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
  failureResources?: TestResource[]; // –ü–æ–∫–∞–∂–µ–º –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏
}

// –¢–µ—Å—Ç
export interface Test {
  id: string;
  title: string;
  rubric: TestRubric;
  prerequisiteTestId?: string;
  questionCount: number;
  questions: TestQuestion[];
  status: TestStatus;
  requiredPercentage?: number; // –ü–æ—Ä–æ–≥ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 70)
  appearance?: TestAppearance; // –í–∏–∑—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, –∏–∫–æ–Ω–∫–∏, —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª)
  createdAt: Date;
  updatedAt: Date;
  createdBy: string;
}

// –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–∞
export type CreateTestData = Omit<Test, 'id' | 'createdAt' | 'updatedAt' | 'questions'>;

// –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
export type UpdateTestData = Partial<Omit<Test, 'id' | 'createdAt' | 'createdBy'>>;
```

> –ü–æ—Ä–æ–≥ `requiredPercentage` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ —Ç–µ—Å—Ç–∞. –ï—Å–ª–∏ –ø–æ–ª–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî 70%.

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ (`src/lib/testResults.ts`)

```typescript
interface TestResult {
  userId: string;
  testId: string;
  testTitle: string;
  score: number;
  totalQuestions: number;
  percentage: number;
  completedAt: Date;
  timeSpent: number; // —Å–µ–∫—É–Ω–¥—ã
}
```

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. TestEditorModal (`src/components/TestEditorModal.tsx`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –∏ –∫–Ω–æ–ø–∫–æ–π —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ.

**–°–æ—Å—Ç–æ—è–Ω–∏—è**:
- `selectedTestId === null` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤
- `selectedTestId === 'new'` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–∞
- `selectedTestId === testId` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–∞

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- `loadTests()` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- `handleCreateNew()` ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ç–µ—Å—Ç–∞
- `handleSelectTest(testId)` ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ç–µ—Å—Ç–∞
- `handleDeleteTest(testId, title)` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- `handleBackToList()` ‚Äî –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É —Ç–µ—Å—Ç–æ–≤

**UI —ç–ª–µ–º–µ–Ω—Ç—ã**:
- ID —Ç–µ—Å—Ç–∞ —Å –∫–Ω–æ–ø–∫–æ–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –°—á—ë—Ç—á–∏–∫–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ, —á–µ—Ä–Ω–æ–≤–∏–∫–∏, —Å–Ω—è—Ç–æ)
- –¶–≤–µ—Ç–Ω—ã–µ –±–µ–π–¥–∂–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ (–∑–µ–ª—ë–Ω—ã–π/–∂—ë–ª—Ç—ã–π/–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è (üóëÔ∏è)

**Props**:
```typescript
interface TestEditorModalProps {
  onClose: () => void;
}
```

---

### 2. TestEditorForm (`src/components/TestEditorForm.tsx`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏ –∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏.

**–ü–æ–ª—è —Ñ–æ—Ä–º—ã**:
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
- –†—É–±—Ä–∏–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): "–ö—É—Ä—Å —Ü–µ–ª–∏–∫–æ–º" –∏–ª–∏ –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π –ø–µ—Ä–∏–æ–¥.
- ID –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ç–µ—Å—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π.
- –ü–æ—Ä–æ–≥ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è (–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–º prerequisite): 1‚Äì100%, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 70%.
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ (1‚Äì20).
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞: –±–∞–∑–æ–≤—ã–µ –ø–æ–ª—è (—ç–º–æ–¥–∑–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞, –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º, —á–µ–∫–±–æ–∫—Å ¬´–ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –±–µ–π–¥–∂ —É—Ä–æ–≤–Ω—è¬ª) + **Theme Picker**.

–°–µ–∫—Ü–∏—è ¬´–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞¬ª —Ç–µ–ø–µ—Ä—å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π:

1. **–ë–∞–∑–æ–≤—ã–µ –ø–æ–ª—è** ‚Äì —ç–º–æ–¥–∑–∏/–æ–ø–∏—Å–∞–Ω–∏–µ/–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–π–¥–∂–∞ (—Å–≤–µ—Ä—Ö—É, –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã).
2. **Theme Picker** (`src/components/theme/ThemePicker.tsx`) ‚Äì —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–π —Ç–µ–º–æ–π —Ü–µ–ª–∏–∫–æ–º:
   - –≤—ã–±–æ—Ä –ø—Ä–µ—Å–µ—Ç–∞ –∏–∑ `THEME_PRESETS` (—à–µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã—Ö –ø–∞–ª–∏—Ç—Ä);
   - ¬´–≥–ª–∞–≤–Ω—ã–π —Ü–≤–µ—Ç¬ª, –≤–ª–∏—è—é—â–∏–π –Ω–∞ –æ—Ç—Ç–µ–Ω–∫–∏ –∫–Ω–æ–ø–æ–∫/—Ñ–æ–Ω–∞;
   - –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ (—Ñ–æ–Ω, –∫–Ω–æ–ø–∫–∏, –±–µ–π–¥–∂) —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–µ;
   - —á–µ–∫–±–æ–∫—Å ¬´–ë–µ–π–¥–∂ = –∫–∞–∫ —É –∫–Ω–æ–ø–æ–∫¬ª (—Å–∏–Ω—Ö—Ä–æ–Ω–∏—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã);
   - –∫–Ω–æ–ø–∫–∏ ¬´–°–±—Ä–æ—Å–∏—Ç—å –∫ –ø—Ä–µ—Å–µ—Ç—É¬ª, ¬´–°–ª—É—á–∞–π–Ω–∞—è –≤–∞—Ä–∏–∞—Ü–∏—è¬ª, ¬´–ü–æ–¥—Ä–æ–±–Ω–µ–µ¬ª;
   - –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ ‚Äì —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ (—Ñ–æ–Ω/primary/badge), –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç JSON, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

Theme Picker —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏ —Ç–µ–º: –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è `theme` (preset + mainColor + overrides) –∏ –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π `resolvedTheme`. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Ç–µ–º–∞—Ç–∏–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ª–∏–±–æ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ü–≤–µ—Ç–æ–≤.

–°–µ–∫—Ü–∏—è **¬´–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∞¬ª** –∏ —ç–º–æ–¥–∑–∏-–ø–∏–∫–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å (`CONTROL`/`TEXTAREA`), —á—Ç–æ–±—ã –∞–¥–º–∏–Ω—Å–∫–∞—è —Ñ–æ—Ä–º–∞ –±—ã–ª–∞ —Ä–æ–≤–Ω–æ–π –∏ –Ω–µ ¬´–ø—Ä—ã–≥–∞–ª–∞¬ª.

#### ThemePicker (`src/components/theme/ThemePicker.tsx`)

- **–ü—Ä–µ—Å–µ—Ç—ã** (`THEME_PRESETS`) ‚Äì –∫–∞—Ä—Ç–æ—á–∫–∏‚Äë—Ç–∞–±–ª–µ—Ç–∫–∏ —Å –º–∏–Ω–∏-–ø—Ä–µ–≤—å—é –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞.
- **–ì–ª–∞–≤–Ω—ã–π —Ü–≤–µ—Ç** ‚Äì color input + hex-–ø–æ–ª–µ; –º–µ–Ω—è–µ—Ç –æ—Ç—Ç–µ–Ω–∫–∏ primary/background.
- **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä** ‚Äì –∫–∞—Ä—Ç–æ—á–∫–∞ 320√ó420 —Å –∫–Ω–æ–ø–∫–æ–π –∏ –±–µ–π–¥–∂–µ–º (–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞—Å—Ç).
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: —á–µ–∫–±–æ–∫—Å ¬´–ë–µ–π–¥–∂ = –∫–∞–∫ —É –∫–Ω–æ–ø–æ–∫¬ª, –∫–Ω–æ–ø–∫–∏ ¬´–°–±—Ä–æ—Å–∏—Ç—å –∫ –ø—Ä–µ—Å–µ—Ç—É¬ª –∏ ¬´–°–ª—É—á–∞–π–Ω–∞—è –≤–∞—Ä–∏–∞—Ü–∏—è¬ª.
- **–ü–æ–¥—Ä–æ–±–Ω–µ–µ** ‚Äì –∞–∫–∫–æ—Ä–¥–µ–æ–Ω —Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞–º–∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ (—Ñ–æ–Ω/primary/badge), –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å —Å—Ç–æ–ø—ã, –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç JSON –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
- Theme Picker –æ—Ç–¥–∞—ë—Ç `ThemeSettings`, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `TestAppearance.theme`; –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (`derivedTheme`) –ø–æ–ø–∞–¥–∞—é—Ç –≤ `resolvedTheme` –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–æ–≤, `DynamicTest`).

**–°–æ—Å—Ç–æ—è–Ω–∏—è**:
- `loading` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–µ—Å—Ç–∞
- `saving` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `currentStatus` ‚Äî —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∞

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- `handleQuestionCountChange(count)` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
- `handleQuestionChange(index, question)` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
- `handleQuestionDelete(index)` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
- `handleAddQuestion()` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
- `validateForPublish()` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
- `handleSaveDraft()` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫
- `handlePublish()` ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–µ—Å—Ç–∞
- `handleUnpublish()` ‚Äî —Å–Ω—è—Ç–∏–µ —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏**:
```typescript
‚úì –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –ø—É—Å—Ç–æ–µ
‚úì –ï—Å—Ç—å —Ö–æ—Ç—è –±—ã 1 –≤–æ–ø—Ä–æ—Å
‚úì –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∑–∞–ø–æ–ª–Ω–µ–Ω—ã (—Ç–µ–∫—Å—Ç + –≤—Å–µ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞)
‚úì –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ prerequisite —É–∫–∞–∑–∞–Ω –≤–∞–ª–∏–¥–Ω—ã–π –ø–æ—Ä–æ–≥ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è (1‚Äì100%)
```

**–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π**:
- –û—Ç–º–µ–Ω–∞
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ (–≤—Å–µ–≥–¥–∞)
- –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å (–µ—Å–ª–∏ –Ω–µ published) / –°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–µ—Å–ª–∏ published)

**Props**:
```typescript
interface TestEditorFormProps {
  testId: string | null; // null = —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ
  onClose: () => void;
  onSaved: () => void;
}
```

---

### 3. QuestionEditor (`src/components/QuestionEditor.tsx`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–¥–∞–∫—Ç–æ—Ä –æ–¥–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

**UI —ç–ª–µ–º–µ–Ω—Ç—ã**:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –Ω–æ–º–µ—Ä–æ–º –≤–æ–ø—Ä–æ—Å–∞ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ (‚úì/‚ö†Ô∏è)
- –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ (textarea)
- 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞ —Å radio button –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
  - –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
  - –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
  - –°—Å—ã–ª–∫–∏ –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
  - –°—Å—ã–ª–∫–∏ –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞

**–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏**:
```typescript
const isComplete =
  question.questionText.trim() !== '' &&
  question.options.every((opt) => opt.trim() !== '');
```

**Props**:
```typescript
interface QuestionEditorProps {
  question: TestQuestion;
  questionNumber: number;
  onChange: (question: TestQuestion) => void;
  onDelete: () => void;
}
```

---

### 4. DynamicTest (`src/pages/DynamicTest.tsx`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏.

**–°–æ—Å—Ç–æ—è–Ω–∏—è —ç–∫—Ä–∞–Ω–∞**:
1. **Loading** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–∞ –∏–∑ Firestore
2. **Error** ‚Äî –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–ª–∏ —Ç–µ—Å—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
3. **Start Screen** ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–µ + –∫–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å"
4. **Question Screen** ‚Äî –≤–æ–ø—Ä–æ—Å —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
5. **Finish Screen** ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞

**–°–æ—Å—Ç–æ—è–Ω–∏—è —Ç–µ—Å—Ç–∞**:
```typescript
const [test, setTest] = useState<Test | null>(null);
const [started, setStarted] = useState(false);
const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
const [score, setScore] = useState(0);
const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);
const [answerState, setAnswerState] = useState<'idle' | 'correct' | 'incorrect'>('idle');
const [showExplanation, setShowExplanation] = useState(false);
const [finished, setFinished] = useState(false);
const [startTime, setStartTime] = useState<Date | null>(null);
const [resultSaved, setResultSaved] = useState(false);
```

**–í–Ω–µ—à–Ω–∏–π –≤–∏–¥**: –¥–ª—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ, –≤–æ–ø—Ä–æ—Å–Ω–æ–≥–æ –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–æ–≤ –±–µ—Ä—É—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `test.appearance` (–∏–∫–æ–Ω–∫–∞, –±–µ–π–¥–∂, –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, —Å–ø–∏—Å–æ–∫ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π). –ï—Å–ª–∏ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª (`–í—Å–µ–≥–æ N –≤–æ–ø—Ä–æ—Å–æ–≤`, –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–æ –ø–æ—è—Å–Ω–µ–Ω–∏—è –∏ —Ç.–¥.). –¶–≤–µ—Ç–∞ –∏–∑ `appearance` —Ç–∞–∫–∂–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—É –∏ CTA-–∫–Ω–æ–ø–∫–∞–º.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∞**:
```typescript
// –¢–æ–ª—å–∫–æ published —Ç–µ—Å—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
if (loadedTest.status !== 'published') {
  setError('–¢–µ—Å—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è');
  return;
}
```

–ï—Å–ª–∏ —É —Ç–µ—Å—Ç–∞ —É–∫–∞–∑–∞–Ω `prerequisiteTestId`, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `isTestUnlocked`, –ø–µ—Ä–µ–¥–∞–≤–∞—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ (`test.requiredPercentage ?? 70`). –¢–∞–∫ –∏ –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/tests`, –∏ –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç –Ω–∞–ø—Ä—è–º—É—é —É—á–∏—Ç—ã–≤–∞—é—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ.

**–õ–æ–≥–∏–∫–∞ –æ—Ç–≤–µ—Ç–∞**:
```typescript
const handleAnswer = (optionIndex: number) => {
  if (answerState !== 'idle' || !currentQuestion) return;

  setSelectedAnswer(optionIndex);
  const isCorrect = optionIndex === currentQuestion.correctOptionIndex;

  if (isCorrect) {
    setScore(score + 1);
    setAnswerState('correct');
  } else {
    setAnswerState('incorrect');
  }

  setShowExplanation(true);
};
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**:
```typescript
useEffect(() => {
  if (finished && !resultSaved && user && startTime && test) {
    const saveResult = async () => {
      const endTime = new Date();
      const timeSpent = Math.floor((endTime.getTime() - startTime.getTime()) / 1000);
      const percentage = Math.round((score / totalQuestions) * 100);

      await saveTestResult({
        userId: user.uid,
        testId: test.id,
        testTitle: test.title,
        score,
        totalQuestions,
        percentage,
        completedAt: endTime,
        timeSpent,
      });

      setResultSaved(true);
    };

    saveResult();
  }
}, [finished, resultSaved, user, startTime, score, totalQuestions, test]);
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è**:
```typescript
const passThreshold = test.requiredPercentage ?? 70;
const passed = percentage >= passThreshold;
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏—Å—Ç–æ—Ä–∏–µ–π**:
```typescript
{user && testId && (
  <div className="mt-8">
    <TestHistory userId={user.uid} testId={testId} />
  </div>
)}
```

---

### 5. Tests (`src/pages/Tests.tsx`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.

**–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ —Ç–µ—Å—Ç–æ–≤**:
1. **Legacy —Ç–µ—Å—Ç—ã** (`COURSE_TESTS`) ‚Äî hardcoded —Ç–µ—Å—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/tests/authors`)
2. **Firestore —Ç–µ—Å—Ç—ã** ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã. –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ `prerequisiteTestId`, –æ–Ω–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É (–¥–æ —Ç—Ä—ë—Ö —É—Ä–æ–≤–Ω–µ–π). –ö–∞—Ä—Ç–æ—á–∫–∞ –Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ (`appearance`) –±–∞–∑–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è: –∏–∫–æ–Ω–∫—É, –æ–ø–∏—Å–∞–Ω–∏–µ, –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ —Å–ø–∏—Å–æ–∫ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤–Ω—É—Ç—Ä–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É –∑–∞–ø—É—Å–∫–∞; –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ `üîí` —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π –æ —Ç—Ä–µ–±—É–µ–º–æ–º –ø—Ä–æ—Ü–µ–Ω—Ç–µ.

**–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤**:
```typescript
useEffect(() => {
  const loadTests = async () => {
    try {
      setLoadingTests(true);
      const tests = await getPublishedTests();
      setFirestoreTests(tests);
      if (user) {
        const unlockStatus: Record<string, boolean> = {};
        for (const test of tests) {
          unlockStatus[test.id] = await isTestUnlocked(
            user.uid,
            test.prerequisiteTestId,
            test.requiredPercentage ?? 70
          );
        }
        setTestUnlockStatus(unlockStatus);
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–æ–≤:', error);
    } finally {
      setLoadingTests(false);
    }
  };

  loadTests();
}, [user]);
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞**: –µ—Å–ª–∏ —Ç–µ—Å—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –∫–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π –æ —Ç—Ä–µ–±—É–µ–º–æ–º –ø—Ä–æ—Ü–µ–Ω—Ç–µ. –ü–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è `requiredPercentage` –∫–Ω–æ–ø–∫–∞ —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å—Å—ã–ª–∫–æ–π.

**–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–æ —Ä—É–±—Ä–∏–∫–∞–º**:
```typescript
function getTestMetadata(rubric: string): { icon: string; color: string; description: string } {
  if (rubric === 'full-course') {
    return {
      icon: 'üéì',
      color: 'from-indigo-500 to-indigo-600',
      description: '–¢–µ—Å—Ç –ø–æ –≤—Å–µ–º—É –∫—É—Ä—Å—É –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è',
    };
  }

  // –î–ª—è –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
  const label = AGE_RANGE_LABELS[rubric as keyof typeof AGE_RANGE_LABELS];
  return {
    icon: 'üìñ',
    color: 'from-teal-500 to-teal-600',
    description: label ? `–¢–µ—Å—Ç –ø–æ –ø–µ—Ä–∏–æ–¥—É: ${label}` : '–¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç',
  };
}
```

**–ë–µ–π–¥–∂ "–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å"**:
```typescript
{test.prerequisiteTestId && (
  <div className="mt-2">
    <span className="inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs font-semibold">
      –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
    </span>
  </div>
)}
```

---

### 6. TestHistory (`src/components/TestHistory.tsx`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∫–∞–∑ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π —Ç–µ—Å—Ç–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—ã (userId, testId)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã, –ø—Ä–æ—Ü–µ–Ω—Ç–∞, –≤—Ä–µ–º–µ–Ω–∏
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è (–∑–µ–ª—ë–Ω—ã–π ‚â•70%, –∂—ë–ª—Ç—ã–π <70%)

**Props**:
```typescript
interface TestHistoryProps {
  userId: string;
  testId: string;
}
```

---

## API –∏ —Ñ—É–Ω–∫—Ü–∏–∏

### `src/lib/tests.ts`

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π `/tests` –≤ Firestore.

#### `getAllTests(): Promise<Test[]>`
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤).

```typescript
const testsRef = collection(db, 'tests');
const q = query(testsRef, orderBy('updatedAt', 'desc'));
const snapshot = await getDocs(q);
return snapshot.docs.map(doc => firestoreToTest(doc.id, doc.data()));
```

#### `getPublishedTests(): Promise<Test[]>`
–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤).

```typescript
const q = query(
  testsRef,
  where('status', '==', 'published'),
  orderBy('updatedAt', 'desc')
);
```

#### `getTestById(testId: string): Promise<Test | null>`
–ü–æ–ª—É—á–∏—Ç—å —Ç–µ—Å—Ç –ø–æ ID.

```typescript
const testRef = doc(db, 'tests', testId);
const snapshot = await getDoc(testRef);
return snapshot.exists() ? firestoreToTest(snapshot.id, snapshot.data()) : null;
```

#### `createTest(data: CreateTestData, userId: string): Promise<string>`
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç.

```typescript
const testsRef = collection(db, 'tests');
const { appearance, ...rest } = testData;
const data = removeUndefined({
  ...rest,
  questions: [],
  requiredPercentage: rest.requiredPercentage ?? 70,
  createdAt: serverTimestamp(),
  updatedAt: serverTimestamp(),
  createdBy: userId,
  appearance: sanitizeAppearanceForWrite(appearance),
});
const docRef = await addDoc(testsRef, data);
return docRef.id;
```

`sanitizeAppearanceForWrite` –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è: –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–±—Ä–µ–∑–∞–µ—Ç –ø—Ä–æ–±–µ–ª—ã –∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ –ø—É–Ω–∫—Ç—ã —Å–ø–∏—Å–∫–∞.

#### `updateTest(testId: string, updates: UpdateTestData): Promise<void>`
–û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞.

```typescript
const testRef = doc(db, 'tests', testId);
await updateDoc(testRef, {
  ...updates,
  updatedAt: serverTimestamp(),
});
```

#### `updateTestQuestions(testId: string, questions: TestQuestion[]): Promise<void>`
–û–±–Ω–æ–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã —Ç–µ—Å—Ç–∞.

```typescript
await updateDoc(testRef, {
  questions: questions.map(q => removeUndefined(q)),
  questionCount: questions.length,
  updatedAt: serverTimestamp(),
});
```

#### `deleteTest(testId: string): Promise<void>`
–£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç.

```typescript
const testRef = doc(db, 'tests', testId);
await deleteDoc(testRef);
```

### `src/utils/testAppearance.ts`

- `mergeAppearance(appearance?)` —Å–æ–≤–º–µ—â–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å `DEFAULT_TEST_APPEARANCE`, –º–∏–≥—Ä–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –≤ `ThemeSettings` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π `resolvedTheme`.
- `createGradient(from?, to?, gradient?)` —É–º–µ–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å CSS –∫–∞–∫ –∏–∑ –ø–∞—Ä—ã —Ü–≤–µ—Ç–æ–≤, —Ç–∞–∫ –∏ –∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `Gradient`.
- –≠–∫—Å–ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–¥–µ—Ä–∂–∏—Ç preset + mainColor, —á—Ç–æ–±—ã Theme Picker —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª –≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

### `src/constants/themePresets.ts`

–ú–∞—Å—Å–∏–≤ `THEME_PRESETS` (—à–µ—Å—Ç—å –ø—Ä–µ—Å–µ—Ç–æ–≤: pastel-sky, fresh-mint, peach-sunset, lavender-calm, coral-pop, neutral-slate). –ö–∞–∂–¥—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç mood –∏ —Ç—Ä–∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ (—Ñ–æ–Ω/primary/badge).

### `src/utils/theme.ts`

- `deriveTheme`, `findPresetById`, `getPresetDefaultMainColor`.
- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: `gradientToCss`, `cloneGradient`, `firstAndLastStops`, `getButtonTextColor`.

### `src/utils/color.ts`

–ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ü–≤–µ—Ç–∞–º–∏: –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è HEX‚ÜîRGB‚ÜîHSL, `shade`, `mix`, `getContrastRatio`, `getAccessibleTextColor`.

#### `publishTest(testId: string): Promise<void>`
–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–µ—Å—Ç (–∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ 'published').

```typescript
await updateTest(testId, { status: 'published' });
```

#### `unpublishTest(testId: string): Promise<void>`
–°–Ω—è—Ç—å —Ç–µ—Å—Ç —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ 'unpublished').

```typescript
await updateTest(testId, { status: 'unpublished' });
```

---

### `src/lib/testResults.ts`

–û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `/testResults`.

#### `saveTestResult(result: TestResult): Promise<void>`
–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞.

```typescript
const resultsRef = collection(db, 'testResults');
await addDoc(resultsRef, {
  ...result,
  completedAt: Timestamp.fromDate(result.completedAt),
});
```

#### `getTestResults(userId: string, testId: string): Promise<TestResult[]>`
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –ø–∞—Ä—ã (userId, testId).

```typescript
const resultsRef = collection(db, 'testResults');
const q = query(
  resultsRef,
  where('userId', '==', userId),
  where('testId', '==', testId),
  orderBy('completedAt', 'desc')
);
```

---

## Workflow —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–∞

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤

```
/admin/content ‚Üí [–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç] ‚Üí TestEditorModal –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç

```
TestEditorModal ‚Üí [+ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç] ‚Üí TestEditorForm (testId = 'new')
```

### –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

```typescript
// –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- –ù–∞–∑–≤–∞–Ω–∏–µ: "–¢–µ—Å—Ç –ø–æ –ø–µ—Ä–∏–æ–¥—É –º–ª–∞–¥–µ–Ω—á–µ—Å—Ç–≤–∞"
- –†—É–±—Ä–∏–∫–∞: "infancy" –∏–ª–∏ "full-course"

// –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
- ID –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ç–µ—Å—Ç–∞: —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
- –ü–æ—Ä–æ–≥ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è: 70 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è 1‚Äì100 –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–º prerequisite
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤: 10 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### –®–∞–≥ 4: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:

```typescript
1. –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
2. –ß–µ—Ç—ã—Ä–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
3. –í—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (radio button)
4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ö–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
5. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ö–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
6. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°—Å—ã–ª–∫–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
7. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°—Å—ã–ª–∫–∏ –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –æ—à–∏–±–∫–∏
```

–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úì –ó–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ ‚Äî –≤–æ–ø—Ä–æ—Å –∑–∞–ø–æ–ª–Ω–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚ö†Ô∏è –ñ—ë–ª—Ç—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ‚Äî –Ω–µ –≤—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### –®–∞–≥ 5: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```
[–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫] ‚Üí createTest() ‚Üí Firestore
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –°–æ–∑–¥–∞—ë—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç –≤ `/tests`
- –°—Ç–∞—Ç—É—Å = 'draft'
- –¢–µ—Å—Ç –ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç—É–¥–µ–Ω—Ç–∞–º

### –®–∞–≥ 6: –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–µ—Å—Ç

```
[–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å] ‚Üí validateForPublish() ‚Üí publishTest() ‚Üí Firestore
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:
- –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ
- –ï—Å—Ç—å —Ö–æ—Ç—è –±—ã 1 –≤–æ–ø—Ä–æ—Å
- –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ 'published'
- –¢–µ—Å—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ `/tests` –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- –¢–µ—Å—Ç –º–æ–∂–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å

### –®–∞–≥ 7: –°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```
[–°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏] ‚Üí unpublishTest() ‚Üí Firestore
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ 'unpublished'
- –¢–µ—Å—Ç –∏—Å—á–µ–∑–∞–µ—Ç —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/tests`
- –¢–µ—Å—Ç –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è, –º–æ–∂–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞

---

## Workflow –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞

### –®–∞–≥ 1: –í—ã–±–æ—Ä —Ç–µ—Å—Ç–∞

```
Profile ‚Üí [–¢–µ—Å—Ç—ã] ‚Üí Tests.tsx ‚Üí –°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤
```

–°—Ç—É–¥–µ–Ω—Ç –≤–∏–¥–∏—Ç:
- Legacy —Ç–µ—Å—Ç—ã (hardcoded)
- –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ Firestore —Ç–µ—Å—Ç—ã

### –®–∞–≥ 2: –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ç–µ—Å—Ç—É

```
[–ö–ª–∏–∫ –Ω–∞ —Ç–µ—Å—Ç] ‚Üí /tests/dynamic/{testId} ‚Üí DynamicTest.tsx
```

### –®–∞–≥ 3: –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç"

```typescript
const handleStart = () => {
  setStarted(true);
  setStartTime(new Date());
};
```

### –®–∞–≥ 4: –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:

1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
   - –ù–æ–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ (X –∏–∑ Y)
   - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
   - –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
   - 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞

2. –°—Ç—É–¥–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç –æ—Ç–≤–µ—Ç:
   ```typescript
   [–ö–ª–∏–∫ –Ω–∞ –≤–∞—Ä–∏–∞–Ω—Ç] ‚Üí handleAnswer(optionIndex)
   ```

3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
   - ‚úì –ó–µ–ª—ë–Ω–∞—è –æ–±–ª–∞—Å—Ç—å ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - ‚úï –ö—Ä–∞—Å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ö–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã)
   - –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã)
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (–µ—Å–ª–∏ –æ—à–∏–±–∫–∞)

4. –ö–Ω–æ–ø–∫–∞ "–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å" / "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç"
   ```typescript
   [–ö–ª–∏–∫] ‚Üí handleNext()
   ```

### –®–∞–≥ 5: –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω

–ü–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:

1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
   ```typescript
   useEffect(() => {
     if (finished && !resultSaved) {
       saveTestResult({...});
     }
   }, [finished]);
   ```

2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
   - –ò–∫–æ–Ω–∫–∞ üéâ (–µ—Å–ª–∏ ‚â•70%) –∏–ª–∏ üìö (–µ—Å–ª–∏ <70%)
   - "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!" –∏–ª–∏ "–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω"
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: X / Y
   - –ü—Ä–æ—Ü–µ–Ω—Ç: Z%
   - –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–π –ø–æ—Ä–æ–≥: passThreshold%
   - –ö–Ω–æ–ø–∫–∏: "–ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑" | "–î—Ä—É–≥–∏–µ —Ç–µ—Å—Ç—ã"
   - –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è)

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. Timestamp Conversion Error

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `serverTimestamp()` –≤ Firestore –∑–Ω–∞—á–µ–Ω–∏–µ —Å–Ω–∞—á–∞–ª–∞ `null`, –ø–æ—Ç–æ–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `Timestamp`.

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `toDate()`:

```typescript
function firestoreToTest(id: string, data: any): Test {
  const toDate = (timestamp: any): Date => {
    if (!timestamp) return new Date();
    if (timestamp.toDate && typeof timestamp.toDate === 'function') {
      return timestamp.toDate();
    }
    if (timestamp instanceof Date) return timestamp;
    return new Date();
  };

  return {
    // ...
    createdAt: toDate(data.createdAt),
    updatedAt: toDate(data.updatedAt),
  };
}
```

**–§–∞–π–ª**: `src/lib/tests.ts:24-34`

---

### 2. Legacy —Ç–µ—Å—Ç—ã vs Firestore —Ç–µ—Å—Ç—ã

**Legacy —Ç–µ—Å—Ç—ã**:
- Hardcoded –≤ `src/pages/Tests.tsx:21-80`
- –†–æ—É—Ç—ã: `/tests/authors`, `/tests/authors/level2`, `/tests/authors/level3`
- –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: `AuthorsTest.tsx`, `AuthorsTestLevel2.tsx`, etc.

**Firestore —Ç–µ—Å—Ç—ã**:
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ `/tests`
- –†–æ—É—Ç: `/tests/dynamic/:testId`
- –û–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: `DynamicTest.tsx`

**–í–∞–∂–Ω–æ**: Legacy —Ç–µ—Å—Ç—ã –ù–ï –º–∏–≥—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –≠—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞.

---

### 3. –¢—Ä–∏ —Å—Ç–∞—Ç—É—Å–∞ —Ç–µ—Å—Ç–∞

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –í–∏–¥–∏–º–æ—Å—Ç—å | –¶–≤–µ—Ç |
|--------|----------|-----------|------|
| `draft` | –ß–µ—Ä–Ω–æ–≤–∏–∫ | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã | üü° –ñ—ë–ª—Ç—ã–π |
| `published` | –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω | –í—Å–µ —Å—Ç—É–¥–µ–Ω—Ç—ã | üü¢ –ó–µ–ª—ë–Ω—ã–π |
| `unpublished` | –°–Ω—è—Ç —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã | üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π |

**–ü–µ—Ä–µ—Ö–æ–¥—ã**:
```
draft ‚Üí published ‚úÖ
published ‚Üí unpublished ‚úÖ
unpublished ‚Üí published ‚úÖ
published ‚Üí draft ‚ùå (–Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ)
```

---

### 4. Prerequisite Tests

**–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å**:

1. –°–æ–∑–¥–∞—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç (Test A).
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ ID –∏–∑ —Å–ø–∏—Å–∫–∞ –≤ –∞–¥–º–∏–Ω–∫–µ.
3. –°–æ–∑–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å (Test B) –∏ —É–∫–∞–∑–∞—Ç—å `prerequisiteTestId = <ID Test A>`.
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—Ç—å `requiredPercentage` (1‚Äì100, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 70).
5. –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å Test B.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ—Å—Ç—É–ø**:
- –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/tests` –∫–∞—Ä—Ç–æ—á–∫–∞ Test B –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–µ–π–¥–∂ "–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å", –ø–æ–¥—Å–∫–∞–∑–∫—É —Å –∏–º–µ–Ω–µ–º prerequisite –∏ –Ω—É–∂–Ω—ã–º –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º.
- –ü–æ–∫–∞ –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Test A –Ω–∏–∂–µ `requiredPercentage`, –∫–Ω–æ–ø–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
- –ü–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π.
- –í `DynamicTest` –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 70% ‚Äî —Å–º. TODO –≤ –∫–æ–¥–µ).

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**: –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ Test B –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∏ —Ç—Ä–µ–±—É–µ–º—ã–π –ø–æ—Ä–æ–≥.

---

### 5. –õ–∏–º–∏—Ç—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ |
|----------|-------------|
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ | 1-20 |
| –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞ | –†–æ–≤–Ω–æ 4 |
| –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç | –†–æ–≤–Ω–æ 1 |

---

## –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞

- [ ] –û—Ç–∫—Ä—ã—Ç—å `/admin/content`
- [ ] –ù–∞–∂–∞—Ç—å "–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç"
- [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ
- [ ] –í—ã–±—Ä–∞—Ç—å —Ä—É–±—Ä–∏–∫—É
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£–∫–∞–∑–∞—Ç—å prerequisiteTestId
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å requiredPercentage (–µ—Å–ª–∏ –µ—Å—Ç—å prerequisite)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã:
  - [ ] –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
  - [ ] 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
  - [ ] –í—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
  - [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  - [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
  - [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –æ—à–∏–±–∫–∏
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫ (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)
- [ ] –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–µ—Å—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/tests`
- [ ] –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞

- [ ] –û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç –∏–∑ —Å–ø–∏—Å–∫–∞
- [ ] –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É)
- [ ] –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å (–µ—Å–ª–∏ —Ç–µ—Å—Ç —É–∂–µ –±—ã–ª –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω)

### –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞

- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤
- [ ] –ù–∞–∂–∞—Ç—å üóëÔ∏è –Ω–∞ –Ω—É–∂–Ω–æ–º —Ç–µ—Å—Ç–µ
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–µ—Å—Ç –∏—Å—á–µ–∑

### –°–Ω—è—Ç–∏–µ —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

- [ ] –û—Ç–∫—Ä—ã—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç
- [ ] –ù–∞–∂–∞—Ç—å "–°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏"
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–µ—Å—Ç –∏—Å—á–µ–∑ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/tests`
- [ ] –í —Å–ø–∏—Å–∫–µ —Ç–µ—Å—Ç–æ–≤ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ "–°–Ω—è—Ç–æ"

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2025-11-06: Theme Picker –∏ –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

**–î–æ–±–∞–≤–ª–µ–Ω–æ**:
- `src/constants/themePresets.ts` ‚Äî —à–µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤ (—Ñ–æ–Ω + primary + –±–µ–π–¥–∂) –¥–ª—è Theme Picker.
- `src/types/themes.ts` ‚Äî —Ç–∏–ø—ã `Gradient`, `ThemePreset`, `ThemeSettings`, `DerivedTheme`.
- `src/utils/color.ts` –∏ `src/utils/theme.ts` ‚Äî —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ü–≤–µ—Ç–∞–º–∏/–≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ `deriveTheme`, `getButtonTextColor`.
- `src/components/theme/ThemePicker.tsx` ‚Äî –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–æ–≤–æ—á–Ω—ã–π –±–ª–æ–∫ —Å –ø—Ä–µ—Å–µ—Ç–∞–º–∏, –≤—ã–±–æ—Ä–æ–º –≥–ª–∞–≤–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞, –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤.

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**:
- `src/components/TestEditorForm.tsx` ‚Äî —Å–µ–∫—Ü–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ Theme Picker, –±–∞–∑–æ–≤—ã–µ –ø–æ–ª—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã, –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ ¬´–°–±—Ä–æ—Å–∏—Ç—å –∫ –ø—Ä–µ—Å–µ—Ç—É¬ª –∏ ¬´–°–ª—É—á–∞–π–Ω–∞—è –≤–∞—Ä–∏–∞—Ü–∏—è¬ª.
- `src/utils/testAppearance.ts` ‚Äî `mergeAppearance` –º–∏–≥—Ä–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `ThemeSettings` –∏ `resolvedTheme`; `createGradient` —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–±—ä–µ–∫—Ç–æ–º `Gradient`.
- `src/pages/DynamicTest.tsx`, `src/pages/Tests.tsx` ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç `appearance.resolvedTheme` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤.
- `docs/TestingSystemGuide.md` ‚Äî –æ–ø–∏—Å–∞–Ω—ã –Ω–æ–≤—ã–µ —Ç–∏–ø—ã, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ API.

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –Ω—é–∞–Ω—Å—ã**:
- Theme Picker –Ω–µ –º–µ–Ω—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–æ–∫–∞ –∞–¥–º–∏–Ω –Ω–µ –≤—ã–±–µ—Ä–µ—Ç –ø—Ä–µ—Å–µ—Ç/—Ü–≤–µ—Ç.
- –ö–æ–Ω—Ç—Ä–∞—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ primary-–≥—Ä–∞–¥–∏–µ–Ω—Ç–µ; –ø—Ä–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–¥–æ–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –æ—Ç—Ç–µ–Ω–æ–∫.

### 2025-11-03: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –ø–æ—Ä–æ–≥–∏

**–î–æ–±–∞–≤–ª–µ–Ω–æ**:
- `successResources[]` / `failureResources[]` –≤ `TestQuestion` –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Ö –≤ `DynamicTest` (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏—Å–∫–∏ —Å—Å—ã–ª–æ–∫ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞).
- –ü–æ–ª–µ `requiredPercentage` –≤ `Test` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–∏–ø–æ–≤, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ UI (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 70%).
- –ù–æ–≤—ã–µ —Å–µ–∫—Ü–∏–∏ –≤ `QuestionEditor` –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –≤–µ—Ä–Ω–æ–≥–æ/–Ω–µ–≤–µ—Ä–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞.
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –ø–æ—Ä–æ–≥–∞ –≤ `TestEditorForm` (—Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ –∑–∞–¥–∞–Ω prerequisite) –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞.
- –í—ã–≤–æ–¥ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –ø–æ—Ä–æ–≥–∞ –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —ç–∫—Ä–∞–Ω–µ —Ç–µ—Å—Ç–∞.
- `TestAppearance` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –±–ª–æ–∫ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ: –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∏–∫–æ–Ω–∫—É, –±–µ–π–¥–∂, –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã —Ñ–æ–Ω–∞/–∫–Ω–æ–ø–æ–∫ –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π; `DynamicTest` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**:
- `src/lib/tests.ts` ‚Äî –¥–µ—Ñ–æ–ª—Ç `requiredPercentage` –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏/—Å–æ–∑–¥–∞–Ω–∏–∏, —É–¥–∞–ª–µ–Ω–∏–µ `undefined` –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é.
- `src/lib/testAccess.ts` ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–∞.
- `src/pages/Tests.tsx` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞, –ø–æ–¥—Å–∫–∞–∑–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è prerequisite –∏ threshold.
- `src/pages/DynamicTest.tsx` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã; —Å—Ç–∞—Ä—Ç–æ–≤—ã–π/—Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω—ã –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∏—Å–ø–æ–ª—å–∑—É—é—Ç `appearance`, –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ –ø–æ—Ä–æ–≥ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è.
- `scripts/migrateAuthorsTests.ts` ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è —Ç—Ä—ë—Ö —É—Ä–æ–≤–Ω–µ–π —Ç–µ—Å—Ç–∞ ¬´–ê–≤—Ç–æ—Ä—ã –∏ —Ç–µ–æ—Ä–∏–∏¬ª –¥–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –ø–æ –∞–≤—Ç–æ—Ä–∞–º, –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç 100% –¥–ª—è —É—Ä–æ–≤–Ω–µ–π 2 –∏ 3 –∏ –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ (–∏–∫–æ–Ω–∫–∏, –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, —Å–ø–∏—Å–æ–∫ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π).
- `src/pages/Tests.tsx` ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä: —Ü–µ–ø–æ—á–∫–∏ —Ç–µ—Å—Ç–æ–≤ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É, –∫–Ω–æ–ø–∫–∏ —É—Ä–æ–≤–Ω–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è, –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π layout –∫–∞–∫ —É legacy‚Äë–≤–µ—Ä—Å–∏–∏.
- `src/components/TestEditorForm.tsx` ‚Äî –≤ –ø–æ–ª–µ ¬´–ò–∫–æ–Ω–∫–∞¬ª –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–ø–∞–¥–∞—é—â–∏–π –≤—ã–±–æ—Ä —ç–º–æ–¥–∑–∏ (–±–æ–ª—å—à–∞—è —Å–µ—Ç–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤).
- `docs/TestingSystemGuide.md` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã –ø—Ä–æ —Ç–∏–ø—ã, —Ä–µ–¥–∞–∫—Ç–æ—Ä, –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ, prerequisite.

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –Ω—é–∞–Ω—Å—ã**:
- –ü—Ä–∏ –ø—Ä—è–º–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ `DynamicTest` –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç 70% ‚Äî —Å–º. TODO –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ.
- –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ —Å—Ç–æ–∏—Ç –≤—ã–Ω–µ—Å—Ç–∏ –≤ –º–æ–¥—É–ª—å –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–∞–≤–∫–µ).

### 2024-11-03: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á

**–°–æ–∑–¥–∞–Ω–æ**:
- `src/lib/testAccess.ts` ‚Äî –º–æ–¥—É–ª—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ—Å—Ç–∞–º —Å prerequisite
  - `isTestUnlocked()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `getTestLockInfo()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
- `scripts/migrateAuthorsTests.ts` ‚Äî —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ legacy —Ç–µ—Å—Ç–æ–≤ –≤ Firestore
- `firestore.indexes.json` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω –∏–Ω–¥–µ–∫—Å –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `tests`

**–î–æ–±–∞–≤–ª–µ–Ω–æ**:
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è legacy —Ç–µ—Å—Ç–æ–≤**: –í—Å–µ 3 —É—Ä–æ–≤–Ω—è —Ç–µ—Å—Ç–∞ "–ê–≤—Ç–æ—Ä—ã –∏ —Ç–µ–æ—Ä–∏–∏" –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ Firestore
  - Level 1: 10 –≤–æ–ø—Ä–æ—Å–æ–≤ "–ê–≤—Ç–æ—Ä—ã –∏ —Ç–µ—Ä–º–∏–Ω—ã"
  - Level 2: 10 –≤–æ–ø—Ä–æ—Å–æ–≤ "–¶–∏—Ç–∞—Ç—ã" (prerequisite: Level 1)
  - Level 3: 10 –≤–æ–ø—Ä–æ—Å–æ–≤ "–¢–µ—Ä–º–∏–Ω—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ" (prerequisite: Level 2)
- ‚úÖ **–õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ prerequisite —Ç–µ—Å—Ç–æ–≤**:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/tests`
  - –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ (üîí overlay)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç –Ω–∞–ø—Ä—è–º—É—é –ø–æ URL
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/tests` –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
  - –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚â•70% –Ω–∞ prerequisite —Ç–µ—Å—Ç–µ
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–π**:
  - `isTestTitleUnique()` –≤ `src/lib/tests.ts`
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∞
  - Case-insensitive —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
  - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ—Å—Ç–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- Firestore –∏–Ω–¥–µ–∫—Å –¥–ª—è query: `status == 'published' && orderBy('updatedAt', 'desc')`

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**:
- `src/pages/Tests.tsx`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  - –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (Link –∏–ª–∏ div) –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
  - –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- `src/pages/DynamicTest.tsx`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ prerequisite –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π —Ç–µ—Å—Ç–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
- `src/components/TestEditorForm.tsx`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
- `README.md` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
- `docs/TestingSystemGuide.md` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**:
- Missing Firestore index error –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ `<a>` —Ç–µ–≥–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/tests` (–¥–ª—è –∫–Ω–æ–ø–æ–∫ level2/level3)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**:
- –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Firebase Admin SDK
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Application Default Credentials (gcloud)
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç legacy —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç TestQuestion
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∫–∞–∫ successMessage/failureMessage

### 2024-11-02: –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–æ–∑–¥–∞–Ω–æ**:
- `src/types/tests.ts` ‚Äî —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- `src/lib/tests.ts` ‚Äî API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ—Å—Ç–∞–º–∏
- `src/components/TestEditorModal.tsx` ‚Äî –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤
- `src/components/TestEditorForm.tsx` ‚Äî —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–∞
- `src/components/QuestionEditor.tsx` ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–∞
- `src/pages/DynamicTest.tsx` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
- `src/pages/Tests.tsx` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ Firestore —Ç–µ—Å—Ç–æ–≤

**–î–æ–±–∞–≤–ª–µ–Ω–æ**:
- –†–æ—É—Ç `/tests/dynamic/:testId`
- –¢—Ä–∏ —Å—Ç–∞—Ç—É—Å–∞: draft, published, unpublished
- ID —Ç–µ—Å—Ç–∞ —Å –∫–Ω–æ–ø–∫–æ–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É—Å–ø–µ—Ö–∞/–Ω–µ—É–¥–∞—á–∏
- –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**:
- Timestamp conversion error –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ—Å—Ç–æ–≤
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Firestore Timestamp –≤ Date

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- Legacy —Ç–µ—Å—Ç—ã –Ω–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã *(—Ä–µ—à–µ–Ω–æ 2024-11-03)*
- –ù–µ—Ç –ª–æ–≥–∏–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ prerequisiteTestId *(—Ä–µ—à–µ–Ω–æ 2024-11-03)*
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ (drag & drop)
- –ù–µ—Ç –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞ —Ç–µ—Å—Ç–æ–≤

---

## Roadmap (–±—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–∫—Ä–∏—Ç–∏—á–Ω–æ)
- [x] ~~–ú–∏–≥—Ä–∞—Ü–∏—è legacy —Ç–µ—Å—Ç–æ–≤ –≤ Firestore~~ ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ 2024-11-03 —á–∞—Å—Ç—á–Ω–æ
- [x] ~~–õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ prerequisite —Ç–µ—Å—Ç–æ–≤~~ ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ 2024-11-03
- [x] ~~–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–π —Ç–µ—Å—Ç–æ–≤~~ ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ 2024-11-03

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–≤–∞–∂–Ω–æ)
- [ ] Drag & drop –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –ü–æ–∏—Å–∫/—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –≤ —Å–ø–∏—Å–∫–µ
- [ ] –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ (duplicate)
- [ ] –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ—Å—Ç–∞ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (—É–ª—É—á—à–µ–Ω–∏—è)
- [ ] –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç —Ç–µ—Å—Ç–æ–≤ (JSON)
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–µ—Å—Ç–∞–º (—Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª, –≤—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è)
- [ ] –ë–æ–ª—å—à–µ —Ç–∏–ø–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ (multiple choice, true/false, matching)
- [ ] –†–µ–∂–∏–º "—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞" (–±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
- [ ] –¢–∞–π–º–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4 (nice to have)
- [ ] Rich text –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–∞—Ä—Ç–∏–Ω–∫–∏)
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏–∏/—Ç–µ–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- [ ] –†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –ø–æ—Ä—è–¥–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –ø–æ—Ä—è–¥–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –ü–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –≤ –∫–æ–Ω—Ü–µ (review mode)

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- Firestore docs: https://firebase.google.com/docs/firestore
- React Router params: https://reactrouter.com/en/main/hooks/use-params
- TypeScript utility types: https://www.typescriptlang.org/docs/handbook/utility-types.html

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-11-03
