# Timeline Guide

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `src/pages/Timeline.tsx` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.

## –û–±–∑–æ—Ä

- –î–æ—Å—Ç—É–ø–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ –º–∞—Ä—à—Ä—É—Ç—É `/timeline`.
- –†–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–∞–∫ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π `SVG`‚Äë—Ö–æ–ª—Å—Ç —Å –ø–∞–Ω–µ–ª—è–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–µ–≤–∞ –∏ —Å–ø—Ä–∞–≤–∞.
- –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è, –ª–∏—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–µ—Ç–∫–∏ —Ä–∞–∑–≤–∏—Ç–∏—è.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

–ö–æ–¥ —Ç–∞–π–º–ª–∞–π–Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –≤ –º–æ–¥—É–ª–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏:

```
src/pages/
‚îú‚îÄ‚îÄ Timeline.tsx                  # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (~1835 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ timeline/                     # –ú–æ–¥—É–ª–∏ —Ç–∞–π–º–ª–∞–π–Ω–∞
    ‚îú‚îÄ‚îÄ index.ts                  # –≠–∫—Å–ø–æ—Ä—Ç—ã –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
    ‚îú‚îÄ‚îÄ types.ts                  # TypeScript —Ç–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
    ‚îú‚îÄ‚îÄ constants.ts              # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (—Ü–≤–µ—Ç–∞, —Ä–∞–∑–º–µ—Ä—ã, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
    ‚îú‚îÄ‚îÄ utils.ts                  # –£—Ç–∏–ª–∏—Ç—ã (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –ø–∞—Ä—Å–∏–Ω–≥)
    ‚îú‚îÄ‚îÄ components/
    ‚îÇ   ‚îî‚îÄ‚îÄ IconPickerButton.tsx  # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ –ø–∏–∫—Ç–æ–≥—Ä–∞–º–º
    ‚îî‚îÄ‚îÄ hooks/
        ‚îî‚îÄ‚îÄ useTimelineHistory.ts # –•—É–∫ –¥–ª—è undo/redo —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
```

### –ú–æ–¥—É–ª–∏

**types.ts** - –í—Å–µ TypeScript —Ç–∏–ø—ã:
- `Sphere` - —Å—Ñ–µ—Ä—ã –∂–∏–∑–Ω–∏ (–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –∫–∞—Ä—å–µ—Ä–∞, —Å–µ–º—å—è –∏ —Ç.–¥.)
- `NodeT` - —Å–æ–±—ã—Ç–∏–µ –Ω–∞ —Ç–∞–π–º–ª–∞–π–Ω–µ
- `EdgeT` - –≤–µ—Ç–∫–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –ª–∏–Ω–∏—è –∂–∏–∑–Ω–∏)
- `BirthDetails` - –¥–µ—Ç–∞–ª–∏ —Ä–æ–∂–¥–µ–Ω–∏—è
- `TimelineData` - –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–∞–π–º–ª–∞–π–Ω–∞
- `HistoryState` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è undo/redo
- `SaveStatus` - —Å—Ç–∞—Ç—É—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `Transform` - —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è SVG-—Ö–æ–ª—Å—Ç–∞

**constants.ts** - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- `YEAR_PX` - –ø–∏–∫—Å–µ–ª–∏ –Ω–∞ –≥–æ–¥ (80px)
- `LINE_X_POSITION` - X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–∏–Ω–∏–∏ (2000px)
- `NODE_RADIUS`, `MIN_SCALE`, `MAX_SCALE` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `SPHERE_META` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—Ñ–µ—Ä (—Ü–≤–µ—Ç–∞, –Ω–∞–∑–≤–∞–Ω–∏—è, —ç–º–æ–¥–∑–∏)
- `SAVE_DEBOUNCE_MS` - –∑–∞–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (10000ms)

**utils.ts** - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `screenToWorld()` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–∏—Ä–∞
- `clamp()` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö min-max
- `parseAge()` - –ø–∞—Ä—Å–∏–Ω–≥ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∏–∑ —Å—Ç—Ä–æ–∫–∏
- `removeUndefined()` - —É–¥–∞–ª–µ–Ω–∏–µ undefined –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è Firestore

**components/IconPickerButton.tsx** - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ –ø–∏–∫—Ç–æ–≥—Ä–∞–º–º:
- –í—Å–ø–ª—ã–≤–∞—é—â–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä –∏–∑ 40 PNG-–∏–∫–æ–Ω–æ–∫
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö —Ü–≤–µ—Ç–æ–≤—ã—Ö —Ç–µ–º (emerald/sky)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**hooks/useTimelineHistory.ts** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π:
- `saveToHistory()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–Ω–∏–º–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `undo()`, `redo()` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—Ä–∏–∏
- `canUndo`, `canRedo` - —Ñ–ª–∞–≥–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ 50 —à–∞–≥–æ–≤

## UI-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- **–õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å** (`fixed left`):
  - –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –ø—Ä–æ—Ñ–∏–ª—å.
  - –ü–æ–ª–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ ‚Äî –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–ª–∏–Ω—É ¬´–ø—Ä–æ–∂–∏—Ç–æ–π¬ª —á–∞—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–∏–Ω–∏–∏.
  - –ü–æ–ª–∑—É–Ω–æ–∫ ¬´–ü—Ä–æ–∫—Ä—É—Ç–∫–∞¬ª ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –≤—å—é–ø–æ—Ä—Ç –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–º.
  - –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–ª–∞–π–¥–µ—Ä –º–∞—Å—à—Ç–∞–±–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ zoom'–∞.
  - –ë–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ñ–µ—Ä–∞–º.
- **–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ö–æ–ª—Å—Ç**:
  - –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è –∂–∏–∑–Ω–∏ –ø–æ —Ü–µ–Ω—Ç—Ä—É (`LINE_X_POSITION = 2000`), —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω–∞—è –Ω–∞ —Å–ø–ª–æ—à–Ω—É—é (–ø—Ä–æ—à–µ–¥—à–µ–µ) –∏ –ø—É–Ω–∫—Ç–∏—Ä–Ω—É—é (–±—É–¥—É—â–µ–µ) —á–∞—Å—Ç–∏.
  - –®–∫–∞–ª–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∫–∞–∂–¥—ã–µ 5 –ª–µ—Ç –ø–æ –≤—Å–µ–π —à–∏—Ä–∏–Ω–µ —Ö–æ–ª—Å—Ç–∞.
  - –°–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Å –ø–æ–¥–ø–∏—Å—å—é, —Ü–≤–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ñ–µ—Ä—ã, –æ—Ç–º–µ—Ç–∫–∞ ¬´—Ä–µ—à–µ–Ω–∏–µ¬ª —Ä–∏—Å—É–µ—Ç—Å—è –∫—Ä–µ—Å—Ç–∏–∫–æ–º.
  - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ ¬´–≤–µ—Ç–æ—á–∫–∏¬ª —Å–æ–µ–¥–∏–Ω—è—é—Ç —Å–æ–±—ã—Ç–∏–µ —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –ª–∏–Ω–∏–µ–π (–æ—Å–Ω–æ–≤–Ω–æ–π –∏–ª–∏ –æ—Ç–≤–µ—Ç–≤–ª–µ–Ω–∏–µ–º).
  - –û—Ç–¥–µ–ª—å–Ω—ã–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ (edges) –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É—é—Ç –≤–µ—Ç–∫–∏ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –≤–æ–∑—Ä–∞—Å—Ç–æ–≤.
- **–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å** (`fixed right`):
  - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º —Å—Ç–∞—Ç—É—Å–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (idle/saving/saved/error).
  - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è.
  - –ò–Ω—Ñ–æ—Ä–º–µ—Ä—ã –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–µ—Ç–∫–µ –∏–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–∏–Ω–∏–∏.
  - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –≤–µ—Ç–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª–∏–Ω—ã –≤–µ—Ç–∫–∏ –∏ –∫–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è.
  - –ë–ª–æ–∫ Undo/Redo —Å –≥–æ—Ä—è—á–∏–º–∏ –∫–ª–∞–≤–∏—à–∞–º–∏.
  - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π (—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `showHelp`), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ ‚Äî –≤—ã–∑–æ–≤ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ UI-—Ç—Ä–∏–≥–≥–µ—Ä.

## –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

- **–°–æ–±—ã—Ç–∏–µ (`NodeT`)**
  - `id`, `age`, `label`, `notes`, `isDecision`.
  - `sphere` –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω, –≤—ã–±—Ä–∞–Ω –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è `Sphere`.
  - `x` ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ª–∏–Ω–∏–µ–π, –µ—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –æ—Å–∏).
  - `parentX` ‚Äî –∏—Å—Ö–æ–¥–Ω–∞—è –ª–∏–Ω–∏—è, —Å –∫–æ—Ç–æ—Ä–æ–π –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ —Å–æ–±—ã—Ç–∏–µ (–ø–æ–º–æ–≥–∞–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å).
- **–í–µ—Ç–∫–∞ (`EdgeT`)**
  - `id`, `x`, `startAge`, `endAge`, `color`, `nodeId` (—Å–æ–±—ã—Ç–∏–µ-–∏—Å—Ç–æ—á–Ω–∏–∫).
- **TimelineData**
  - `currentAge`, `ageMax` (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω 100), `nodes`, `edges`, `birthDetails`.
- –ò—Å—Ç–æ—Ä–∏—è (`history`, `historyIndex`) —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Å–Ω–∏–º–∫–∏ `nodes + edges` —Å –≥–ª—É–±–∏–Ω–æ–π –¥–æ 50 —à–∞–≥–æ–≤.

## –ö–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

- **–ü–∏–∫—Ç–æ–≥—Ä–∞–º–º—ã —Å–æ–±—ã—Ç–∏–π**
  - –í —à–∞–ø–∫–µ —Ñ–æ—Ä–º –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–∫–æ–Ω–∫–∏; –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–ø–ª—ã–≤–∞—é—â–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä –∏–∑ 40 PNG (`public/icons/events`, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ `icons.json`). –í—ã–±–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `iconId` –∏ –∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫—Ä—É–≥ –Ω–∞ —Ö–æ–ª—Å—Ç–µ.
  - –ü–∏–∫—Ç–æ–≥—Ä–∞–º–º–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Å–æ–±—ã—Ç–∏–µ–º; –±–∞–∑–æ–≤—ã–π –∫—Ä—É–≥ –∏ –∫—Ä–µ—Å—Ç–∏–∫ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å.
  - –î–ª—è —Å–æ–±—ã—Ç–∏–π –±–µ–∑ –ø–∏–∫—Ç–æ–≥—Ä–∞–º–º—ã –∫—Ä—É–≥ –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–ª—ã–º —Å —Ü–≤–µ—Ç–Ω–æ–π –æ–±–≤–æ–¥–∫–æ–π —Å—Ñ–µ—Ä—ã, –∫—Ä–µ—Å—Ç–∏–∫ ¬´–º–æ—ë —Ä–µ—à–µ–Ω–∏–µ¬ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö.
- **–ü—Ä–æ—Ñ–∏–ª—å —Ä–æ–∂–¥–µ–Ω–∏—è**
  - –¢–æ—á–∫–∞ ¬´üë∂ –†–æ–∂–¥–µ–Ω–∏–µ¬ª –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–∏–Ω–∏–∏ –∞–∫—Ç–∏–≤–Ω–∞: –ø—Ä–∏ –∫–ª–∏–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –ø–æ–ª—è–º–∏ ¬´–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è¬ª, ¬´–ì–æ—Ä–æ–¥ / –º–µ—Å—Ç–æ¬ª –∏ ¬´–û–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞¬ª.
  - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `birthDetails` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Firestore; undo/redo –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è.
  - –ö–∞—Ä—Ç–æ—á–∫—É –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (¬´–ó–∞–∫—Ä—ã—Ç—å¬ª) –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º (¬´–û—á–∏—Å—Ç–∏—Ç—å¬ª).
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è**
  - –ö–ª–∏–∫ –ø–æ —Å–æ–±—ã—Ç–∏—é –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è (—É–¥–∞–ª—è–µ—Ç –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –≤–µ—Ç–∫–∏).
- **–í–µ—Ç–∫–∏**
  - –ö–Ω–æ–ø–∫–∞ ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤–µ—Ç–∫—É¬ª –≤ —Ñ–æ—Ä–º–µ —Å–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞—ë—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π edge –∑–∞–¥–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã.
  - –í –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –≤–µ—Ç–∫–∏ –∏ —É–¥–∞–ª–µ–Ω–∏–µ (—Å–æ–±—ã—Ç–∏—è –Ω–∞ –Ω–µ–π –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –ª–∏–Ω–∏–∏).
  - –ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –µ–≥–æ –≤–µ—Ç–æ–∫ –∏ –≤—Å–µ—Ö –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã—Ö –∫ –Ω–∏–º —Å–æ–±—ã—Ç–∏–π.
- **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–±**
  - –ö–æ–ª–µ—Å–æ –º—ã—à–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç —Å—Ü–µ–Ω—É —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –≥–ª–∞–≤–Ω–æ–π –ª–∏–Ω–∏–∏ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `0.2 ‚â§ k ‚â§ 3`).
  - –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ö–æ–ª—Å—Ç–∞ –º—ã—à—å—é; –≤—å—é–ø–æ—Ä—Ç —Ç–∞–∫–∂–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–ª–∑—É–Ω–∫–æ–º –≤–æ–∑—Ä–∞—Å—Ç–∞.
  - –°–æ–±—ã—Ç–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—é—Ç—Å—è pointer-—Å–æ–±—ã—Ç–∏—è–º–∏; –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ drag —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é.
- **Undo/Redo –∏ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏**
  - Cmd/Ctrl+Z, Cmd/Ctrl+Shift+Z —Ä–∞–±–æ—Ç–∞—é—Ç –≤–Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π.
  - Delete —É–¥–∞–ª—è–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ, Escape —Å–Ω–∏–º–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ.

## –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞

- –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (`setTimeout` –Ω–∞ 10 —Å–µ–∫—É–Ω–¥) —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–æ–±—ã—Ç–∏–π –∏–ª–∏ –≤–µ—Ç–æ–∫.
- –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Firestore –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ `removeUndefined`.
- –î–æ–∫—É–º–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `timelines/{userId}` —Å `updatedAt`.
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:
  - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è –∏ –≤–µ—Ç–∫–∏, –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è `x`/`parentX`.
  - –í—å—é–ø–æ—Ä—Ç —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ —Ç–µ–∫—É—â–µ–º—É –≤–æ–∑—Ä–∞—Å—Ç—É (–∏–ª–∏ –ø–æ —Ä–æ–∂–¥–µ–Ω–∏—é, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç).

## –°—Ç–∏–ª–∏ –∏ –≤–∏–∑—É–∞–ª

- –°—Ñ–µ—Ä—ã –∂–∏–∑–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Å—Ç–µ–ª—å–Ω—É—é –ø–∞–ª–∏—Ç—Ä—É, —Å–æ–≤–ø–∞–¥–∞—é—â—É—é —Å `SPHERE_META`.
- –ü–æ–¥–ø–∏—Å–∏ –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–µ–∫—Å—Ç–æ–≤ –≤ –ø–∞–Ω–µ–ª–∏ ‚Äî —à—Ä–∏—Ñ—Ç `Georgia, serif`.
- –•–æ–ª—Å—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω –Ω–∞ —à–∏—Ä–∏–Ω—É `4000px`, —á—Ç–æ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –±–æ–∫–æ–≤—ã—Ö –≤–µ—Ç–æ–∫.
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–∞–Ω–µ–ª–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º–∏ —Ñ–æ–Ω–∞–º–∏ –∏ –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º–∏ –±–ª–æ–∫–∞–º–∏.

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: —Å–æ–±—ã—Ç–∏—è –Ω–µ –¥–≤–∏–≥–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –≤–µ—Ç–∫–æ–π

**–°–∏–º–ø—Ç–æ–º—ã**: –ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–¥—ë—Ç –≤–µ—Ç–∫–∞, –¥–æ—á–µ—Ä–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –Ω–∞ —ç—Ç–æ–π –≤–µ—Ç–∫–µ ¬´–∑–∞–≤–∏—Å–∞—é—Ç –≤ –≤–æ–∑–¥—É—Ö–µ¬ª –∏ –Ω–µ —Å–ª–µ–¥—É—é—Ç –∑–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–º.

**–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**:
- `node.x` ‚Äî —Ç–µ–∫—É—â–∞—è X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è
- `node.parentX` ‚Äî X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –ª–∏–Ω–∏–∏ (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è)
- `edge.x` ‚Äî X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏ –≤–µ—Ç–∫–∏
- Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –∞–±—Å–æ–ª—é—Ç–Ω–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤–æ–∑—Ä–∞—Å—Ç–æ–º —Å–æ–±—ã—Ç–∏—è

**–ü—Ä–∏—á–∏–Ω–∞ –±–∞–≥–∞**: –í —Ñ—É–Ω–∫—Ü–∏–∏ `handleNodeDragMove` (Timeline.tsx:673) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (`dragStartNodeX`) –≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–µ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–æ–±—ã—Ç–∏—è:

```typescript
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
const oldX = dragStartNodeX; // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –≤ –Ω–∞—á–∞–ª–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è

// –ü–†–ê–í–ò–õ–¨–ù–û:
const oldX = node.x ?? LINE_X_POSITION; // –¢–µ–∫—É—â–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è
```

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:
1. –ü–µ—Ä–≤–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏: –Ω–∞—Ö–æ–¥–∏—Ç –¥–µ—Ç–µ–π —Å `parentX === 2100`, –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Ö –Ω–∞ `parentX === 2110`
2. –í—Ç–æ—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏: –∏—â–µ—Ç –¥–µ—Ç–µ–π —Å `parentX === 2100`, –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –Ω–∏–∫–æ–≥–æ (–æ–Ω–∏ —É–∂–µ 2110)
3. –î–µ—Ç–∏ –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è

**–†–µ—à–µ–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ç–µ–∫—É—â—É—é** –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Å–æ–±—ã—Ç–∏—è (`node.x`) –≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥—ë—Ç –≤—Å–µ—Ö –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–º–∫–æ–≤.

**–†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** (Timeline.tsx:676-726):
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è —Å `parentX === fromX`
- –û–±–Ω–æ–≤–ª—è–µ—Ç –∏—Ö `parentX` –Ω–∞ `toX`
- –î–ª—è —Å–æ–±—ã—Ç–∏–π **–Ω–∞ –ª–∏–Ω–∏–∏** (`node.x === fromX`): –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –Ω–∞ `toX`
- –î–ª—è —Å–æ–±—ã—Ç–∏–π **—Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º** (`node.x !== fromX`): —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–º–µ—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `deltaX`
- –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–µ—Ç–∫–∏ –æ—Ç —ç—Ç–∏—Ö —Å–æ–±—ã—Ç–∏–π

## –†–∏—Å–∫–∏ –∏ –ø–ª–∞–Ω—ã –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ

- UI –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞; –ø—Ä–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–∏ –≤ –¥—Ä—É–≥—É—é –æ–±–æ–ª–æ—á–∫—É –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è `transform`.
- –ù–µ—Ç —è–≤–Ω–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ–º–æ—â–∏ ‚Äî —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É/–∫–ª–∞–≤–∏—à—É.
- –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ `edges`/`parentX`) –ø—Ä–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏.
- –í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ: —ç–∫—Å–ø–æ—Ä—Ç —Ç–∞–π–º–ª–∞–π–Ω–∞, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ñ–µ—Ä–∞–º, –∏—Å—Ç–æ—Ä–∏—è –≤–µ—Ç–≤–ª–µ–Ω–∏–π –≤–æ –≤—Ä–µ–º–µ–Ω–∏.
